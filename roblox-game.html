<!DOCTYPE html> <html> <head> <title>Perchance</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <base href="https://perchance.org/" target="_parent"> <style> html{ font-family:sans-serif; -ms-text-size-adjust:100%; -webkit-text-size-adjust:100%; } body{ margin:0;} article, aside, details, figcaption, figure, footer, header, hgroup, main, menu, nav, section, summary{ display:block;} audio, canvas, progress, video{ display:inline-block; vertical-align:baseline; } audio:not([controls]){ display:none;height:0;} [hidden], template{ display:none;} a{ background-color:transparent;} a:active, a:hover{ outline:0;} abbr[title]{ border-bottom:1px dotted;} b, strong{ font-weight:bold;} dfn{ font-style:italic;} h1{ font-size:2em;margin:0.67em 0;} mark{ background:#ff0;color:#000;} small{ font-size:80%;} sub, sup{ font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sup{ top:-0.5em;}sub{ bottom:-0.25em;} img{ border:0;} svg:not(:root){ overflow:hidden;} figure{ margin:1em 40px;} hr{ box-sizing:content-box;height:0;} pre{ overflow:auto;} code, kbd, pre, samp{ font-family:monospace, monospace;font-size:1em;} button, input, optgroup, select, textarea{ color:inherit; font:inherit; margin:0; } button{ overflow:visible;} button, select{ text-transform:none;} button, html input[type="button"], input[type="reset"], input[type="submit"]{ -webkit-appearance:button; cursor:pointer; } button[disabled], html input[disabled]{ cursor:default;} button::-moz-focus-inner, input::-moz-focus-inner{ border:0;padding:0;} input{ line-height:normal;} input[type="checkbox"], input[type="radio"]{ box-sizing:border-box; padding:0; } input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button{ height:auto;} input[type="search"]{ -webkit-appearance:textfield; box-sizing:content-box; } input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration{ -webkit-appearance:none;} fieldset{ border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em;} legend{ border:0; padding:0; } textarea{ overflow:auto;} optgroup{ font-weight:bold;} table{ border-collapse:collapse;border-spacing:0;}td, th{ padding:0;}</style> <script>function inIframe(){try{return window.self!==window.top}catch(n){return!0}}inIframe()||();</script> <style> html{ margin:0;padding:0;width:100%;height:100%;box-sizing:border-box;}*, *:before, *:after{ box-sizing:inherit;}body, #output-container{ margin:0;padding:0;text-align:center;}hidden{ position:fixed;top:-14000px;left:-14000px;}button{ padding:0.135em 0.5em;border:1px solid #afafaf;background:linear-gradient(to bottom, rgb(245, 245, 245) 0%, rgb(236, 236, 236) 47%, rgb(223, 223, 223) 100%);border-radius:1px;}button:hover{ border-color:#909090;}#output-container ul{ text-align:left;}</style> </head> <body> <script id="preloaded-generator-data" type="notjs">%7B%22name%22:%22roblox-game%22,%22modelText%22:%22//%20To%20import%20this%20generator,%20try%20to%20write%20for%20nested%20items.%5Cn//%20Example:%5Cn//%20rg%20=%20%7Bimport:roblox-game%7D%5Cn//%20output%20=%20My%20favorite%20game%20is%20%5Brg.game%5D,%20but%20%5Brg.dislikes%5D%20people%20think%20otherwise!%5Cn%5Cnlikes%5Cn%5Ct%7B1-32%7D%5Cn%5Ct%7B1-9%7DK+%5E0.4%5Cn%5Ct%7B1-7%7DM+%5E0.2%5Cn%5Ct%5Cndislikes%5Cn%5Ct%7B0-32%7D%5Cn%5Ct%7B1-9%7DK+%5E0.1%5Cn%5Ct%7B1-2%7DM+%5E0.05%5Cn%5Cncharacter%20=%20%7B%7Ba-z%7D%7C%7BA-Z%7D%7C%7B0-9%7D%7D%5CntenCharacters%20=%20%5Bcharacter.selectMany(3,24)%5D%5Cnadjective%20=%20%7Bimport:adjective%7D%5Cn%5Cncolor%5Cn%5Ctred/000%5Cn%5Ctorange/fff%5Cn%5Ctyellow/fff%5Cn%5Ctgreen/fff%5Cn%5Ctblue/fff%5Cn%5Ctpurple/fff%5Cn%5Ctbrown/fff%5Cn%5Ctmagenta/fff%5Cn%5Cttan/fff%5Cn%5Ctolive/fff%5Cn%5Ctmaroon/fff%5Cn%5Ctnavy/fff%5Cn%5Ctturquoise/fff%5Cn%5Ctsilver/fff%5Cn%5Ctlime/fff%5Cn%5Ctteal/fff%5Cn%5Ctindigo/fff%5Cn%5Ctviolet/fff%5Cn%5Ctblack/fff%5Cn%5Ctfff/000%5Cn%5Ctgrey/fff%5Cn%5Ct%5Cncap%5Cn%5CtComing%20Soon...%5Cn%5Ct%7B%5Bgame%5D%7C%5Bauthor%5D%7D%7B's%20games%20are%20botted.%20Ours%20are%20not.%7C%20bots%20%7Bhis%7Cher%7Ctheir%7D%20games.%20%7BWe%7CI%7D%20don't.%7D%5E0.8%5Cn%5CtLike%20the%20game%20for%20Free%20%7BVIP%7CAdmin%7CGamepasses%7CCoins%7CGems%7CTokens%7CV-Bucks%7D!%5Cn%5CtLike%20the%20game%20for%20a%20Free%20Boombox!%20//countermeasure%5Cn%5CtBuy%20our%20ROBLOX%20Toy%20for%20Free%20%7BVIP%7CAdmin%7CGamepasses%7CCoins%7CGems%7CTokens%7CV-Bucks%7D.%5Cn%5CtBuy%20our%20ROBLOX%20Toy%20for%20a%20Free%20Boombox!%20//countermeasure%5Cn%5Ct%5Bgamepass%5D%20Return!%5Cn%5CtFlamingo%20can't%20%5Bobjective%5D%7B%20in%20time%7C%7D!%5E1.3%5Cn%5CtFlamingo%20is%20Owner%20Admin%20here.%5E1.6%5Cn%5CtFlamingo%20is%20banned.%5E0.2%5Cn%5CtEgg%20Hunt%20%7B2009-2023%7D%20was%20hosted%20here!%5Cn%5CtFree%20-%20forever%20and%20always.%5Cn%5CtBETA%20GAME!%20You%20need%20%7B5-242%7D0%20Robux%20to%20play.%5Cn%5Cnobjective%5Cn%5Ctescape%20the%20prison%5Cn%5Ctfind%20the%20Eggs%5Cn%5Ctkill%20the%20bandits%5Cn%5Ctget%20%7B%7B1-25%7D00%7Call%20the%7D%20%7Bcoins%7Cgems%7Ctokens%7D%5Cn%5Ctmake%20a%20video%20on%20this%5Cn%5Ctrun%20from%20the%20Myths%5Cn%5Ct%5Cngamepass%5Cn%5CtCustom%20Music%20IDs%5Cn%5CtRadios%5Cn%5CtVIPs%5Cn%5CtMVPs%5Cn%5Ct%7BElite%7COP%7CStarter%7D%20%7BWeapon%7CGear%7CCard%7D%20Packs%5Cn%5Ct%5Cnauthor%5Cn%5CtThe%20Official%20Fan%20Gathering%20of%20Cryfry%5Cn%5CtTOFGoC%5Cn%5CtCar%20Crushers%5Cn%5CtThe%20Flamingo%20Fan%20Club%5Cn%5CtOfficial%20%5C%5C%5BRo-Ghoul%5C%5C%5D%5Cn%5CtOffical%20Team%20Turtle%5Cn%5Ct%5Bgame%5D%20Studios%5Cn%5Ct%5Bgame%5D%20Fan%20Group%5Cn%5Ct%5C%5C%5C%5C(0-o)/%5Cn%5CtKicksForTricks56%5Cn%5CtAnt_Beatz%5Cn%5CtCryfryDG%5Cn%5CtBowtie2x%5Cn%5Ct%5BtenCharacters%5D%20//%20Perchance%20tutorial%20ftw!%5Cn%5CtTOMMY_3000%5Cn%5CtLunarEclipse_art%5Cn%5CtLFORLEEEEEKING%5Cn%5CtNic_xP%5Cn%5CtUmbra_Cowspike%5Cn%5Ct%5C%5C%5B%20Content%20Deleted%20%7B111111-999999%7D%20%5C%5C%5D%5Cn%5CtRoblox%5Cn%5CtGerex_Fabidoxi%5Cn%5Ct%5Cnsimulators%5Cn%5CtTribe%20Command%5Cn%5CtMining%20Builder%5Cn%5CtWildlife%20of%20Operations%5Cn%5CtSpace%20of%20Captains%5Cn%5CtFamily%20and%20Creators%5Cn%5CtIron%20and%20Demolition%5Cn%5CtKnightgear%5Cn%5CtStormraid%5Cn%5CtLifeblade%5Cn%5CtMechaville%5Cn%5Ct%5Badjective.titleCase%5D%5Cn%5Ct%5Cnhashtag%20=%20#%5Cngame%5Cn%5CtAncient%20Predator%5Cn%5CtLight%20World%5Cn%5CtRule%20of%20Campaigns%5Cn%5CtRule%20of%20Heroics%5Cn%5CtEdge%20and%20Invasion%5Cn%5CtSolitude%20and%20Duty%5Cn%5CtDynachase%5Cn%5CtBlockscape%5Cn%5CtDreamstorm%5Cn%5CtDeaddoom%5Cn%5CtForgotten%20Dream%5Cn%5CtEclipsed%20Syndrome%5Cn%5CtShields%20of%20Nightmares%5Cn%5CtSorcery%20of%20Labyrinths%5Cn%5CtTemptation%20and%20Land%5Cn%5CtHonor%20and%20Experiments%5Cn%5CtBloodbot%5Cn%5CtDemonhunt%5Cn%5CtEmberville%5Cn%5CtHerostar%5Cn%5CtDragon%20Invasion%5Cn%5CtKingdom%20Colony%5Cn%5CtWar%20of%20Justice%5Cn%5CtKings%20of%20Mystery%5Cn%5CtSchool%20and%20Fables%5Cn%5CtInfinity%20and%20Light%5Cn%5CtSkyslayer%5Cn%5CtEverrealm%5Cn%5CtRuneside%5Cn%5CtStartale%5Cn%5CtThe%20Taco%20Song%5Cn%5CtFREE%20ROBUX%5E0.2%5Cn%5Ct%5C%5C%5B%20Content%20Deleted%20%5C%5C%5D%5E1.3%5Cn%5Ct%5Bsimulators%5D%20Simulator%5E5.4%5Cn%5Ct%5Badjective.titleCase%5D%20Hotel%5E4.2%5Cn%5Ct%5Badjective.titleCase%5D%20Hotel%20(Job%20Center)%5E4.2%5Cn%5Ct%7BROBLOX%7C%7D%20%7BElementary%7CMiddle%7CHigh%7D%20School%7B%20%7B2-13%7D%7C%7C%20%5Bhashtag%5D%7D%5Cn%5CtTraitor!%5Cn%5Ct%5Bhashtag.selectMany(6,12)%5D%5E1.3%22,%22outputTemplate%22:%22%3C!DOCTYPE%20html%3E%5Cn%3Chtml%3E%5Cn%3Chead%3E%5Cn%3Ctitle%3E%3C/title%3E%5Cn%3Cstyle%3E%5Cndiv%20%7B%5Cn%5Ctfont-size:%2016px;%5Cn%5Ctfont-weight:%20300;%5Cn%5Ctline-height:%201.3em;%5Cn%7D%5Cna%20%7B%5Cn%5Ctbackground:%20transparent;%5Cn%7D%5Cnimg%20%7B%5Cn%5Ctborder:%200;%5Cn%7D%5Cn*,%20::after,%20::before%20%7B%5Cn%5Ct-webkit-box-sizing:%20inherit;%5Cn%5Ct-moz-box-sizing:%20inherit;%5Cn%5Ctbox-sizing:%20inherit;%5Cn%7D%5Cn*,%20::after,%20::before%20%7B%5Cn%5Ct-webkit-box-sizing:%20border-box;%5Cn%5Ct-moz-box-sizing:%20border-box;%5Cn%5Ctbox-sizing:%20border-box;%5Cn%5Cttext-rendering:%20auto;%5Cn%5Ct-webkit-font-smoothing:%20antialiased;%5Cn%5Ct-moz-osx-font-smoothing:%20grayscale;%5Cn%7D%5Cnh2%20%7B%5Cn%5Ctfont-size:%2030px;%5Cn%5Ctfont-weight:%20400;%5Cn%7D%5Cnbody%20%7B%5Cn%5Ctmargin:%200;%5Cn%7D%5Cnhtml%20%7B%5Cn%5Ct-webkit-box-sizing:%20border-box;%5Cn%5Ct-moz-box-sizing:%20border-box;%5Cn%5Ctbox-sizing:%20border-box;%5Cn%5Ctmin-height:%20100%25;%5Cn%5Ctposition:%20relative;%5Cn%7D%5Cnbody%20%7B%5Cn%5Ctbackground-color:%20#e3e3e3;%5Cn%5Ctcolor:%20#191919;%5Cn%5Ctfont-family:%20Source%20Sans%20Pro,Arial,Helvetica,sans-serif;%5Cn%5Ctfont-weight:%20300;%5Cn%5Ctfont-size:%2016px;%5Cn%5Ctwidth:%20100%25;%5Cn%5Ctheight:%20100%25;%5Cn%5Ctmin-width:%20320px;%5Cn%5Ctmargin-bottom:%20168px;%5Cn%5Ctoverflow-y:%20scroll;%5Cn%7D%5Cn.col-lg-1,%20.col-lg-2,%20.col-lg-3,%20.col-lg-4,%20.col-lg-5,%20.col-lg-6,%20.col-lg-7,%20.col-lg-8,%20.col-lg-9,%20.col-lg-10,%20.col-lg-11,%20.col-lg-12,%20.col-md-1,%20.col-md-2,%20.col-md-3,%20.col-md-4,%20.col-md-5,%20.col-md-6,%20.col-md-7,%20.col-md-8,%20.col-md-9,%20.col-md-10,%20.col-md-11,%20.col-md-12,%20.col-sm-1,%20.col-sm-2,%20.col-sm-3,%20.col-sm-4,%20.col-sm-5,%20.col-sm-6,%20.col-sm-7,%20.col-sm-8,%20.col-sm-9,%20.col-sm-10,%20.col-sm-11,%20.col-sm-12,%20.col-xs-1,%20.col-xs-2,%20.col-xs-3,%20.col-xs-4,%20.col-xs-5,%20.col-xs-6,%20.col-xs-7,%20.col-xs-8,%20.col-xs-9,%20.col-xs-10,%20.col-xs-11,%20.col-xs-12%20%7B%5Cn%5Ctposition:%20relative;%5Cn%5Ctmin-height:%201px;%5Cn%5Ctpadding-left:%200px;%5Cn%5Ctpadding-right:%200px;%5Cn%7D%5Cn.col-xs-1,%20.col-xs-2,%20.col-xs-3,%20.col-xs-4,%20.col-xs-5,%20.col-xs-6,%20.col-xs-7,%20.col-xs-8,%20.col-xs-9,%20.col-xs-10,%20.col-xs-11,%20.col-xs-12%20%7B%5Cn%5Ctfloat:%20left;%5Cn%7D%5Cn.col-xs-12%20%7B%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn.section-content%20%7B%5Cn%5Ctmargin:%200%200%2018px;%5Cn%7D%5Cn.section-content%20%7B%5Cn%5Ctbackground-color:%20#fff;%5Cn%5Ctpadding:%2015px;%5Cn%5Ctposition:%20relative;%5Cn%7D%5Cn.game-main-content%20%7B%5Cn%5Ctheight:%20384px;%5Cn%5Ctmin-height:%20345px;%5Cn%5Ctpadding:%2012px;%5Cn%5Ctposition:%20relative;%5Cn%5Ctmargin-bottom:%200px;%5Cn%7D%5Cn.section-content::after,%20.section-content::before%20%7B%5Cn%5Ctcontent:%20%5C%22%20%5C%22;%5Cn%5Ctdisplay:%20table;%5Cn%7D%5Cn.section-content::after%20%7B%5Cn%5Ctclear:%20both;%5Cn%7D%5Cn.row::after%20%7B%5Cn%5Ctclear:%20both;%5Cn%7D%5Cn.content::after%20%7B%5Cn%5Ctclear:%20both;%5Cn%7D%5Cn.container-header::after,%20.container-list::after,%20.container-main::after,%20.hlist::after,%20.section::after%20%7B%5Cn%5Ctclear:%20both;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.game-play-buttons%20%7B%5Cn%5Ctpadding-top:%2020px;%5Cn%5Ctpadding-bottom:%2064px;%5Cn%7D%5Cn.spinner-sm%20%7B%5Cn%5Ctheight:%2016px;%5Cn%5Ctbackground-size:%20auto%2016px;%5Cn%7D%5Cn.vote-container%20%7B%5Cn%5Ctwidth:%2070%25;%5Cn%5Ctwidth:%20calc(99%25%20-%2032px);%5Cn%5Ctheight:%206px;%5Cn%5Ctmargin:%209px%20auto%200%201%25;%5Cn%5Ctposition:%20relative;%5Cn%7D%5Cn.vote-background%20%7B%5Cn%5Ctbackground-color:%20#b8b8b8;%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn.vote-percentage%20%7B%5Cn%5Ctbackground-color:%20#757575;%5Cn%7D%5Cn.tooltip-container%20%7B%5Cn%5Ctdisplay:%20inline-block;%5Cn%5Ctcursor:%20pointer;%5Cn%7D%5Cn.icon-follow-game%20%7B%5Cn%5Ctbackground-position:%200%20-252px;%5Cn%7D%5Cn.icon-favorite%20%7B%5Cn%5Ctbackground-position:%200%20-84px;%5Cn%7D%5Cn.carousel%20%7B%5Cn%5Ctwidth:%20640px;%5Cn%5Ctheight:%20360px;%5Cn%5Ctposition:%20relative;%5Cn%5Ctmargin:%200%20auto;%5Cn%7D%5Cn.carousel-inner%20%7B%5Cn%5Ctposition:%20relative;%5Cn%5Ctoverflow:%20hidden;%5Cn%5Ctwidth:%20100%25;%5Cn%5Ctmax-height:%20100%25;%5Cn%7D%5Cn.gotham-font%20div%20%7B%5Cn%5Ctfont-size:%2016px;%5Cn%5Ctfont-weight:%20400;%5Cn%5Ctline-height:%201.4em;%5Cn%7D%5Cn.game-main-content::before,%20.game-main-content::after%20%7B%5Cn%5Ctcontent:%20%5C%22%20%5C%22;%5Cn%5Ctdisplay:%20table;%5Cn%7D%5Cn.game-main-content::after%20%7B%5Cn%5Ctclear:%20both;%5Cn%7D%5Cn.dark-theme%20.section-content%20%7B%5Cn%5Ctbackground-color:%20#393b3d;%5Cn%5Ctcolor:%20#fff;%5Cn%7D%5Cn.row%20%7B%5Cn%5Ctmargin-left:%200px;%5Cn%5Ctmargin-right:%200px;%5Cn%7D%5Cn.page-content%20%7B%5Cn%5Ctfloat:%20left;%5Cn%5Ctmax-width:%20970px;%5Cn%7D%5Cn.row::after,%20.row::before%20%7B%5Cn%5Ctcontent:%20%5C%22%20%5C%22;%5Cn%5Ctdisplay:%20table;%5Cn%7D%5Cn.content%20%7B%5Cn%5Ctmax-width:%201338px;%5Cn%5Ctbackground-color:%20#e3e3e3;%5Cn%5Ctpadding-top:%2012px;%5Cn%5Ctmargin:%200%20auto;%5Cn%7D%5Cn.content%20%7B%5Cn%5Ctmax-width:%201154px;%5Cn%7D%5Cn.content::after,%20.content::before%20%7B%5Cn%5Ctcontent:%20%5C%22%20%5C%22;%5Cn%5Ctdisplay:%20table;%5Cn%7D%5Cn.dark-theme%20.content%20%7B%5Cn%5Ctbackground-color:%20#232527;%5Cn%5Ctcolor:%20#fff;%5Cn%7D%5Cn.container-main%20%7B%5Cn%5Ctmin-height:%2060%25;%5Cn%5Ctmin-height:%20calc(100%25%20-%20183px);%5Cn%5Ctmargin:%2040px%20auto%200;%5Cn%5Ctposition:%20relative;%5Cn%5Ctpadding-bottom:%2040px;%5Cn%5Ctz-index:%20auto;%5Cn%7D%5Cn.container-header::after,%20.container-header::before,%20.container-list::after,%20.container-list::before,%20.container-main::after,%20.container-main::before,%20.hlist::after,%20.hlist::before,%20.section::after,%20.section::before%20%7B%5Cn%5Ctcontent:%20%5C%22%20%5C%22;%5Cn%5Ctdisplay:%20table;%5Cn%7D%5Cn.dark-theme%20%7B%5Cn%5Ctbackground-color:%20#232527;%5Cn%5Ctcolor:%20#fff;%5Cn%7D%5Cn.gotham-font%20%7B%5Cn%5Ctfont-weight:%20400;%5Cn%7D%5Cn.gotham-font,%20.gotham-font%20.h1,%20.gotham-font%20.h2,%20.gotham-font%20.h3,%20.gotham-font%20.h4,%20.gotham-font%20.h5,%20.gotham-font%20.h6,%20.gotham-font%20h1,%20.gotham-font%20h2,%20.gotham-font%20h3,%20.gotham-font%20h4,%20.gotham-font%20h5,%20.gotham-font%20h6%20%7B%5Cn%5Ctfont-family:%20HCo%20Gotham%20SSm,Helvetica%20Neue,Helvetica,Arial,Lucida%20Grande,sans-serif;%5Cn%7D%5Cnhtml%20%7B%5Cn%5Ctfont-family:%20sans-serif;%5Cn%5Ct-ms-text-size-adjust:%20100%25;%5Cn%5Ct-webkit-text-size-adjust:%20100%25;%5Cn%7D%5Cn.game-main-content%20.game-thumb-container%20%7B%5Cn%5Ctfloat:%20left;%5Cn%7D%5Cn.game-main-content%20.game-calls-to-action%20%7B%5Cn%5Ctwidth:%2030%25;%5Cn%5Ctwidth:%20calc(100%25%20-%20640px);%5Cn%5Ctposition:%20relative;%5Cn%5Ctfloat:%20right;%5Cn%5Ctheight:%20100%25;%5Cn%5Ctpadding:%200%2012px%200%2024px;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.game-main-content%20.game-calls-to-action%20%7B%5Cn%5Ctposition:%20relative;%5Cn%7D%5Cn.game-main-content%20.game-calls-to-action%20.game-buttons-container%20%7B%5Cn%5Ctwidth:%20100%25;%5Cn%5Ctpadding:%200%2012px%200%2024px;%5Cn%5Ctposition:%20absolute;%5Cn%5Ctbottom:%200px;%5Cn%5Ctright:%200px;%5Cn%7D%5Cn.gotham-font%20.game-main-content%20.game-calls-to-action,%20.gotham-font%20.game-main-content%20.game-calls-to-action%20.game-buttons-container%20%7B%5Cn%5Ctpadding:%200%2012px%200%2018px;%5Cn%7D%5Cn.game-main-content%20.game-calls-to-action%20.game-title-container%20%7B%5Cn%5Ctpadding:%200%2024px%200%200;%5Cn%7D%5Cn.gotham-font%20.game-main-content%20.game-calls-to-action%20.game-title-container%20%7B%5Cn%5Ctpadding:%200%2012px%200%200;%5Cn%7D%5Cn.border-top%20%7B%5Cn%5Ctborder-top:%201px%20solid%20#e3e3e3;%5Cn%7D%5Cn.border-bottom%20%7B%5Cn%5Ctborder-bottom:%201px%20solid%20#e3e3e3;%5Cn%7D%5Cn.dark-theme%20.border,%20.dark-theme%20.border-bottom,%20.dark-theme%20.border-left,%20.dark-theme%20.border-right,%20.dark-theme%20.border-top%20%7B%5Cn%5Ctborder-color:%20#656668;%5Cn%7D%5Cn.game-main-content%20.game-play-buttons%20%7B%5Cn%5Cttext-align:%20center;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.game-main-content.follow-button-enabled%20.game-play-buttons%20%7B%5Cn%5Ctpadding-bottom:%2020px;%5Cn%7D%5Cn.gotham-font%20.game-main-content%20.game-calls-to-action%20.game-play-buttons,%20.gotham-font%20.game-main-content%20.game-calls-to-action%20.game-buttons-container%20.game-play-buttons%20%7B%5Cn%5Ctborder-top:%200%20none;%5Cn%5Ctpadding-bottom:%205px;%5Cn%7D%5Cnli,%20ul%20%7B%5Cn%5Ctlist-style:%20none;%5Cn%5Ctmargin:%200;%5Cn%5Ctpadding:%200;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20%7B%5Cn%5Ctposition:%20relative;%5Cn%5Ctwidth:%20100%25;%5Cn%5Ctpadding-top:%2010px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-favorite-button-container%20%7B%5Cn%5Ctfloat:%20left;%5Cn%5Ctwidth:%20110px;%5Cn%5Ctoverflow:%20hidden;%5Cn%5Ctwhite-space:%20nowrap;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-favorite-button-container%20%7B%5Cn%5Ctwidth:%2055px;%5Cn%5Ctwidth:%20calc(((100%25%20-%20110px)%20/%202)%20-%201px);%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-follow-button-container%20%7B%5Cn%5Ctfloat:%20left;%5Cn%5Ctwidth:%20110px;%5Cn%5Ctoverflow:%20hidden;%5Cn%5Ctwhite-space:%20nowrap;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-follow-button-container%20%7B%5Cn%5Ctwidth:%2055px;%5Cn%5Ctwidth:%20calc(((100%25%20-%20110px)%20/%202)%20-%201px);%5Cn%7D%5Cn.voting-panel%20%7B%5Cn%5Ctwidth:%2054%25;%5Cn%5Ctposition:%20relative;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.voting-panel%20%7B%5Cn%5Ctposition:%20relative;%5Cn%5Ctright:%200px;%5Cn%5Ctbottom:%2039px;%5Cn%5Ctwidth:%2060%25;%5Cn%5Ctfloat:%20right;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.voting-panel%20%7B%5Cn%5Ctwidth:%20110px;%5Cn%5Ctbottom:%20-24px;%5Cn%5Ctfloat:%20left;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.social-media-share%20%7B%5Cn%5Ctfloat:%20none;%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn.social-media-share%20%7B%5Cn%5Ctdisplay:%20inline-block;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.social-media-share%20%7B%5Cn%5Ctfloat:%20right;%5Cn%5Ctposition:%20relative;%5Cn%5Ctbottom:%20-15px;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.social-media-share%20%7B%5Cn%5Ctfloat:%20none;%5Cn%5Ctheight:%2022px;%5Cn%7D%5Cn.loading%20%7B%5Cn%5Cttext-align:%20center;%5Cn%7D%5Cn.spinner%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/4bed93c91f909002b1f17f05c0ce13d1-loading.gif%5C%22);%5Cn%5Ctbackground-position:%2050%25;%5Cn%5Ctbackground-repeat:%20no-repeat;%5Cn%5Ctbackground-color:%20transparent;%5Cn%5Ctmargin:%206px%20auto;%5Cn%5Ctdisplay:%20inline-block;%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn.dark-theme%20.spinner%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/fab3a9d08d254fef4aea4408d4db1dfe-loading_dark.gif%5C%22);%5Cn%7D%5Cn.voting-panel%20.loading%20%7B%5Cn%5Ctposition:%20absolute;%5Cn%5Ctz-index:%201;%5Cn%5Ctdisplay:%20none;%5Cn%7D%5Cn.voting-panel%20.users-vote%20%7B%5Cn%5Ctpadding:%200%2028px;%5Cn%5Ctheight:%2030px;%5Cn%5Ctdisplay:%20block;%5Cn%5Ctposition:%20relative;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.voting-panel%20.users-vote%20%7B%5Cn%5Ctpadding:%200;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.upvote,%20.voting-panel%20.users-vote%20.downvote%20%7B%5Cn%5Ctposition:%20absolute;%5Cn%5Cttop:%20-3px;%5Cn%5Ctright:%200px;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.upvote%20%7B%5Cn%5Ctleft:%200px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.voting-panel%20.users-vote%20.upvote%20%7B%5Cn%5Ctleft:%200px;%5Cn%5Cttop:%20-30px;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20%7B%5Cn%5Ctdisplay:%20block;%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.downvote%20%7B%5Cn%5Ctright:%200px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.voting-panel%20.users-vote%20.downvote%20%7B%5Cn%5Ctright:%200px;%5Cn%5Cttop:%20-30px;%5Cn%7D%5Cn.voting-panel%20span%20%7B%5Cn%5Ctfloat:%20none;%5Cn%5Ctline-height:%2020px;%5Cn%5Ctfont-size:%2012px;%5Cn%7D%5Cn.icon-allgears,%20.icon-Building,%20.icon-catalog,%20.icon-copylocked,%20.icon-default-games,%20.icon-dislike,%20.icon-dislike.selected,%20.icon-experimental-black,%20.icon-experimental-gray1,%20.icon-experimental-gray2,%20.icon-experimental-white,%20.icon-Explosive,%20.icon-games,%20.icon-inventory,%20.icon-like,%20.icon-like.selected,%20.icon-Melee,%20.icon-Musical,%20.icon-Navigation,%20.icon-nocopylocked,%20.icon-nogear,%20.icon-partialgears,%20.icon-playaudio,%20.icon-playing-counts-gray,%20.icon-playing-counts-gray-white-70,%20.icon-PowerUp,%20.icon-privateserver,%20.icon-publicserver,%20.icon-Ranged,%20.icon-share-game-to-chat,%20.icon-Social,%20.icon-Transport,%20.icon-votes-gray,%20.icon-votes-gray-white-70%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/d76ac184081a4d2969061c60861cd1fe-games.svg%5C%22);%5Cn%5Ctbackground-repeat:%20no-repeat;%5Cn%5Ctbackground-size:%20auto%20auto;%5Cn%5Ctwidth:%2028px;%5Cn%5Ctheight:%2028px;%5Cn%5Ctdisplay:%20inline-block;%5Cn%5Ctvertical-align:%20middle;%5Cn%7D%5Cn.icon-dislike%20%7B%5Cn%5Ctbackground-position:%200%20-112px;%5Cn%7D%5Cn.icon-like%20%7B%5Cn%5Ctbackground-position:%200%20-84px;%5Cn%7D%5Cn.dark-theme%20.icon-allgears,%20.dark-theme%20.icon-Building,%20.dark-theme%20.icon-catalog,%20.dark-theme%20.icon-copylocked,%20.dark-theme%20.icon-default-games,%20.dark-theme%20.icon-dislike,%20.dark-theme%20.icon-experimental-black,%20.dark-theme%20.icon-experimental-gray1,%20.dark-theme%20.icon-experimental-gray2,%20.dark-theme%20.icon-experimental-white,%20.dark-theme%20.icon-Explosive,%20.dark-theme%20.icon-games,%20.dark-theme%20.icon-inventory,%20.dark-theme%20.icon-like,%20.dark-theme%20.icon-Melee,%20.dark-theme%20.icon-Musical,%20.dark-theme%20.icon-Navigation,%20.dark-theme%20.icon-nocopylocked,%20.dark-theme%20.icon-nogear,%20.dark-theme%20.icon-partialgears,%20.dark-theme%20.icon-playaudio,%20.dark-theme%20.icon-playing-counts-gray,%20.dark-theme%20.icon-playing-counts-gray-white-70,%20.dark-theme%20.icon-PowerUp,%20.dark-theme%20.icon-privateserver,%20.dark-theme%20.icon-publicserver,%20.dark-theme%20.icon-Ranged,%20.dark-theme%20.icon-share-game-to-chat,%20.dark-theme%20.icon-Social,%20.dark-theme%20.icon-Transport,%20.dark-theme%20.icon-votes-gray,%20.dark-theme%20.icon-votes-gray-white-70%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/ac97ce97e9705ed5948fecac07a7899b-games_dark.svg%5C%22);%5Cn%7D%5Cn.voting-panel%20.users-vote%20.downvote%20span%20%7B%5Cn%5Ctcolor:%20#e2231a;%5Cn%7D%5Cn.dark-theme%20.voting-panel%20.users-vote%20.downvote%20span%20%7B%5Cn%5Ctcolor:%20transparent;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20%7B%5Cn%5Ctwidth:%20100%25;%5Cn%5Ctheight:%206px;%5Cn%5Ctmargin:%206px%200%200%200;%5Cn%5Ctposition:%20relative;%5Cn%5Ctdisplay:%20block;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.voting-panel%20.users-vote%20.vote-details%20.vote-container%20%7B%5Cn%5Ctheight:%202px;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-numbers%20%7B%5Cn%5Ctdisplay:%20block;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-numbers::before,%20.voting-panel%20.users-vote%20.vote-details%20.vote-numbers::after%20%7B%5Cn%5Ctcontent:%20%5C%22%20%5C%22;%5Cn%5Ctdisplay:%20table;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-numbers::after%20%7B%5Cn%5Ctclear:%20both;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-numbers%20.count-left%20%7B%5Cn%5Ctfloat:%20left;%5Cn%5Ctcolor:%20#02b757;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-numbers%20.count-right%20%7B%5Cn%5Ctfloat:%20right;%5Cn%5Cttext-align:%20right;%5Cn%5Ctcolor:%20#e2231a;%5Cn%7D%5Cn.dark-theme%20.voting-panel%20.users-vote%20.vote-details%20.vote-numbers%20.count-left,%20.dark-theme%20.voting-panel%20.users-vote%20.vote-details%20.vote-numbers%20.count-right%20%7B%5Cn%5Ctcolor:%20#fff;%5Cn%7D%5Cn.vote-background,%20.vote-percentage%20%7B%5Cn%5Ctposition:%20absolute;%5Cn%5Cttop:%200px;%5Cn%5Ctleft:%200px;%5Cn%5Ctheight:%20100%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-background,%20.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-percentage%20%7B%5Cn%5Ctposition:%20absolute;%5Cn%5Cttop:%200px;%5Cn%5Ctleft:%200px;%5Cn%5Ctheight:%20100%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-background%20%7B%5Cn%5Ctbackground-color:%20#b8b8b8;%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-background.has-votes%20%7B%5Cn%5Ctbackground-color:%20#e27676;%5Cn%7D%5Cn.dark-theme%20.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-background,%20.dark-theme%20.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-background.has-votes%20%7B%5Cn%5Ctbackground-color:%20#1f2123;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-percentage%20%7B%5Cn%5Ctbackground-color:%20#02b757;%5Cn%7D%5Cn.dark-theme%20.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-percentage%20%7B%5Cn%5Ctbackground-color:%20#fff;%5Cn%7D%5Cn.vote-mask%20.segment%20%7B%5Cn%5Ctbackground-color:%20#fff;%5Cn%5Ctheight:%206px;%5Cn%5Ctwidth:%202px;%5Cn%5Ctposition:%20absolute;%5Cn%5Cttop:%200px;%5Cn%7D%5Cn.vote-mask%20.seg-1%20%7B%5Cn%5Ctleft:%2018%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-mask%20.seg-1%20%7B%5Cn%5Ctleft:%2018%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-mask%20.seg-2%20%7B%5Cn%5Ctleft:%2038%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-mask%20.seg-3%20%7B%5Cn%5Ctleft:%2058%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-mask%20.seg-4%20%7B%5Cn%5Ctleft:%2078%25;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-mask%20.segment%20%7B%5Cn%5Ctbackground-color:%20#fff;%5Cn%5Ctheight:%206px;%5Cn%5Ctwidth:%202px;%5Cn%5Ctposition:%20absolute;%5Cn%5Cttop:%200px;%5Cn%7D%5Cn.dark-theme%20.voting-panel%20.users-vote%20.vote-details%20.vote-container%20.vote-mask%20.segment%20%7B%5Cn%5Ctbackground-color:%20#393b3d;%5Cn%7D%5Cn.vote-mask%20.seg-2%20%7B%5Cn%5Ctleft:%2038%25;%5Cn%7D%5Cn.vote-mask%20.seg-3%20%7B%5Cn%5Ctleft:%2058%25;%5Cn%7D%5Cn.vote-mask%20.seg-4%20%7B%5Cn%5Ctleft:%2078%25;%5Cn%7D%5Cn.icon-like.selected,%20.icon-like:hover,%20a:hover%20.icon-like,%20button:hover%20.icon-like%20%7B%5Cn%5Ctbackground-position:%20-28px%20-84px;%5Cn%7D%5Cn/*%20@media%20all%20and%20(min-width:991px)%20*/%5Cn.voting-panel%20.icon-like%20%7B%5Cn%5Ctfloat:%20left;%5Cn%7D%5Cn.voting-panel%20.users-vote%20.upvote%20span%20%7B%5Cn%5Ctcolor:%20#02b757;%5Cn%7D%5Cn.dark-theme%20.voting-panel%20.users-vote%20.upvote%20span%20%7B%5Cn%5Ctcolor:%20#fff;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-follow-button-container%20.follow-button%20%7B%5Cn%5Ctwidth:%2055px;%5Cn%5Cttext-align:%20center;%5Cn%7D%5Cn.carousel-control%20%7B%5Cn%5Ct-webkit-user-select:%20none;%5Cn%5Ct-moz-user-select:%20none;%5Cn%5Ct-ms-user-select:%20none;%5Cn%5Ctuser-select:%20none;%5Cn%5Ct-webkit-transition:%20all,.2s,ease-in-out;%5Cn%5Ct-o-transition:%20all,.2s,ease-in-out;%5Cn%5Cttransition:%20all,.2s,ease-in-out;%5Cn%5Ctbackground-color:%20#191919;%5Cn%5Ctbackground-color:%20rgba(25,%2025,%2025,%200.3);%5Cn%5Cttop:%2040%25;%5Cn%5Cttop:%20calc(50%25%20-%2024px);%5Cn%5Ctborder:%202px%20solid%20#fff;%5Cn%5Ctborder-radius:%2050%25;%5Cn%5Ctdisplay:%20none;%5Cn%5Ctheight:%2048px;%5Cn%5Ctposition:%20absolute;%5Cn%5Cttext-align:%20center;%5Cn%5Ctwidth:%2048px;%5Cn%5Ctz-index:%201000;%5Cn%7D%5Cna,%20a:active,%20a:focus,%20a:hover,%20a:link,%20a:visited%20%7B%5Cn%5Cttext-decoration:%20none;%5Cn%5Ctcolor:%20inherit;%5Cn%7D%5Cn.text-name,%20.text-name:active,%20.text-name:hover,%20.text-name:link,%20.text-name:visited%20%7B%5Cn%5Ctcolor:%20#00a2ff;%5Cn%7D%5Cn.icon-clanpoint,%20.icon-default-branded,%20.icon-favorite,%20.icon-favorite.favorited,%20.icon-follow-game,%20.icon-follow-game-gray,%20.icon-follow-game.disabled,%20.icon-follow-game.followed,%20.icon-leaderboard,%20.icon-playerpoint,%20.icon-robux,%20.icon-robux-burst-banner,%20.icon-robux-gray,%20.icon-robux-white%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/6d89a812844283096c6c39935f02483d-branded_04182018.svg%5C%22);%5Cn%5Ctbackground-repeat:%20no-repeat;%5Cn%5Ctbackground-size:%20auto%20auto;%5Cn%5Ctwidth:%2028px;%5Cn%5Ctheight:%2028px;%5Cn%5Ctdisplay:%20inline-block;%5Cn%5Ctvertical-align:%20middle;%5Cn%7D%5Cn.dark-theme%20.icon-clanpoint,%20.dark-theme%20.icon-default-branded,%20.dark-theme%20.icon-favorite,%20.dark-theme%20.icon-follow-game,%20.dark-theme%20.icon-follow-game-gray,%20.dark-theme%20.icon-leaderboard,%20.dark-theme%20.icon-playerpoint,%20.dark-theme%20.icon-robux,%20.dark-theme%20.icon-robux-burst-banner,%20.dark-theme%20.icon-robux-gray,%20.dark-theme%20.icon-robux-white%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/d7e813bcfd4f60ecde8f501dcc3540d1-branded_dark_11062018.svg%5C%22);%5Cn%7D%5Cn.icon-follow-game.followed%20%7B%5Cn%5Ctbackground-position:%20-28px%20-252px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-follow-button-container%20.icon-follow-game%20%7B%5Cn%5Ctmargin-bottom:%204px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-follow-button-container%20.icon-label%20%7B%5Cn%5Ctfont-size:%2012px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-favorite-button-container%20.favorite-button%20%7B%5Cn%5Ctwidth:%2055px;%5Cn%5Cttext-align:%20center;%5Cn%7D%5Cn.gotham-font%20.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-favorite-button-container%20.favorite-button%20%7B%5Cn%5Ctwidth:%2068px;%5Cn%7D%5Cn.icon-favorite.favorited,%20.icon-favorite:hover,%20a:hover%20.icon-favorite,%20button:hover%20.icon-favorite%20%7B%5Cn%5Ctbackground-position:%20-28px%20-84px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-favorite-button-container%20.icon-favorite%20%7B%5Cn%5Ctmargin-bottom:%204px;%5Cn%7D%5Cn.game-main-content.follow-button-enabled%20.favorite-follow-vote-share%20.game-favorite-button-container%20.icon-label%20%7B%5Cn%5Ctfont-size:%2012px;%5Cn%7D%5Cn.btn-common-play-game-lg,%20a.btn-common-play-game-lg%20%7B%5Cn%5Ct-webkit-user-select:%20none;%5Cn%5Ct-moz-user-select:%20none;%5Cn%5Ct-ms-user-select:%20none;%5Cn%5Ctuser-select:%20none;%5Cn%5Ctbackground-color:%20#02b757;%5Cn%5Ctborder:%201px%20solid%20#02b757;%5Cn%5Ctcolor:%20#fff;%5Cn%5Ctcursor:%20pointer;%5Cn%5Ctdisplay:%20inline-block;%5Cn%5Ctfont-weight:%20500;%5Cn%5Ctheight:%20auto;%5Cn%5Cttext-align:%20center;%5Cn%5Ctwhite-space:%20nowrap;%5Cn%5Ctvertical-align:%20middle;%5Cn%5Ctpadding:%2012px;%5Cn%5Ctfont-size:%2021px;%5Cn%5Ctline-height:%20100%25;%5Cn%5Ctborder-radius:%205px;%5Cn%7D%5Cn.dark-theme%20.btn-common-play-game-lg%20%7B%5Cn%5Ctbackground-color:%20#00b06f;%5Cn%5Ctborder-color:%20#00b06f;%5Cn%5Ctcolor:%20#fff;%5Cn%5Ctborder-radius:%208px;%5Cn%7D%5Cn.gotham-font%20a%5Bclass%5E=btn%5D,%20.gotham-font%20button%5Bclass%5E=btn%5D%20%7B%5Cn%5Ctfont-weight:%20500;%5Cn%7D%5Cn.gotham-font%20.btn-common-play-game-lg,%20.gotham-font%20a.btn-common-play-game-lg%20%7B%5Cn%5Ctpadding:%204px%2016px;%5Cn%7D%5Cn.dark-theme%20a.btn-common-play-game-lg%20%7B%5Cn%5Ctbackground-color:%20#00b06f;%5Cn%5Ctborder-color:%20#00b06f;%5Cn%5Ctcolor:%20#fff;%5Cn%5Ctborder-radius:%208px;%5Cn%7D%5Cn.game-main-content%20.game-play-buttons%20.btn-common-play-game-lg%20%7B%5Cn%5Ctmin-width:%2088%25;%5Cn%7D%5Cn.gotham-font%20.game-main-content%20.game-play-buttons%20.btn-common-play-game-lg%20%7B%5Cn%5Ctmin-width:%20100%25;%5Cn%7D%5Cn.icon-default-common,%20.icon-play-game,%20.icon-play-with-circle%20%7B%5Cn%5Ctbackground-repeat:%20no-repeat;%5Cn%5Ctbackground-size:%20auto%20auto;%5Cn%5Ctwidth:%2036px;%5Cn%5Ctheight:%2036px;%5Cn%5Ctdisplay:%20inline-block;%5Cn%5Ctvertical-align:%20middle;%5Cn%7D%5Cn.icon-play-game%20%7B%5Cn%5Ctbackground-position:%200%200;%5Cn%7D%5Cn.dark-theme%20.icon-default-common,%20.dark-theme%20.icon-play-game,%20.dark-theme%20.icon-play-with-circle,%20.icon-default-common,%20.icon-play-game,%20.icon-play-with-circle,%20.light-theme%20.icon-default-common,%20.light-theme%20.icon-play-game,%20.light-theme%20.icon-play-with-circle%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik0xOSA4LjVsMTEuOTI1IDE2LjAzNmMuODUxIDEgLjc0NSAyLjUxMi0uMjM3IDMuMzc5YTIuMzMgMi4zMyAwIDAgMS0xLjU0Mi41ODVIOC44NTRjLTEuMyAwLTIuMzU0LTEuMDczLTIuMzU0LTIuMzk1IDAtLjU3Ny4yMDQtMS4xMzQuNTc1LTEuNTdMMTkgOC41eiIgaWQ9ImEiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIGZpbGw9IiNGRkYiIHRyYW5zZm9ybT0icm90YXRlKDkwIDE5IDE4LjUpIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGQ9Ik0xOCA3MkM4LjA1OSA3MiAwIDYzLjk0MSAwIDU0czguMDU5LTE4IDE4LTE4IDE4IDguMDU5IDE4IDE4LTguMDU5IDE4LTE4IDE4em03LjYtMTcuNjk1bC05LjQ2LTcuMTZhMS40MTMgMS40MTMgMCAwIDAtMi4zNCAxLjA2OHYxMi4xODRhMS40MTMgMS40MTMgMCAwIDAgMi4zNCAxLjA2OGw5LjQ2LTcuMTZ6IiBmaWxsLW9wYWNpdHk9Ii45IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==%5C%22);%5Cn%7D%5Cn.btn-common-play-game-lg.disabled:hover%20span%5Bclass%5E=icon-%5D,%20.btn-common-play-game-lg.disabled%20span%5Bclass%5E=icon-%5D,%20%5Bdisabled%5D.btn-common-play-game-lg:hover%20span%5Bclass%5E=icon-%5D,%20%5Bdisabled%5D.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D,%20.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D,%20a.btn-common-play-game-lg.disabled:hover%20span%5Bclass%5E=icon-%5D,%20a.btn-common-play-game-lg.disabled%20span%5Bclass%5E=icon-%5D,%20a%5Bdisabled%5D.btn-common-play-game-lg:hover%20span%5Bclass%5E=icon-%5D,%20a%5Bdisabled%5D.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D,%20a.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D%20%7B%5Cn%5Ctbackground-position:%200%200;%5Cn%7D%5Cn.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D,%20.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D:hover,%20a.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D,%20a.btn-common-play-game-lg%20span%5Bclass%5E=icon-%5D:hover%20%7B%5Cn%5Ctbackground-size:%2072px%20auto;%5Cn%5Ctwidth:%2036px;%5Cn%5Ctheight:%2036px;%5Cn%7D%5Cnh1,%20h2,%20h3,%20h4,%20h5%20%7B%5Cn%5Ctfont-family:%20Source%20Sans%20Pro,Arial,Helvetica,sans-serif;%5Cn%5Ctline-height:%201em;%5Cn%5Ctmargin:%200;%5Cn%5Ctpadding:%205px%200;%5Cn%7D%5Cn.gotham-font%20.font-title,%20.gotham-font%20.h1,%20.gotham-font%20.h2,%20.gotham-font%20h1,%20.gotham-font%20h2%20%7B%5Cn%5Ctfont-size:%2032px;%5Cn%5Ctfont-weight:%20800;%5Cn%7D%5Cn.game-main-content%20.game-calls-to-action%20.game-name%20%7B%5Cn%5Ctoverflow:%20hidden;%5Cn%7D%5Cn.text-label%20%7B%5Cn%5Ctcolor:%20#b8b8b8;%5Cn%5Ctfont-weight:%20400;%5Cn%7D%5Cn.dark-theme%20.text,%20.dark-theme%20.text-date-hint,%20.dark-theme%20.text-default,%20.dark-theme%20.text-description,%20.dark-theme%20.text-footer,%20.dark-theme%20.text-info,%20.dark-theme%20.text-label,%20.dark-theme%20.text-secondary,%20.dark-theme%20p%20%7B%5Cn%5Ctcolor:%20#bdbebe;%5Cn%7D%5Cn.dark-theme%20.text-link,%20.dark-theme%20.text-link.small,%20.dark-theme%20.text-link.small:active,%20.dark-theme%20.text-link.small:link,%20.dark-theme%20.text-link.small:visited,%20.dark-theme%20.text-link.xsmall,%20.dark-theme%20.text-link.xsmall:active,%20.dark-theme%20.text-link.xsmall:link,%20.dark-theme%20.text-link.xsmall:visited,%20.dark-theme%20.text-link.xxsmall,%20.dark-theme%20.text-link.xxsmall:active,%20.dark-theme%20.text-link.xxsmall:link,%20.dark-theme%20.text-link.xxsmall:visited,%20.dark-theme%20.text-link:active,%20.dark-theme%20.text-link:hover,%20.dark-theme%20.text-link:link,%20.dark-theme%20.text-link:visited,%20.dark-theme%20.text-name,%20.dark-theme%20.text-name.small,%20.dark-theme%20.text-name.small:active,%20.dark-theme%20.text-name.small:link,%20.dark-theme%20.text-name.small:visited,%20.dark-theme%20.text-name.xsmall,%20.dark-theme%20.text-name.xsmall:active,%20.dark-theme%20.text-name.xsmall:link,%20.dark-theme%20.text-name.xsmall:visited,%20.dark-theme%20.text-name.xxsmall,%20.dark-theme%20.text-name.xxsmall:active,%20.dark-theme%20.text-name.xxsmall:link,%20.dark-theme%20.text-name.xxsmall:visited,%20.dark-theme%20.text-name:active,%20.dark-theme%20.text-name:hover,%20.dark-theme%20.text-name:link,%20.dark-theme%20.text-name:visited,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.small,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.small:active,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.small:link,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.small:visited,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xsmall,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xsmall:active,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xsmall:link,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xsmall:visited,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xxsmall,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xxsmall:active,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xxsmall:link,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a.xxsmall:visited,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a:active,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a:hover,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a:link,%20.dark-theme%20.vlist%20.list-item%20.list-body%20.list-content%20a:visited,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.small,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.small:active,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.small:link,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.small:visited,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xsmall,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xsmall:active,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xsmall:link,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xsmall:visited,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xxsmall,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xxsmall:active,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xxsmall:link,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a.xxsmall:visited,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a:active,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a:hover,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a:link,%20.vlist%20.list-item%20.list-body%20.list-content%20.dark-theme%20a:visited%20%7B%5Cn%5Ctcolor:%20#fff;%5Cn%7D%5Cn.gotham-font%20.font-bold,%20.gotham-font%20.font-bold:active,%20.gotham-font%20.font-bold:hover,%20.gotham-font%20.font-bold:link,%20.gotham-font%20.font-bold:visited,%20.gotham-font%20.font-header-2,%20.gotham-font%20.font-header-2:active,%20.gotham-font%20.font-header-2:hover,%20.gotham-font%20.font-header-2:link,%20.gotham-font%20.font-header-2:visited,%20.gotham-font%20.h5,%20.gotham-font%20.h5:active,%20.gotham-font%20.h5:hover,%20.gotham-font%20.h5:link,%20.gotham-font%20.h5:visited,%20.gotham-font%20.h6,%20.gotham-font%20.h6:active,%20.gotham-font%20.h6:hover,%20.gotham-font%20.h6:link,%20.gotham-font%20.h6:visited,%20.gotham-font%20.text-footer-nav,%20.gotham-font%20.text-footer-nav:active,%20.gotham-font%20.text-footer-nav:hover,%20.gotham-font%20.text-footer-nav:link,%20.gotham-font%20.text-footer-nav:visited,%20.gotham-font%20.text-label,%20.gotham-font%20.text-label:active,%20.gotham-font%20.text-label:hover,%20.gotham-font%20.text-label:link,%20.gotham-font%20.text-label:visited,%20.gotham-font%20.text-lead,%20.gotham-font%20.text-lead:active,%20.gotham-font%20.text-lead:hover,%20.gotham-font%20.text-lead:link,%20.gotham-font%20.text-lead:visited,%20.gotham-font%20.text-name,%20.gotham-font%20.text-name:active,%20.gotham-font%20.text-name:hover,%20.gotham-font%20.text-name:link,%20.gotham-font%20.text-name:visited,%20.gotham-font%20.text-subject,%20.gotham-font%20.text-subject:active,%20.gotham-font%20.text-subject:hover,%20.gotham-font%20.text-subject:link,%20.gotham-font%20.text-subject:visited,%20.gotham-font%20.text-warning,%20.gotham-font%20.text-warning:active,%20.gotham-font%20.text-warning:hover,%20.gotham-font%20.text-warning:link,%20.gotham-font%20.text-warning:visited,%20.gotham-font%20h5,%20.gotham-font%20h5:active,%20.gotham-font%20h5:hover,%20.gotham-font%20h5:link,%20.gotham-font%20h5:visited,%20.gotham-font%20h6,%20.gotham-font%20h6:active,%20.gotham-font%20h6:hover,%20.gotham-font%20h6:link,%20.gotham-font%20h6:visited,%20.gotham-font%20strong,%20.gotham-font%20strong:active,%20.gotham-font%20strong:hover,%20.gotham-font%20strong:link,%20.gotham-font%20strong:visited%20%7B%5Cn%5Ctfont-size:%2016px;%5Cn%5Ctfont-weight:%20500;%5Cn%7D%5Cn.text-name%20%7B%5Cn%5Ctfont-weight:%20400;%5Cn%7D%5Cn.carousel-control.left%20%7B%5Cn%5Ctleft:%2018px;%5Cn%7D%5Cn.carousel-control.right%20%7B%5Cn%5Ctright:%2018px;%5Cn%7D%5Cn.dark-theme%20.carousel-control%20%7B%5Cn%5Ctbackground-color:%20rgba(0,%200,%200,%200.7);%5Cn%5Ctborder-color:%20rgba(0,0,0,.7);%5Cn%7D%5Cn.icon-additem,%20.icon-arrow-right-blue,%20.icon-audio,%20.icon-back,%20.icon-bigplay,%20.icon-bigplay-fill,%20.icon-bigstop,%20.icon-bigstop-fill,%20.icon-brokenpage,%20.icon-carousel-left,%20.icon-carousel-right,%20.icon-chat-gray,%20.icon-checkmark,%20.icon-checkmark-blue,%20.icon-checkmark-on,%20.icon-checkmark-white,%20.icon-checkmark-white-bold,%20.icon-clock,%20.icon-close,%20.icon-close-white,%20.icon-copy,%20.icon-default-generic,%20.icon-down,%20.icon-edit,%20.icon-female,%20.icon-female-white,%20.icon-first-gray,%20.icon-first-page,%20.icon-games-carousel-left,%20.icon-games-carousel-left.hover,%20.icon-games-carousel-right,%20.icon-games-carousel-right.hover,%20.icon-globe,%20.icon-grid,%20.icon-home,%20.icon-inactive,%20.icon-last-gray,%20.icon-last-page,%20.icon-left,%20.icon-left-gray,%20.icon-locked,%20.icon-logo-apple,%20.icon-logo-win,%20.icon-male,%20.icon-male-white,%20.icon-menu,%20.icon-menu-black,%20.icon-minus,%20.icon-more,%20.icon-more-gray-vertical,%20.icon-moreinfo,%20.icon-next,%20.icon-notifications,%20.icon-page,%20.icon-password-hide,%20.icon-password-hide-white,%20.icon-password-show,%20.icon-password-show-white,%20.icon-pastname,%20.icon-pause,%20.icon-pause-fill,%20.icon-play,%20.icon-playgame,%20.icon-plus,%20.icon-regenerate,%20.icon-right,%20.icon-right-gray,%20.icon-sandglass,%20.icon-search,%20.icon-settings,%20.icon-slideshow,%20.icon-sorting,%20.icon-trash-bin,%20.icon-unlocked,%20.icon-up,%20.icon-viewdetails%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/1b774fb07503ad2ac65367a89cc4772d-generic_01312019.svg%5C%22);%5Cn%5Ctbackground-repeat:%20no-repeat;%5Cn%5Ctbackground-size:%20200%25%20auto;%5Cn%5Ctwidth:%2028px;%5Cn%5Ctheight:%2028px;%5Cn%5Ctdisplay:%20inline-block;%5Cn%5Ctvertical-align:%20middle;%5Cn%7D%5Cn.icon-carousel-right%20%7B%5Cn%5Ctbackground-position:%200%20-896px;%5Cn%7D%5Cn.icon-carousel-left%20%7B%5Cn%5Ctbackground-position:%200%20-924px;%5Cn%7D%5Cn.carousel-control%20.icon-carousel-left,%20.carousel-control%20.icon-carousel-right%20%7B%5Cn%5Ctmargin:%208px%20auto;%5Cn%7D%5Cn.dark-theme%20.icon-additem,%20.dark-theme%20.icon-arrow-right-blue,%20.dark-theme%20.icon-audio,%20.dark-theme%20.icon-back,%20.dark-theme%20.icon-bigplay,%20.dark-theme%20.icon-bigplay-fill,%20.dark-theme%20.icon-bigstop,%20.dark-theme%20.icon-bigstop-fill,%20.dark-theme%20.icon-brokenpage,%20.dark-theme%20.icon-carousel-left,%20.dark-theme%20.icon-carousel-right,%20.dark-theme%20.icon-chat-gray,%20.dark-theme%20.icon-checkmark,%20.dark-theme%20.icon-checkmark-blue,%20.dark-theme%20.icon-checkmark-on,%20.dark-theme%20.icon-checkmark-white,%20.dark-theme%20.icon-checkmark-white-bold,%20.dark-theme%20.icon-clock,%20.dark-theme%20.icon-close,%20.dark-theme%20.icon-close-white,%20.dark-theme%20.icon-copy,%20.dark-theme%20.icon-default-generic,%20.dark-theme%20.icon-down,%20.dark-theme%20.icon-edit,%20.dark-theme%20.icon-female,%20.dark-theme%20.icon-female-white,%20.dark-theme%20.icon-first-gray,%20.dark-theme%20.icon-first-page,%20.dark-theme%20.icon-games-carousel-left,%20.dark-theme%20.icon-games-carousel-right,%20.dark-theme%20.icon-globe,%20.dark-theme%20.icon-grid,%20.dark-theme%20.icon-home,%20.dark-theme%20.icon-inactive,%20.dark-theme%20.icon-last-gray,%20.dark-theme%20.icon-last-page,%20.dark-theme%20.icon-left,%20.dark-theme%20.icon-left-gray,%20.dark-theme%20.icon-locked,%20.dark-theme%20.icon-logo-apple,%20.dark-theme%20.icon-logo-win,%20.dark-theme%20.icon-male,%20.dark-theme%20.icon-male-white,%20.dark-theme%20.icon-menu,%20.dark-theme%20.icon-menu-black,%20.dark-theme%20.icon-minus,%20.dark-theme%20.icon-more,%20.dark-theme%20.icon-more-gray-vertical,%20.dark-theme%20.icon-moreinfo,%20.dark-theme%20.icon-next,%20.dark-theme%20.icon-notifications,%20.dark-theme%20.icon-page,%20.dark-theme%20.icon-password-hide,%20.dark-theme%20.icon-password-hide-white,%20.dark-theme%20.icon-password-show,%20.dark-theme%20.icon-password-show-white,%20.dark-theme%20.icon-pastname,%20.dark-theme%20.icon-pause,%20.dark-theme%20.icon-pause-fill,%20.dark-theme%20.icon-play,%20.dark-theme%20.icon-playgame,%20.dark-theme%20.icon-plus,%20.dark-theme%20.icon-regenerate,%20.dark-theme%20.icon-right,%20.dark-theme%20.icon-right-gray,%20.dark-theme%20.icon-sandglass,%20.dark-theme%20.icon-search,%20.dark-theme%20.icon-settings,%20.dark-theme%20.icon-slideshow,%20.dark-theme%20.icon-sorting,%20.dark-theme%20.icon-trash-bin,%20.dark-theme%20.icon-unlocked,%20.dark-theme%20.icon-up,%20.dark-theme%20.icon-viewdetails%20%7B%5Cn%5Ctbackground-image:%20url(%5C%22https://images.rbxcdn.com/2311ce00d7393592e4509c3582892462-generic_dark_11062018.svg%5C%22);%5Cn%7D%5Cn.sr-only%20%7B%5Cn%5Ctposition:%20absolute;%5Cn%5Ctwidth:%201px;%5Cn%5Ctheight:%201px;%5Cn%5Ctmargin:%20-1px;%5Cn%5Ctpadding:%200;%5Cn%5Ctoverflow:%20hidden;%5Cn%5Ctclip:%20rect(0px,%200px,%200px,%200px);%5Cn%5Ctborder:%200;%5Cn%7D%5Cn.carousel-inner%20.item%20%7B%5Cn%5Ct-webkit-transition:%20opacity%20.5s%20ease-in-out;%5Cn%5Ct-o-transition:%20opacity%20ease-in-out%20.5s;%5Cn%5Cttransition:%20opacity%20.5s%20ease-in-out;%5Cn%5Ctopacity:%200;%5Cn%5Cttop:%200px;%5Cn%5Ctleft:%200px;%5Cn%5Ctwidth:%20100%25;%5Cn%5Ctdisplay:%20block;%5Cn%5Ctposition:%20absolute;%5Cn%5Ctz-index:%200;%5Cn%5Cttransform:%20translateZ(0px);%5Cn%7D%5Cn.carousel-inner%20:first-of-type.item%20%7B%5Cn%5Ctposition:%20relative;%5Cn%7D%5Cn.carousel-inner%20%3E%20.active%20%7B%5Cn%5Ctopacity:%201;%5Cn%5Ctz-index:%203;%5Cn%7D%5Cnimg%20%7B%5Cn%5Ctvertical-align:%20middle;%5Cn%7D%5Cn.carousel%20.carousel-thumb%20%7B%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn.carousel%20.flex-video%20%7B%5Cn%5Ctposition:%20relative;%5Cn%5Ctpadding-top:%2025px;%5Cn%5Ctpadding-bottom:%2067.5%25;%5Cn%5Ctheight:%200px;%5Cn%5Ctoverflow:%20hidden;%5Cn%5Ctmargin:%200%20auto;%5Cn%5Cttext-align:%20center;%5Cn%7D%5Cn.carousel%20.flex-video.widescreen%20%7B%5Cn%5Ctpadding-bottom:%2052.25%25;%5Cn%7D%5Cn.game-main-content%20.game-thumb-container%20.video-play-icon%20%7B%5Cn%5Ctposition:%20absolute;%5Cn%5Cttop:%2020%25;%5Cn%5Ctleft:%2033%25;%5Cn%5Ctwidth:%2033%25;%5Cn%5Ctopacity:%200.7;%5Cn%7D%5Cn.game-main-content%20.game-thumb-container%20.video-thumb%20%7B%5Cn%5Ctmargin-top:%20-13.5%25;%5Cn%5Ctwidth:%20100%25;%5Cn%7D%5Cn%3C/style%3E%5Cn%3C/head%3E%5Cn%3Cbody%20class=%5C%22rbx-body%20dark-theme%20gotham-font%5C%22%20id=%5C%22rbx-body%5C%22%20data-internal-page-name=%5C%22GameDetail%5C%22%20data-send-event-percentage=%5C%220%5C%22%20data-performance-relative-value=%5C%220.005%5C%22%3E%3Cdiv%20class=%5C%22wrap%20no-gutter-ads%20logged-in%5C%22%20id=%5C%22wrap%5C%22%20data-gutter-ads-enabled=%5C%22false%5C%22%3E%3Cdiv%20class=%5C%22container-main%5C%22%3E%3Cdiv%20class=%5C%22content%5C%22%3E%3Cdiv%20class=%5C%22row%20page-content%20inline-social%5C%22%20id=%5C%22game-detail-page%5C%22%20data-place-id=%5C%22606849621%5C%22%20data-post-game-loop-variation=%5C%22%5C%22%3E%3Cdiv%20class=%5C%22col-xs-12%20section-content%20game-main-content%20follow-button-enabled%5C%22%3E%3Cdiv%20class=%5C%22game-thumb-container%5C%22%3E%3Cdiv%20class=%5C%22carousel%20slide%5C%22%20id=%5C%22carousel-game-details%5C%22%20data-is-mobile=%5C%22false%5C%22%20data-is-video-autoplayed-on-ready=%5C%22true%5C%22%20data-ride=%5C%22carousel%5C%22%3E%3Cdiv%20class=%5C%22carousel-inner%5C%22%20role=%5C%22listbox%5C%22%3E%3Cdiv%20class=%5C%22item%5C%22%3E%3Cspan%3E%3Cimg%20class=%5C%22carousel-thumb%5C%22%20src=%5C%22https://t7.rbxcdn.com/124c32a3610169d48742dd546e7fab07%5C%22%3E%3C/span%3E%3C/div%3E%3Cdiv%20class=%5C%22item%5C%22%3E%3Cdiv%20class=%5C%22flex-video%20widescreen%5C%22%3E%3Cspan%3E%20%3Cimg%20class=%5C%22video-thumb%5C%22%20src=%5C%22//img.youtube.com/vi/jnHHpAuUex0/hqdefault.jpg%5C%22%3E%20%3C/span%3E%20%3Ca%20id=%5C%22playHiddenYouTubeVideo%5C%22%20data-link=%5C%22//www.youtube.com/watch?v=jnHHpAuUex0%5C%22%3E%20%3Cimg%20class=%5C%22video-play-icon%5C%22%20src=%5C%22https://images.rbxcdn.com/a2fc1728742685ea2cebd2815d1ebee9.png%5C%22%3E%20%3C/a%3E%3C/div%3E%3C/div%3E%3Cdiv%20class=%5C%22item%5C%22%3E%3Cspan%3E%3Cimg%20class=%5C%22carousel-thumb%5C%22%20src=%5C%22https://t5.rbxcdn.com/123726df6525f2a3441a66365714ea52%5C%22%3E%3C/span%3E%3C/div%3E%3Cdiv%20class=%5C%22item%5C%22%3E%3Cspan%3E%3Cimg%20class=%5C%22carousel-thumb%5C%22%20src=%5C%22%5C%22%3E%3C/span%3E%3C/div%3E%3Cdiv%20class=%5C%22item%5C%22%3E%3Cspan%3E%3Cimg%20class=%5C%22carousel-thumb%5C%22%20src=%5C%22%5C%22%3E%3C/span%3E%3C/div%3E%3Cdiv%20class=%5C%22item%20active%5C%22%3E%3Cspan%3E%3Cimg%20class=%5C%22carousel-thumb%5C%22%20src=%5C%22https://dummyimage.com/768x432/%5Bcolor%5D.png&text=%5Bcap%5D%5C%22%20alt=%5C%22%5Bcap%5D%5C%22%3E%3C/span%3E%3C/div%3E%3Cdiv%20class=%5C%22item%5C%22%3E%3Cspan%3E%3Cimg%20class=%5C%22carousel-thumb%5C%22%20src=%5C%22%5C%22%3E%3C/span%3E%3C/div%3E%3Cdiv%20class=%5C%22item%5C%22%3E%3Cspan%3E%3Cimg%20class=%5C%22carousel-thumb%5C%22%20src=%5C%22%5C%22%3E%3C/span%3E%3C/div%3E%3C/div%3E%3Ca%20class=%5C%22left%20carousel-control%5C%22%20role=%5C%22button%5C%22%20href=%5C%22#carousel-game-details%5C%22%20data-slide=%5C%22prev%5C%22%3E%20%3Cspan%20class=%5C%22icon-carousel-left%5C%22%20aria-hidden=%5C%22true%5C%22%3E%3C/span%3E%20%3Cspan%20class=%5C%22sr-only%5C%22%3EPrevious%3C/span%3E%20%3C/a%3E%20%3Ca%20class=%5C%22right%20carousel-control%5C%22%20role=%5C%22button%5C%22%20href=%5C%22#carousel-game-details%5C%22%20data-slide=%5C%22next%5C%22%3E%20%3Cspan%20class=%5C%22icon-carousel-right%5C%22%20aria-hidden=%5C%22true%5C%22%3E%3C/span%3E%20%3Cspan%20class=%5C%22sr-only%5C%22%3ENext%3C/span%3E%20%3C/a%3E%3C/div%3E%3C/div%3E%3Cdiv%20class=%5C%22game-calls-to-action%5C%22%3E%3Cdiv%20class=%5C%22game-title-container%5C%22%3E%3Ch1%20class=%5C%22game-name%5C%22%3E%5Bgame%5D%3C/h1%3E%3Cdiv%20class=%5C%22game-creator%5C%22%3E%3Cspan%20class=%5C%22text-label%5C%22%3EBy%3C/span%3E%20%3Ca%20class=%5C%22text-name%5C%22%20href=%5C%22javascript:;%5C%22%3E%5Bauthor%5D%3C/a%3E%3C/div%3E%3C/div%3E%3Cdiv%20class=%5C%22game-buttons-container%5C%22%3E%3Cdiv%20class=%5C%22border-top%20border-bottom%20game-play-buttons%5C%22%20data-autoplay=%5C%22false%5C%22%3E%3Cdiv%20class=%5C%22VisitButton%20VisitButtonPlayGLI%5C%22%20id=%5C%22MultiplayerVisitButton%5C%22%20placeid=%5C%22606849621%5C%22%20data-action=%5C%22play%5C%22%20data-is-membership-level-ok=%5C%22true%5C%22%20data-user-id=%5C%22110349441%5C%22%20data-universe-id=%5C%22245662005%5C%22%20data-originator-type=%5C%22%5C%22%20data-originator-id=%5C%22%5C%22%3E%3Cbutton%20onclick=%5C%22update()%5C%22%3ENew%20Game%3C/button%3E%3C/div%3E%3Cscript%3ERoblox=Roblox%7C%7C%7B%7D;Roblox.BCUpsellModal=function()%7Bvar%20resources=%7Btitle:%5C%22Builders%20Club%20Only%5C%22,body:%5C%22This%20is%20a%20premium%20item%20only%20available%20to%20our%20Builders%20Club%20members.%5C%22,accept:%5C%22Upgrade%20Now%5C%22,decline:%5C%22Cancel%5C%22%7D;var%20open=function()%7Bvar%20options=%7BtitleText:resources.title,bodyContent:resources.body,footerText:%5C%22%5C%22,acceptText:resources.accept,declineText:resources.decline,acceptColor:Roblox.GenericConfirmation.green,onAccept:function()%7Bwindow.location.href=%5C%22https://web.roblox.com/premium/membership?ctx=bc-only-game%5C%22%7D,imageUrl:'https://images.rbxcdn.com/43ac54175f3f3cd403536fedd9170c10.png'%7D;Roblox.GenericConfirmation.open(options);%7D;return%7Bopen:open,Resources:resources%7D;%7D();%3C/script%3E%3Cscript%3E$(function()%7BRoblox.PlaceItemPurchase=new%20Roblox.ItemPurchase(function(obj)%7B$(%5C%22.PurchaseButton%5Bdata-item-id=%5C%22+obj.AssetID+%5C%22%5D%5C%22).each(function(index,htmlElem)%7B$(%5C%22#rbx-place-purchase-required%5C%22).hide();$(%5C%22#MultiplayerVisitButton%5C%22).show();%7D);%7D);if(%5C%22False%5C%22.toLowerCase()==%5C%22true%5C%22)%7B$(function()%7B$(%5C%22#rbx-place-purchase-required%5C%22).on(%5C%22click%5C%22,function(e)%7BRoblox.PlaceItemPurchase.openPurchaseVerificationView(this);return%20false;%7D);%7D);%7D%7D);%3C/script%3E%3C/div%3E%3C/div%3E%3Cul%20class=%5C%22favorite-follow-vote-share%5C%22%3E%3Cli%20class=%5C%22game-favorite-button-container%5C%22%3E%3Cdiv%20class=%5C%22tooltip-container%5C%22%20data-toggle=%5C%22tooltip%5C%22%20data-original-title=%5C%22Remove%20from%20Favorites%5C%22%3E%3Cdiv%20class=%5C%22favorite-button%5C%22%3E%3Ca%20id=%5C%22toggle-game-favorite%5C%22%20data-signin-url=%5C%22https://web.roblox.com/newlogin?returnUrl=%252Fgames%252F606849621%252FJailbreak-MAP-EXPANSION%252F%5C%22%20data-isguest=%5C%22False%5C%22%20data-assetid=%5C%22606849621%5C%22%20data-toggle-url=%5C%22/favorite/toggle%5C%22%3E%3Cdiv%20class=%5C%22icon-favorite%20favorited%5C%22%20id=%5C%22game-favorite-icon%5C%22%3E%3C/div%3E%3Cdiv%20class=%5C%22icon-label%5C%22%20id=%5C%22game-favorite-icon-label%5C%22%3EFavorited%3C/div%3E%3C/a%3E%3C/div%3E%3C/div%3E%3C/li%3E%3Cli%20class=%5C%22game-follow-button-container%5C%22%3E%3Cdiv%20class=%5C%22tooltip-container%5C%22%20data-toggle=%5C%22tooltip%5C%22%20data-original-title=%5C%22Unfollow%20Game%5C%22%3E%3Cdiv%20class=%5C%22follow-button%5C%22%3E%3Ca%20id=%5C%22toggle-game-follow%5C%22%20data-originator-id=%5C%22%5C%22%20data-universe-id=%5C%22245662005%5C%22%20data-user-id=%5C%22110349441%5C%22%20data-signin-url=%5C%22https://web.roblox.com/newlogin?returnUrl=%252Fgames%252F606849621%252FJailbreak-MAP-EXPANSION%252F%5C%22%20data-originator=%5C%22%5C%22%20data-is-guest=%5C%22false%5C%22%3E%3Cdiv%20class=%5C%22icon-follow-game%20followed%5C%22%20id=%5C%22game-follow-icon%5C%22%3E%3C/div%3E%3Cdiv%20class=%5C%22icon-label%5C%22%20id=%5C%22game-follow-icon-label%5C%22%3EFollowing%3C/div%3E%3C/a%3E%3C/div%3E%3C/div%3E%3C/li%3E%20%20%20%20%3Cli%20class=%5C%22voting-panel%20body%5C%22%20id=%5C%22voting-section%5C%22%20data-account-page-url=%5C%22https://web.roblox.com/my/account?confirmemail=1%5C%22%20data-register-url=%5C%22https://web.roblox.com/newlogin?returnUrl=%252Fgames%252Fvotingservice%252F606849621%5C%22%20data-vote-url=%5C%22%5C%22%20data-user-authenticated=%5C%22true%5C%22%20data-vote-modal=%5C%22PlayGame%5C%22%20data-total-down-votes=%5C%22388266%5C%22%20data-total-up-votes=%5C%222900321%5C%22%20data-target-id=%5C%22606849621%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22spinner%20spinner-sm%20loading%5C%22%3E%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22vote-summary%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22voting-details%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22users-vote%20has-voted%5C%22%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22upvote%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%5C%22icon-like%20selected%5C%22%3E%3C/span%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22vote-details%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22vote-container%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22vote-background%20has-votes%5C%22%3E%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22vote-percentage%5C%22%20style=%5C%22width:%2088%25;%5C%22%3E%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22vote-mask%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22segment%20seg-1%5C%22%3E%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22segment%20seg-2%5C%22%3E%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22segment%20seg-3%5C%22%3E%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22segment%20seg-4%5C%22%3E%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22vote-numbers%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22count-left%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20title=%5C%222900321%5C%22%20class=%5C%22vote-text%5C%22%20id=%5C%22vote-up-text%5C%22%3E%5Blikes%5D%3C/span%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22count-right%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20title=%5C%22388266%5C%22%20class=%5C%22vote-text%5C%22%20id=%5C%22vote-down-text%5C%22%3E%5Bdislikes%5D%3C/span%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%5C%22downvote%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%5C%22icon-dislike%20%5C%22%3E%3C/span%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%5Cn%20%20%20%20%3C/li%3E%5Cn%5Cn%3Cscript%3E%5Cn%20%20%20%20$(function%20()%20%7B%5Cn%20%20%20%20%20%20%20%20Roblox.Voting.Initialize();%5Cn%20%20%20%20%7D);%5Cn%3C/script%3E%5Cn%3Cli%20class=%5C%22social-media-share%5C%22%3E%3C/li%3E%3C/ul%3E%3C/div%3E%3C/div%3E%3C/div%3E%3C/div%3E%3C/div%3E%3C/div%3E%3C/div%3E%3C/body%3E%5Cn%3C/html%3E%5Cn%22,%22imports%22:%5B%22adjective%22%5D,%22canLink%22:false,%22isPrivate%22:false%7D</script> <script id="imported-generators" type="notjs">%5B%7B%22modelText%22:%22title%20=%20Random%20Adjective%20Generator%5Cnsubtitle%20=%20Simply%20gives%20you%20a%20random%20adjective%20each%20click.%5CnfontSize%20=%20230%5CnfontColor%20=%20black%5CnbuttonText%20=%20randomize%5CnnumberOfItems%20=%201%5CnitemSeperator%20=%20%3Cbr/%3E%5Cndescription%5Cn%5Ct%7Bimport:simple-gen-footer%7D%5Cn%5Ct$output%20=%20%3Cp%3E%5Bthis.joinItems(%5C%22%3C/p%3E%3Cp%3E%5C%22)%5D%3C/p%3E%20//%20%3C--%20don't%20remove%20this%20last%20line,%20it%20uses%20the%20special%20%5C%22$output%5C%22%20property%20to%20join%20and%20format%20your%20description%20as%20HTML%20paragraphs%20:)%5Cn%5Cn%5Cn$output%20=%20%5Badjective%5D%5Cn%5Cn//%20Credit%20goes%20to:%20http://www.momswhothink.com/reading/adjectives-that-start-with-a-to-z-list.html%5Cn//%20There%20are%20some%20great%20adjective%20lists%20categorised%20by%20topic%20here:%20http://www.momswhothink.com/reading/list-of-adjectives.html%5Cn%5Cnadjective%5Cn%5Ctaback%5Cn%5Ctabaft%5Cn%5Ctabandoned%5Cn%5Ctabashed%5Cn%5Ctaberrant%5Cn%5Ctabhorrent%5Cn%5Ctabiding%5Cn%5Ctabject%5Cn%5Ctablaze%5Cn%5Ctable%5Cn%5Ctabnormal%5Cn%5Ctaboard%5Cn%5Ctaboriginal%5Cn%5Ctabortive%5Cn%5Ctabounding%5Cn%5Ctabrasive%5Cn%5Ctabrupt%5Cn%5Ctabsent%5Cn%5Ctabsolute%5Cn%5Ctabsorbed%5Cn%5Ctabsorbing%5Cn%5Ctabstracted%5Cn%5Ctabsurd%5Cn%5Ctabundant%5Cn%5Ctabusive%5Cn%5Ctacademic%5Cn%5Ctacceptable%5Cn%5Ctaccessible%5Cn%5Ctaccidental%5Cn%5Ctacclaimed%5Cn%5Ctaccomplished%5Cn%5Ctaccurate%5Cn%5Ctaching%5Cn%5Ctacid%5Cn%5Ctacidic%5Cn%5Ctacoustic%5Cn%5Ctacrid%5Cn%5Ctacrobatic%5Cn%5Ctactive%5Cn%5Ctactual%5Cn%5Ctactually%5Cn%5Ctad%20hoc%5Cn%5Ctadamant%5Cn%5Ctadaptable%5Cn%5Ctaddicted%5Cn%5Ctadept%5Cn%5Ctadhesive%5Cn%5Ctadjoining%5Cn%5Ctadmirable%5Cn%5Ctadmired%5Cn%5Ctadolescent%5Cn%5Ctadorable%5Cn%5Ctadored%5Cn%5Ctadvanced%5Cn%5Ctadventurous%5Cn%5Ctaffectionate%5Cn%5Ctafraid%5Cn%5Ctaged%5Cn%5Ctaggravating%5Cn%5Ctaggressive%5Cn%5Ctagile%5Cn%5Ctagitated%5Cn%5Ctagonizing%5Cn%5Ctagreeable%5Cn%5Ctahead%5Cn%5Ctajar%5Cn%5Ctalarmed%5Cn%5Ctalarming%5Cn%5Ctalcoholic%5Cn%5Ctalert%5Cn%5Ctalienated%5Cn%5Ctalike%5Cn%5Ctalive%5Cn%5Ctall%5Cn%5Ctalleged%5Cn%5Ctalluring%5Cn%5Ctaloof%5Cn%5Ctaltruistic%5Cn%5Ctamazing%5Cn%5Ctambiguous%5Cn%5Ctambitious%5Cn%5Ctamiable%5Cn%5Ctample%5Cn%5Ctamuck%5Cn%5Ctamused%5Cn%5Ctamusing%5Cn%5Ctanchored%5Cn%5Ctancient%5Cn%5Ctancient%5Cn%5Ctangelic%5Cn%5Ctangry%5Cn%5Ctangry%5Cn%5Ctanguished%5Cn%5Ctanimated%5Cn%5Ctannoyed%5Cn%5Ctannoying%5Cn%5Ctannual%5Cn%5Ctanother%5Cn%5Ctantique%5Cn%5Ctantsy%5Cn%5Ctanxious%5Cn%5Ctany%5Cn%5Ctapathetic%5Cn%5Ctappetizing%5Cn%5Ctapprehensive%5Cn%5Ctappropriate%5Cn%5Ctapt%5Cn%5Ctaquatic%5Cn%5Ctarctic%5Cn%5Ctarid%5Cn%5Ctaromatic%5Cn%5Ctarrogant%5Cn%5Ctartistic%5Cn%5Ctashamed%5Cn%5Ctaspiring%5Cn%5Ctassorted%5Cn%5Ctassured%5Cn%5Ctastonishing%5Cn%5Ctathletic%5Cn%5Ctattached%5Cn%5Ctattentive%5Cn%5Ctattractive%5Cn%5Ctauspicious%5Cn%5Ctaustere%5Cn%5Ctauthentic%5Cn%5Ctauthorized%5Cn%5Ctautomatic%5Cn%5Ctavailable%5Cn%5Ctavaricious%5Cn%5Ctaverage%5Cn%5Ctawake%5Cn%5Ctaware%5Cn%5Ctawesome%5Cn%5Ctawful%5Cn%5Ctawkward%5Cn%5Ctaxiomatic%5Cn%5Ctbabyish%5Cn%5Ctback%5Cn%5Ctbad%5Cn%5Ctbaggy%5Cn%5Ctbarbarous%5Cn%5Ctbare%5Cn%5Ctbarren%5Cn%5Ctbashful%5Cn%5Ctbasic%5Cn%5Ctbatty%5Cn%5Ctbawdy%5Cn%5Ctbeautiful%5Cn%5Ctbeefy%5Cn%5Ctbefitting%5Cn%5Ctbelated%5Cn%5Ctbelligerent%5Cn%5Ctbeloved%5Cn%5Ctbeneficial%5Cn%5Ctbent%5Cn%5Ctberserk%5Cn%5Ctbest%5Cn%5Ctbetter%5Cn%5Ctbewildered%5Cn%5Ctbewitched%5Cn%5Ctbig%5Cn%5Ctbig-hearted%5Cn%5Ctbillowy%5Cn%5Ctbiodegradable%5Cn%5Ctbite-sized%5Cn%5Ctbiting%5Cn%5Ctbitter%5Cn%5Ctbizarre%5Cn%5Ctblack%5Cn%5Ctblack-and-white%5Cn%5Ctbland%5Cn%5Ctblank%5Cn%5Ctblaring%5Cn%5Ctbleak%5Cn%5Ctblind%5Cn%5Ctblissful%5Cn%5Ctblond%5Cn%5Ctbloody%5Cn%5Ctblue%5Cn%5Ctblue-eyed%5Cn%5Ctblushing%5Cn%5Ctbogus%5Cn%5Ctboiling%5Cn%5Ctbold%5Cn%5Ctbony%5Cn%5Ctboorish%5Cn%5Ctbored%5Cn%5Ctboring%5Cn%5Ctbossy%5Cn%5Ctboth%5Cn%5Ctbouncy%5Cn%5Ctboundless%5Cn%5Ctbountiful%5Cn%5Ctbowed%5Cn%5Ctbrainy%5Cn%5Ctbrash%5Cn%5Ctbrave%5Cn%5Ctbrawny%5Cn%5Ctbreakable%5Cn%5Ctbreezy%5Cn%5Ctbrief%5Cn%5Ctbright%5Cn%5Ctbrilliant%5Cn%5Ctbrisk%5Cn%5Ctbroad%5Cn%5Ctbroken%5Cn%5Ctbronze%5Cn%5Ctbrown%5Cn%5Ctbruised%5Cn%5Ctbubbly%5Cn%5Ctbulky%5Cn%5Ctbumpy%5Cn%5Ctbuoyant%5Cn%5Ctburdensome%5Cn%5Ctburly%5Cn%5Ctbustling%5Cn%5Ctbusy%5Cn%5Ctbuttery%5Cn%5Ctbuzzing%5Cn%5Ctcagey%5Cn%5Ctcalculating%5Cn%5Ctcallous%5Cn%5Ctcalm%5Cn%5Ctcandid%5Cn%5Ctcanine%5Cn%5Ctcapable%5Cn%5Ctcapital%5Cn%5Ctcapricious%5Cn%5Ctcarefree%5Cn%5Ctcareful%5Cn%5Ctcareless%5Cn%5Ctcaring%5Cn%5Ctcautious%5Cn%5Ctcavernous%5Cn%5Ctceaseless%5Cn%5Ctcelebrated%5Cn%5Ctcertain%5Cn%5Ctchangeable%5Cn%5Ctcharming%5Cn%5Ctcheap%5Cn%5Ctcheeky%5Cn%5Ctcheerful%5Cn%5Ctcheery%5Cn%5Ctchemical%5Cn%5Ctchief%5Cn%5Ctchildlike%5Cn%5Ctchilly%5Cn%5Ctchivalrous%5Cn%5Ctchubby%5Cn%5Ctchunky%5Cn%5Ctcircular%5Cn%5Ctclammy%5Cn%5Ctclassic%5Cn%5Ctclassy%5Cn%5Ctclean%5Cn%5Ctclear%5Cn%5Ctclear-cut%5Cn%5Ctclever%5Cn%5Ctcloistered%5Cn%5Ctclose%5Cn%5Ctclosed%5Cn%5Ctcloudy%5Cn%5Ctclueless%5Cn%5Ctclumsy%5Cn%5Ctcluttered%5Cn%5Ctcoarse%5Cn%5Ctcoherent%5Cn%5Ctcold%5Cn%5Ctcolorful%5Cn%5Ctcolorless%5Cn%5Ctcolossal%5Cn%5Ctcolossal%5Cn%5Ctcombative%5Cn%5Ctcomfortable%5Cn%5Ctcommon%5Cn%5Ctcompassionate%5Cn%5Ctcompetent%5Cn%5Ctcomplete%5Cn%5Ctcomplex%5Cn%5Ctcomplicated%5Cn%5Ctcomposed%5Cn%5Ctconcerned%5Cn%5Ctconcrete%5Cn%5Ctcondemned%5Cn%5Ctcondescending%5Cn%5Ctconfused%5Cn%5Ctconscious%5Cn%5Ctconsiderate%5Cn%5Ctconstant%5Cn%5Ctcontemplative%5Cn%5Ctcontent%5Cn%5Ctconventional%5Cn%5Ctconvincing%5Cn%5Ctconvoluted%5Cn%5Ctcooing%5Cn%5Ctcooked%5Cn%5Ctcool%5Cn%5Ctcooperative%5Cn%5Ctcoordinated%5Cn%5Ctcorny%5Cn%5Ctcorrupt%5Cn%5Ctcostly%5Cn%5Ctcourageous%5Cn%5Ctcourteous%5Cn%5Ctcowardly%5Cn%5Ctcrabby%5Cn%5Ctcrafty%5Cn%5Ctcraven%5Cn%5Ctcrazy%5Cn%5Ctcreamy%5Cn%5Ctcreative%5Cn%5Ctcreepy%5Cn%5Ctcriminal%5Cn%5Ctcrisp%5Cn%5Ctcritical%5Cn%5Ctcrooked%5Cn%5Ctcrowded%5Cn%5Ctcruel%5Cn%5Ctcrushing%5Cn%5Ctcuddly%5Cn%5Ctcultivated%5Cn%5Ctcultured%5Cn%5Ctcumbersome%5Cn%5Ctcurious%5Cn%5Ctcurly%5Cn%5Ctcurved%5Cn%5Ctcurvy%5Cn%5Ctcut%5Cn%5Ctcute%5Cn%5Ctcylindrical%5Cn%5Ctcynical%5Cn%5Ctdaffy%5Cn%5Ctdaily%5Cn%5Ctdamaged%5Cn%5Ctdamaging%5Cn%5Ctdamp%5Cn%5Ctdangerous%5Cn%5Ctdapper%5Cn%5Ctdapper%5Cn%5Ctdaring%5Cn%5Ctdark%5Cn%5Ctdarling%5Cn%5Ctdashing%5Cn%5Ctdazzling%5Cn%5Ctdead%5Cn%5Ctdeadly%5Cn%5Ctdeadpan%5Cn%5Ctdeafening%5Cn%5Ctdear%5Cn%5Ctdearest%5Cn%5Ctdebonair%5Cn%5Ctdecayed%5Cn%5Ctdeceitful%5Cn%5Ctdecent%5Cn%5Ctdecimal%5Cn%5Ctdecisive%5Cn%5Ctdecorous%5Cn%5Ctdeep%5Cn%5Ctdeeply%5Cn%5Ctdefeated%5Cn%5Ctdefective%5Cn%5Ctdefenseless%5Cn%5Ctdefensive%5Cn%5Ctdefiant%5Cn%5Ctdeficient%5Cn%5Ctdefinite%5Cn%5Ctdelayed%5Cn%5Ctdelectable%5Cn%5Ctdelicate%5Cn%5Ctdelicious%5Cn%5Ctdelightful%5Cn%5Ctdelirious%5Cn%5Ctdemanding%5Cn%5Ctdemonic%5Cn%5Ctdense%5Cn%5Ctdental%5Cn%5Ctdependable%5Cn%5Ctdependent%5Cn%5Ctdepraved%5Cn%5Ctdepressed%5Cn%5Ctderanged%5Cn%5Ctdescriptive%5Cn%5Ctdeserted%5Cn%5Ctdespicable%5Cn%5Ctdetailed%5Cn%5Ctdetermined%5Cn%5Ctdevilish%5Cn%5Ctdevoted%5Cn%5Ctdidactic%5Cn%5Ctdifferent%5Cn%5Ctdifficult%5Cn%5Ctdigital%5Cn%5Ctdilapidated%5Cn%5Ctdiligent%5Cn%5Ctdim%5Cn%5Ctdiminutive%5Cn%5Ctdimpled%5Cn%5Ctdimwitted%5Cn%5Ctdirect%5Cn%5Ctdireful%5Cn%5Ctdirty%5Cn%5Ctdisagreeable%5Cn%5Ctdisastrous%5Cn%5Ctdiscreet%5Cn%5Ctdiscrete%5Cn%5Ctdisfigured%5Cn%5Ctdisguised%5Cn%5Ctdisgusted%5Cn%5Ctdisgusting%5Cn%5Ctdishonest%5Cn%5Ctdisillusioned%5Cn%5Ctdisloyal%5Cn%5Ctdismal%5Cn%5Ctdispensable%5Cn%5Ctdistant%5Cn%5Ctdistinct%5Cn%5Ctdistorted%5Cn%5Ctdistraught%5Cn%5Ctdistressed%5Cn%5Ctdisturbed%5Cn%5Ctdivergent%5Cn%5Ctdizzy%5Cn%5Ctdomineering%5Cn%5Ctdopey%5Cn%5Ctdoting%5Cn%5Ctdouble%5Cn%5Ctdoubtful%5Cn%5Ctdownright%5Cn%5Ctdrab%5Cn%5Ctdraconian%5Cn%5Ctdrafty%5Cn%5Ctdrained%5Cn%5Ctdramatic%5Cn%5Ctdreary%5Cn%5Ctdroopy%5Cn%5Ctdrunk%5Cn%5Ctdry%5Cn%5Ctdual%5Cn%5Ctdull%5Cn%5Ctdull%5Cn%5Ctdusty%5Cn%5Ctdutiful%5Cn%5Ctdynamic%5Cn%5Ctdysfunctional%5Cn%5Cteach%5Cn%5Cteager%5Cn%5Ctearly%5Cn%5Ctearnest%5Cn%5Ctearsplitting%5Cn%5Ctearthy%5Cn%5Cteasy%5Cn%5Cteasy-going%5Cn%5Cteatable%5Cn%5Cteconomic%5Cn%5Ctecstatic%5Cn%5Ctedible%5Cn%5Cteducated%5Cn%5Ctefficacious%5Cn%5Ctefficient%5Cn%5Cteight%5Cn%5Ctelaborate%5Cn%5Ctelastic%5Cn%5Ctelated%5Cn%5Ctelderly%5Cn%5Ctelectric%5Cn%5Ctelegant%5Cn%5Ctelementary%5Cn%5Ctelfin%5Cn%5Ctelite%5Cn%5Ctelliptical%5Cn%5Ctemaciated%5Cn%5Ctembarrassed%5Cn%5Ctembellished%5Cn%5Cteminent%5Cn%5Ctemotional%5Cn%5Ctempty%5Cn%5Ctenchanted%5Cn%5Ctenchanting%5Cn%5Ctencouraging%5Cn%5Ctendurable%5Cn%5Ctenergetic%5Cn%5Ctenlightened%5Cn%5Ctenormous%5Cn%5Ctenraged%5Cn%5Ctentertaining%5Cn%5Ctenthusiastic%5Cn%5Ctentire%5Cn%5Ctenvious%5Cn%5Ctenvious%5Cn%5Ctequable%5Cn%5Ctequal%5Cn%5Ctequatorial%5Cn%5Cterect%5Cn%5Cterratic%5Cn%5Ctessential%5Cn%5Ctesteemed%5Cn%5Ctethereal%5Cn%5Ctethical%5Cn%5Cteuphoric%5Cn%5Ctevanescent%5Cn%5Ctevasive%5Cn%5Cteven%5Cn%5Ctevergreen%5Cn%5Cteverlasting%5Cn%5Ctevery%5Cn%5Ctevil%5Cn%5Ctexalted%5Cn%5Ctexasperated%5Cn%5Ctexcellent%5Cn%5Ctexcitable%5Cn%5Ctexcited%5Cn%5Ctexciting%5Cn%5Ctexclusive%5Cn%5Ctexemplary%5Cn%5Ctexhausted%5Cn%5Ctexhilarated%5Cn%5Ctexotic%5Cn%5Ctexpensive%5Cn%5Ctexperienced%5Cn%5Ctexpert%5Cn%5Ctextensive%5Cn%5Ctextra-large%5Cn%5Ctextraneous%5Cn%5Ctextra-small%5Cn%5Ctextroverted%5Cn%5Ctexuberant%5Cn%5Ctexultant%5Cn%5Ctfabulous%5Cn%5Ctfaded%5Cn%5Ctfailing%5Cn%5Ctfaint%5Cn%5Ctfair%5Cn%5Ctfaithful%5Cn%5Ctfake%5Cn%5Ctfallacious%5Cn%5Ctfalse%5Cn%5Ctfamiliar%5Cn%5Ctfamous%5Cn%5Ctfanatical%5Cn%5Ctfancy%5Cn%5Ctfantastic%5Cn%5Ctfar%5Cn%5Ctfaraway%5Cn%5Ctfar-flung%5Cn%5Ctfar-off%5Cn%5Ctfascinated%5Cn%5Ctfast%5Cn%5Ctfat%5Cn%5Ctfatal%5Cn%5Ctfatherly%5Cn%5Ctfaulty%5Cn%5Ctfavorable%5Cn%5Ctfavorite%5Cn%5Ctfearful%5Cn%5Ctfearless%5Cn%5Ctfeeble%5Cn%5Ctfeigned%5Cn%5Ctfeisty%5Cn%5Ctfeline%5Cn%5Ctfemale%5Cn%5Ctfeminine%5Cn%5Ctfertile%5Cn%5Ctfestive%5Cn%5Ctfew%5Cn%5Ctfickle%5Cn%5Ctfierce%5Cn%5Ctfilthy%5Cn%5Ctfine%5Cn%5Ctfinicky%5Cn%5Ctfinished%5Cn%5Ctfirm%5Cn%5Ctfirst%5Cn%5Ctfirsthand%5Cn%5Ctfitting%5Cn%5Ctfive%5Cn%5Ctfixed%5Cn%5Ctflagrant%5Cn%5Ctflaky%5Cn%5Ctflamboyant%5Cn%5Ctflashy%5Cn%5Ctflat%5Cn%5Ctflawed%5Cn%5Ctflawless%5Cn%5Ctflickering%5Cn%5Ctflimsy%5Cn%5Ctflippant%5Cn%5Ctfloppy%5Cn%5Ctflowery%5Cn%5Ctfluffy%5Cn%5Ctfluid%5Cn%5Ctflustered%5Cn%5Ctfluttering%5Cn%5Ctfoamy%5Cn%5Ctfocused%5Cn%5Ctfond%5Cn%5Ctfoolhardy%5Cn%5Ctfoolish%5Cn%5Ctforceful%5Cn%5Ctforegoing%5Cn%5Ctforgetful%5Cn%5Ctforked%5Cn%5Ctformal%5Cn%5Ctforsaken%5Cn%5Ctforthright%5Cn%5Ctfortunate%5Cn%5Ctfour%5Cn%5Ctfragile%5Cn%5Ctfragrant%5Cn%5Ctfrail%5Cn%5Ctfrank%5Cn%5Ctfrantic%5Cn%5Ctfrayed%5Cn%5Ctfree%5Cn%5Ctfreezing%5Cn%5CtFrench%5Cn%5Ctfrequent%5Cn%5Ctfresh%5Cn%5Ctfretful%5Cn%5Ctfriendly%5Cn%5Ctfrightened%5Cn%5Ctfrightening%5Cn%5Ctfrigid%5Cn%5Ctfrilly%5Cn%5Ctfrivolous%5Cn%5Ctfrizzy%5Cn%5Ctfront%5Cn%5Ctfrosty%5Cn%5Ctfrothy%5Cn%5Ctfrozen%5Cn%5Ctfrugal%5Cn%5Ctfruitful%5Cn%5Ctfrustrating%5Cn%5Ctfull%5Cn%5Ctfumbling%5Cn%5Ctfumbling%5Cn%5Ctfunctional%5Cn%5Ctfunny%5Cn%5Ctfurry%5Cn%5Ctfurtive%5Cn%5Ctfussy%5Cn%5Ctfuture%5Cn%5Ctfuturistic%5Cn%5Ctfuzzy%5Cn%5Ctgabby%5Cn%5Ctgainful%5Cn%5Ctgamy%5Cn%5Ctgaping%5Cn%5Ctgargantuan%5Cn%5Ctgarrulous%5Cn%5Ctgaseous%5Cn%5Ctgaudy%5Cn%5Ctgeneral%5Cn%5Ctgeneral%5Cn%5Ctgenerous%5Cn%5Ctgentle%5Cn%5Ctgenuine%5Cn%5Ctghastly%5Cn%5Ctgiant%5Cn%5Ctgiddy%5Cn%5Ctgifted%5Cn%5Ctgigantic%5Cn%5Ctgiving%5Cn%5Ctglamorous%5Cn%5Ctglaring%5Cn%5Ctglass%5Cn%5Ctgleaming%5Cn%5Ctgleeful%5Cn%5Ctglib%5Cn%5Ctglistening%5Cn%5Ctglittering%5Cn%5Ctgloomy%5Cn%5Ctglorious%5Cn%5Ctglossy%5Cn%5Ctglum%5Cn%5Ctgodly%5Cn%5Ctgolden%5Cn%5Ctgood%5Cn%5Ctgood-natured%5Cn%5Ctgoofy%5Cn%5Ctgorgeous%5Cn%5Ctgraceful%5Cn%5Ctgracious%5Cn%5Ctgrand%5Cn%5Ctgrandiose%5Cn%5Ctgrandiose%5Cn%5Ctgranular%5Cn%5Ctgrateful%5Cn%5Ctgratis%5Cn%5Ctgrave%5Cn%5Ctgray%5Cn%5Ctgreasy%5Cn%5Ctgreat%5Cn%5Ctgreedy%5Cn%5Ctgreen%5Cn%5Ctgregarious%5Cn%5Ctgrey%5Cn%5Ctgrieving%5Cn%5Ctgrim%5Cn%5Ctgrimy%5Cn%5Ctgripping%5Cn%5Ctgrizzled%5Cn%5Ctgroovy%5Cn%5Ctgross%5Cn%5Ctgrotesque%5Cn%5Ctgrouchy%5Cn%5Ctgrounded%5Cn%5Ctgrowing%5Cn%5Ctgrowling%5Cn%5Ctgrown%5Cn%5Ctgrubby%5Cn%5Ctgruesome%5Cn%5Ctgrumpy%5Cn%5Ctguarded%5Cn%5Ctguiltless%5Cn%5Ctguilty%5Cn%5Ctgullible%5Cn%5Ctgummy%5Cn%5Ctgusty%5Cn%5Ctguttural%5Cn%5Cthabitual%5Cn%5Cthairy%5Cn%5Cthalf%5Cn%5Cthalf%5Cn%5Cthallowed%5Cn%5Cthalting%5Cn%5Cthandmade%5Cn%5Cthandsome%5Cn%5Cthandsomely%5Cn%5Cthandy%5Cn%5Cthanging%5Cn%5Cthapless%5Cn%5Cthappy%5Cn%5Cthappy-go-lucky%5Cn%5Cthard%5Cn%5Cthard-to-find%5Cn%5Ctharebrained%5Cn%5Ctharmful%5Cn%5Ctharmless%5Cn%5Ctharmonious%5Cn%5Ctharsh%5Cn%5Cthasty%5Cn%5Cthateful%5Cn%5Cthaunting%5Cn%5Ctheady%5Cn%5Cthealthy%5Cn%5Ctheartbreaking%5Cn%5Ctheartfelt%5Cn%5Cthearty%5Cn%5Ctheavenly%5Cn%5Ctheavy%5Cn%5Cthefty%5Cn%5Cthellish%5Cn%5Cthelpful%5Cn%5Cthelpless%5Cn%5Cthesitant%5Cn%5Cthidden%5Cn%5Cthideous%5Cn%5Cthigh%5Cn%5Cthighfalutin%5Cn%5Cthigh-level%5Cn%5Cthigh-pitched%5Cn%5Cthilarious%5Cn%5Cthissing%5Cn%5Cthistorical%5Cn%5Cthoarse%5Cn%5Ctholistic%5Cn%5Cthollow%5Cn%5Cthomeless%5Cn%5Cthomely%5Cn%5Cthonest%5Cn%5Cthonorable%5Cn%5Cthonored%5Cn%5Cthopeful%5Cn%5Cthorrible%5Cn%5Cthorrific%5Cn%5Cthospitable%5Cn%5Cthot%5Cn%5Cthuge%5Cn%5Cthulking%5Cn%5Cthumble%5Cn%5Cthumdrum%5Cn%5Cthumiliating%5Cn%5Cthumming%5Cn%5Cthumongous%5Cn%5Cthumorous%5Cn%5Cthungry%5Cn%5Cthurried%5Cn%5Cthurt%5Cn%5Cthurtful%5Cn%5Cthushed%5Cn%5Cthusky%5Cn%5Cthypnotic%5Cn%5Cthysterical%5Cn%5Cticky%5Cn%5Cticy%5Cn%5Ctideal%5Cn%5Ctideal%5Cn%5Ctidealistic%5Cn%5Ctidentical%5Cn%5Ctidiotic%5Cn%5Ctidle%5Cn%5Ctidolized%5Cn%5Ctignorant%5Cn%5Ctill%5Cn%5Ctillegal%5Cn%5Ctill-fated%5Cn%5Ctill-informed%5Cn%5Ctilliterate%5Cn%5Ctillustrious%5Cn%5Ctimaginary%5Cn%5Ctimaginative%5Cn%5Ctimmaculate%5Cn%5Ctimmaterial%5Cn%5Ctimmediate%5Cn%5Ctimmense%5Cn%5Ctimminent%5Cn%5Ctimpartial%5Cn%5Ctimpassioned%5Cn%5Ctimpeccable%5Cn%5Ctimperfect%5Cn%5Ctimperturbable%5Cn%5Ctimpish%5Cn%5Ctimpolite%5Cn%5Ctimportant%5Cn%5Ctimported%5Cn%5Ctimpossible%5Cn%5Ctimpractical%5Cn%5Ctimpressionable%5Cn%5Ctimpressive%5Cn%5Ctimprobable%5Cn%5Ctimpure%5Cn%5Ctinborn%5Cn%5Ctincandescent%5Cn%5Ctincomparable%5Cn%5Ctincompatible%5Cn%5Ctincompetent%5Cn%5Ctincomplete%5Cn%5Ctinconclusive%5Cn%5Ctinconsequential%5Cn%5Ctincredible%5Cn%5Ctindelible%5Cn%5Ctindolent%5Cn%5Ctindustrious%5Cn%5Ctinexpensive%5Cn%5Ctinexperienced%5Cn%5Ctinfamous%5Cn%5Ctinfantile%5Cn%5Ctinfatuated%5Cn%5Ctinferior%5Cn%5Ctinfinite%5Cn%5Ctinformal%5Cn%5Ctinnate%5Cn%5Ctinnocent%5Cn%5Ctinquisitive%5Cn%5Ctinsecure%5Cn%5Ctinsidious%5Cn%5Ctinsignificant%5Cn%5Ctinsistent%5Cn%5Ctinstinctive%5Cn%5Ctinstructive%5Cn%5Ctinsubstantial%5Cn%5Ctintelligent%5Cn%5Ctintent%5Cn%5Ctintentional%5Cn%5Ctinteresting%5Cn%5Ctinternal%5Cn%5Ctinternational%5Cn%5Ctintrepid%5Cn%5Ctintrigued%5Cn%5Ctinvincible%5Cn%5Ctirate%5Cn%5Ctironclad%5Cn%5Ctirresponsible%5Cn%5Ctirritable%5Cn%5Ctirritating%5Cn%5Ctitchy%5Cn%5Ctjaded%5Cn%5Ctjagged%5Cn%5Ctjam-packed%5Cn%5Ctjaunty%5Cn%5Ctjazzy%5Cn%5Ctjealous%5Cn%5Ctjittery%5Cn%5Ctjobless%5Cn%5Ctjoint%5Cn%5Ctjolly%5Cn%5Ctjovial%5Cn%5Ctjoyful%5Cn%5Ctjoyous%5Cn%5Ctjubilant%5Cn%5Ctjudicious%5Cn%5Ctjuicy%5Cn%5Ctjumbled%5Cn%5Ctjumbo%5Cn%5Ctjumpy%5Cn%5Ctjumpy%5Cn%5Ctjunior%5Cn%5Ctjuvenile%5Cn%5Ctkaleidoscopic%5Cn%5Ctkaput%5Cn%5Ctkeen%5Cn%5Ctkey%5Cn%5Ctkind%5Cn%5Ctkindhearted%5Cn%5Ctkindly%5Cn%5Ctklutzy%5Cn%5Ctknobby%5Cn%5Ctknotty%5Cn%5Ctknowing%5Cn%5Ctknowledgeable%5Cn%5Ctknown%5Cn%5Ctkooky%5Cn%5Ctkosher%5Cn%5Ctlabored%5Cn%5Ctlackadaisical%5Cn%5Ctlacking%5Cn%5Ctlame%5Cn%5Ctlame%5Cn%5Ctlamentable%5Cn%5Ctlanguid%5Cn%5Ctlanky%5Cn%5Ctlarge%5Cn%5Ctlast%5Cn%5Ctlasting%5Cn%5Ctlate%5Cn%5Ctlaughable%5Cn%5Ctlavish%5Cn%5Ctlawful%5Cn%5Ctlazy%5Cn%5Ctleading%5Cn%5Ctleafy%5Cn%5Ctlean%5Cn%5Ctlearned%5Cn%5Ctleft%5Cn%5Ctlegal%5Cn%5Ctlegitimate%5Cn%5Ctlethal%5Cn%5Ctlevel%5Cn%5Ctlewd%5Cn%5Ctlight%5Cn%5Ctlighthearted%5Cn%5Ctlikable%5Cn%5Ctlike%5Cn%5Ctlikeable%5Cn%5Ctlikely%5Cn%5Ctlimited%5Cn%5Ctlimp%5Cn%5Ctlimping%5Cn%5Ctlinear%5Cn%5Ctlined%5Cn%5Ctliquid%5Cn%5Ctliterate%5Cn%5Ctlittle%5Cn%5Ctlive%5Cn%5Ctlively%5Cn%5Ctlivid%5Cn%5Ctliving%5Cn%5Ctloathsome%5Cn%5Ctlone%5Cn%5Ctlonely%5Cn%5Ctlong%5Cn%5Ctlonging%5Cn%5Ctlong-term%5Cn%5Ctloose%5Cn%5Ctlopsided%5Cn%5Ctlost%5Cn%5Ctloud%5Cn%5Ctloutish%5Cn%5Ctlovable%5Cn%5Ctlovely%5Cn%5Ctloving%5Cn%5Ctlow%5Cn%5Ctlowly%5Cn%5Ctloyal%5Cn%5Ctlucky%5Cn%5Ctludicrous%5Cn%5Ctlumbering%5Cn%5Ctluminous%5Cn%5Ctlumpy%5Cn%5Ctlush%5Cn%5Ctlustrous%5Cn%5Ctluxuriant%5Cn%5Ctluxurious%5Cn%5Ctlying%5Cn%5Ctlyrical%5Cn%5Ctmacabre%5Cn%5Ctmacho%5Cn%5Ctmad%5Cn%5Ctmaddening%5Cn%5Ctmade-up%5Cn%5Ctmadly%5Cn%5Ctmagenta%5Cn%5Ctmagical%5Cn%5Ctmagnificent%5Cn%5Ctmajestic%5Cn%5Ctmajor%5Cn%5Ctmakeshift%5Cn%5Ctmale%5Cn%5Ctmalicious%5Cn%5Ctmammoth%5Cn%5Ctmaniacal%5Cn%5Ctmany%5Cn%5Ctmarked%5Cn%5Ctmarried%5Cn%5Ctmarvelous%5Cn%5Ctmasculine%5Cn%5Ctmassive%5Cn%5Ctmaterial%5Cn%5Ctmaterialistic%5Cn%5Ctmature%5Cn%5Ctmeager%5Cn%5Ctmealy%5Cn%5Ctmean%5Cn%5Ctmeasly%5Cn%5Ctmeaty%5Cn%5Ctmedical%5Cn%5Ctmediocre%5Cn%5Ctmedium%5Cn%5Ctmeek%5Cn%5Ctmelancholy%5Cn%5Ctmellow%5Cn%5Ctmelodic%5Cn%5Ctmelted%5Cn%5Ctmemorable%5Cn%5Ctmenacing%5Cn%5Ctmerciful%5Cn%5Ctmere%5Cn%5Ctmerry%5Cn%5Ctmessy%5Cn%5Ctmetallic%5Cn%5Ctmighty%5Cn%5Ctmild%5Cn%5Ctmilitary%5Cn%5Ctmilky%5Cn%5Ctmindless%5Cn%5Ctminiature%5Cn%5Ctminor%5Cn%5Ctminty%5Cn%5Ctminute%5Cn%5Ctmiscreant%5Cn%5Ctmiserable%5Cn%5Ctmiserly%5Cn%5Ctmisguided%5Cn%5Ctmistaken%5Cn%5Ctmisty%5Cn%5Ctmixed%5Cn%5Ctmoaning%5Cn%5Ctmodern%5Cn%5Ctmodest%5Cn%5Ctmoist%5Cn%5Ctmoldy%5Cn%5Ctmomentous%5Cn%5Ctmonstrous%5Cn%5Ctmonthly%5Cn%5Ctmonumental%5Cn%5Ctmoody%5Cn%5Ctmoral%5Cn%5Ctmortified%5Cn%5Ctmotherly%5Cn%5Ctmotionless%5Cn%5Ctmountainous%5Cn%5Ctmuddled%5Cn%5Ctmuddy%5Cn%5Ctmuffled%5Cn%5Ctmulticolored%5Cn%5Ctmundane%5Cn%5Ctmundane%5Cn%5Ctmurky%5Cn%5Ctmushy%5Cn%5Ctmusty%5Cn%5Ctmute%5Cn%5Ctmuted%5Cn%5Ctmysterious%5Cn%5Ctnaive%5Cn%5Ctnappy%5Cn%5Ctnarrow%5Cn%5Ctnasty%5Cn%5Ctnatural%5Cn%5Ctnaughty%5Cn%5Ctnauseating%5Cn%5Ctnautical%5Cn%5Ctnear%5Cn%5Ctneat%5Cn%5Ctnebulous%5Cn%5Ctnecessary%5Cn%5Ctneedless%5Cn%5Ctneedy%5Cn%5Ctnegative%5Cn%5Ctneglected%5Cn%5Ctnegligible%5Cn%5Ctneighboring%5Cn%5Ctneighborly%5Cn%5Ctnervous%5Cn%5Ctnervous%5Cn%5Ctnew%5Cn%5Ctnext%5Cn%5Ctnice%5Cn%5Ctnice%5Cn%5Ctnifty%5Cn%5Ctnimble%5Cn%5Ctnine%5Cn%5Ctnippy%5Cn%5Ctnocturnal%5Cn%5Ctnoiseless%5Cn%5Ctnoisy%5Cn%5Ctnonchalant%5Cn%5Ctnondescript%5Cn%5Ctnonsensical%5Cn%5Ctnonstop%5Cn%5Ctnormal%5Cn%5Ctnostalgic%5Cn%5Ctnosy%5Cn%5Ctnotable%5Cn%5Ctnoted%5Cn%5Ctnoteworthy%5Cn%5Ctnovel%5Cn%5Ctnoxious%5Cn%5Ctnull%5Cn%5Ctnumb%5Cn%5Ctnumberless%5Cn%5Ctnumerous%5Cn%5Ctnutritious%5Cn%5Ctnutty%5Cn%5Ctoafish%5Cn%5Ctobedient%5Cn%5Ctobeisant%5Cn%5Ctobese%5Cn%5Ctoblivious%5Cn%5Ctoblong%5Cn%5Ctobnoxious%5Cn%5Ctobscene%5Cn%5Ctobsequious%5Cn%5Ctobservant%5Cn%5Ctobsolete%5Cn%5Ctobtainable%5Cn%5Ctobvious%5Cn%5Ctoccasional%5Cn%5Ctoceanic%5Cn%5Ctodd%5Cn%5Ctoddball%5Cn%5Ctoffbeat%5Cn%5Ctoffensive%5Cn%5Ctofficial%5Cn%5Ctoily%5Cn%5Ctold%5Cn%5Ctold-fashioned%5Cn%5Ctomniscient%5Cn%5Ctone%5Cn%5Ctonerous%5Cn%5Ctonly%5Cn%5Ctopen%5Cn%5Ctopposite%5Cn%5Ctoptimal%5Cn%5Ctoptimistic%5Cn%5Ctopulent%5Cn%5Ctorange%5Cn%5Ctorderly%5Cn%5Ctordinary%5Cn%5Ctorganic%5Cn%5Ctoriginal%5Cn%5Ctornate%5Cn%5Ctornery%5Cn%5Ctossified%5Cn%5Ctother%5Cn%5Ctour%5Cn%5Ctoutgoing%5Cn%5Ctoutlandish%5Cn%5Ctoutlying%5Cn%5Ctoutrageous%5Cn%5Ctoutstanding%5Cn%5Ctoval%5Cn%5Ctoverconfident%5Cn%5Ctovercooked%5Cn%5Ctoverdue%5Cn%5Ctoverjoyed%5Cn%5Ctoverlooked%5Cn%5Ctoverrated%5Cn%5Ctovert%5Cn%5Ctoverwrought%5Cn%5Ctpainful%5Cn%5Ctpainstaking%5Cn%5Ctpalatable%5Cn%5Ctpale%5Cn%5Ctpaltry%5Cn%5Ctpanicky%5Cn%5Ctpanoramic%5Cn%5Ctparallel%5Cn%5Ctparched%5Cn%5Ctparsimonious%5Cn%5Ctpartial%5Cn%5Ctpassionate%5Cn%5Ctpast%5Cn%5Ctpastel%5Cn%5Ctpastoral%5Cn%5Ctpathetic%5Cn%5Ctpeaceful%5Cn%5Ctpenitent%5Cn%5Ctpeppery%5Cn%5Ctperfect%5Cn%5Ctperfumed%5Cn%5Ctperiodic%5Cn%5Ctperky%5Cn%5Ctpermissible%5Cn%5Ctperpetual%5Cn%5Ctperplexed%5Cn%5Ctpersonal%5Cn%5Ctpertinent%5Cn%5Ctpesky%5Cn%5Ctpessimistic%5Cn%5Ctpetite%5Cn%5Ctpetty%5Cn%5Ctpetty%5Cn%5Ctphobic%5Cn%5Ctphony%5Cn%5Ctphysical%5Cn%5Ctpicayune%5Cn%5Ctpiercing%5Cn%5Ctpink%5Cn%5Ctpiquant%5Cn%5Ctpitiful%5Cn%5Ctplacid%5Cn%5Ctplain%5Cn%5Ctplaintive%5Cn%5Ctplant%5Cn%5Ctplastic%5Cn%5Ctplausible%5Cn%5Ctplayful%5Cn%5Ctpleasant%5Cn%5Ctpleased%5Cn%5Ctpleasing%5Cn%5Ctplucky%5Cn%5Ctplump%5Cn%5Ctplush%5Cn%5Ctpointed%5Cn%5Ctpointless%5Cn%5Ctpoised%5Cn%5Ctpolished%5Cn%5Ctpolite%5Cn%5Ctpolitical%5Cn%5Ctpompous%5Cn%5Ctpoor%5Cn%5Ctpopular%5Cn%5Ctportly%5Cn%5Ctposh%5Cn%5Ctpositive%5Cn%5Ctpossessive%5Cn%5Ctpossible%5Cn%5Ctpotable%5Cn%5Ctpowerful%5Cn%5Ctpowerless%5Cn%5Ctpractical%5Cn%5Ctprecious%5Cn%5Ctpremium%5Cn%5Ctpresent%5Cn%5Ctpresent%5Cn%5Ctprestigious%5Cn%5Ctpretty%5Cn%5Ctprevious%5Cn%5Ctpricey%5Cn%5Ctprickly%5Cn%5Ctprimary%5Cn%5Ctprime%5Cn%5Ctpristine%5Cn%5Ctprivate%5Cn%5Ctprize%5Cn%5Ctprobable%5Cn%5Ctproductive%5Cn%5Ctprofitable%5Cn%5Ctprofuse%5Cn%5Ctproper%5Cn%5Ctprotective%5Cn%5Ctproud%5Cn%5Ctprudent%5Cn%5Ctpsychedelic%5Cn%5Ctpsychotic%5Cn%5Ctpublic%5Cn%5Ctpuffy%5Cn%5Ctpumped%5Cn%5Ctpunctual%5Cn%5Ctpungent%5Cn%5Ctpuny%5Cn%5Ctpure%5Cn%5Ctpurple%5Cn%5Ctpurring%5Cn%5Ctpushy%5Cn%5Ctpushy%5Cn%5Ctputrid%5Cn%5Ctpuzzled%5Cn%5Ctpuzzling%5Cn%5Ctquack%5Cn%5Ctquaint%5Cn%5Ctquaint%5Cn%5Ctqualified%5Cn%5Ctquarrelsome%5Cn%5Ctquarterly%5Cn%5Ctqueasy%5Cn%5Ctquerulous%5Cn%5Ctquestionable%5Cn%5Ctquick%5Cn%5Ctquickest%5Cn%5Ctquick-witted%5Cn%5Ctquiet%5Cn%5Ctquintessential%5Cn%5Ctquirky%5Cn%5Ctquixotic%5Cn%5Ctquixotic%5Cn%5Ctquizzical%5Cn%5Ctrabid%5Cn%5Ctracial%5Cn%5Ctradiant%5Cn%5Ctragged%5Cn%5Ctrainy%5Cn%5Ctrambunctious%5Cn%5Ctrampant%5Cn%5Ctrapid%5Cn%5Ctrare%5Cn%5Ctrash%5Cn%5Ctraspy%5Cn%5Ctratty%5Cn%5Ctraw%5Cn%5Ctready%5Cn%5Ctreal%5Cn%5Ctrealistic%5Cn%5Ctreasonable%5Cn%5Ctrebel%5Cn%5Ctrecent%5Cn%5Ctreceptive%5Cn%5Ctreckless%5Cn%5Ctrecondite%5Cn%5Ctrectangular%5Cn%5Ctred%5Cn%5Ctredundant%5Cn%5Ctreflecting%5Cn%5Ctreflective%5Cn%5Ctregal%5Cn%5Ctregular%5Cn%5Ctreliable%5Cn%5Ctrelieved%5Cn%5Ctremarkable%5Cn%5Ctreminiscent%5Cn%5Ctremorseful%5Cn%5Ctremote%5Cn%5Ctrepentant%5Cn%5Ctrepulsive%5Cn%5Ctrequired%5Cn%5Ctresolute%5Cn%5Ctresonant%5Cn%5Ctrespectful%5Cn%5Ctresponsible%5Cn%5Ctresponsive%5Cn%5Ctrevolving%5Cn%5Ctrewarding%5Cn%5Ctrhetorical%5Cn%5Ctrich%5Cn%5Ctright%5Cn%5Ctrighteous%5Cn%5Ctrightful%5Cn%5Ctrigid%5Cn%5Ctringed%5Cn%5Ctripe%5Cn%5Ctritzy%5Cn%5Ctroasted%5Cn%5Ctrobust%5Cn%5Ctromantic%5Cn%5Ctroomy%5Cn%5Ctrosy%5Cn%5Ctrotating%5Cn%5Ctrotten%5Cn%5Ctrotund%5Cn%5Ctrough%5Cn%5Ctround%5Cn%5Ctrowdy%5Cn%5Ctroyal%5Cn%5Ctrubbery%5Cn%5Ctruddy%5Cn%5Ctrude%5Cn%5Ctrundown%5Cn%5Ctrunny%5Cn%5Ctrural%5Cn%5Ctrustic%20%20rusty%5Cn%5Ctruthless%5Cn%5Ctsable%5Cn%5Ctsad%5Cn%5Ctsafe%5Cn%5Ctsalty%5Cn%5Ctsame%5Cn%5Ctsandy%5Cn%5Ctsane%5Cn%5Ctsarcastic%5Cn%5Ctsardonic%5Cn%5Ctsassy%5Cn%5Ctsatisfied%5Cn%5Ctsatisfying%5Cn%5Ctsavory%5Cn%5Ctscaly%5Cn%5Ctscandalous%5Cn%5Ctscant%5Cn%5Ctscarce%5Cn%5Ctscared%5Cn%5Ctscary%5Cn%5Ctscattered%5Cn%5Ctscented%5Cn%5Ctscholarly%5Cn%5Ctscientific%5Cn%5Ctscintillating%5Cn%5Ctscornful%5Cn%5Ctscratchy%5Cn%5Ctscrawny%5Cn%5Ctscreeching%5Cn%5Ctsecond%5Cn%5Ctsecondary%5Cn%5Ctsecond-hand%5Cn%5Ctsecret%5Cn%5Ctsecretive%5Cn%5Ctsedate%5Cn%5Ctseemly%5Cn%5Ctselective%5Cn%5Ctself-assured%5Cn%5Ctselfish%5Cn%5Ctself-reliant%5Cn%5Ctsentimental%5Cn%5Ctseparate%5Cn%5Ctserene%5Cn%5Ctserious%5Cn%5Ctserpentine%5Cn%5Ctseveral%5Cn%5Ctsevere%5Cn%5Ctshabby%5Cn%5Ctshadowy%5Cn%5Ctshady%5Cn%5Ctshaggy%5Cn%5Ctshaky%5Cn%5Ctshallow%5Cn%5Ctshameful%5Cn%5Ctshameless%5Cn%5Ctsharp%5Cn%5Ctshimmering%5Cn%5Ctshiny%5Cn%5Ctshivering%5Cn%5Ctshocked%5Cn%5Ctshocking%5Cn%5Ctshoddy%5Cn%5Ctshort%5Cn%5Ctshort-term%5Cn%5Ctshowy%5Cn%5Ctshrill%5Cn%5Ctshut%5Cn%5Ctshy%5Cn%5Ctsick%5Cn%5Ctsilent%5Cn%5Ctsilky%5Cn%5Ctsilly%5Cn%5Ctsilver%5Cn%5Ctsimilar%5Cn%5Ctsimple%5Cn%5Ctsimplistic%5Cn%5Ctsincere%5Cn%5Ctsinful%5Cn%5Ctsingle%5Cn%5Ctsix%5Cn%5Ctsizzling%5Cn%5Ctskeletal%5Cn%5Ctskillful%5Cn%5Ctskinny%5Cn%5Ctsleepy%5Cn%5Ctslight%5Cn%5Ctslim%5Cn%5Ctslimy%5Cn%5Ctslippery%5Cn%5Ctsloppy%5Cn%5Ctslow%5Cn%5Ctslushy%5Cn%5Ctsmall%5Cn%5Ctsmarmy%5Cn%5Ctsmart%5Cn%5Ctsmelly%5Cn%5Ctsmiling%5Cn%5Ctsmoggy%5Cn%5Ctsmooth%5Cn%5Ctsmug%5Cn%5Ctsnappy%5Cn%5Ctsnarling%5Cn%5Ctsneaky%5Cn%5Ctsniveling%5Cn%5Ctsnobbish%5Cn%5Ctsnoopy%5Cn%5Ctsnotty%5Cn%5Ctsociable%5Cn%5Ctsoft%5Cn%5Ctsoggy%5Cn%5Ctsolid%5Cn%5Ctsomber%5Cn%5Ctsome%5Cn%5Ctsophisticated%5Cn%5Ctsordid%5Cn%5Ctsore%5Cn%5Ctsorrowful%5Cn%5Ctsoulful%5Cn%5Ctsoupy%5Cn%5Ctsour%5Cn%5Ctsour%5Cn%5CtSpanish%5Cn%5Ctsparkling%5Cn%5Ctsparse%5Cn%5Ctspecial%5Cn%5Ctspecific%5Cn%5Ctspectacular%5Cn%5Ctspeedy%5Cn%5Ctspherical%5Cn%5Ctspicy%5Cn%5Ctspiffy%5Cn%5Ctspiky%5Cn%5Ctspirited%5Cn%5Ctspiritual%5Cn%5Ctspiteful%5Cn%5Ctsplendid%5Cn%5Ctspooky%5Cn%5Ctspotless%5Cn%5Ctspotted%5Cn%5Ctspotty%5Cn%5Ctspry%5Cn%5Ctspurious%5Cn%5Ctsqualid%5Cn%5Ctsquare%5Cn%5Ctsqueaky%5Cn%5Ctsquealing%5Cn%5Ctsqueamish%5Cn%5Ctsquiggly%5Cn%5Ctstable%5Cn%5Ctstaid%5Cn%5Ctstained%5Cn%5Ctstaking%5Cn%5Ctstale%5Cn%5Ctstandard%5Cn%5Ctstanding%5Cn%5Ctstarchy%5Cn%5Ctstark%5Cn%5Ctstarry%5Cn%5Ctstatuesque%5Cn%5Ctsteadfast%5Cn%5Ctsteady%5Cn%5Ctsteel%5Cn%5Ctsteep%5Cn%5Ctstereotyped%5Cn%5Ctsticky%5Cn%5Ctstiff%5Cn%5Ctstimulating%5Cn%5Ctstingy%5Cn%5Ctstormy%5Cn%5Ctstout%5Cn%5Ctstraight%5Cn%5Ctstrange%5Cn%5Ctstrict%5Cn%5Ctstrident%5Cn%5Ctstriking%5Cn%5Ctstriped%5Cn%5Ctstrong%5Cn%5Ctstudious%5Cn%5Ctstunning%5Cn%5Ctstunning%5Cn%5Ctstupendous%5Cn%5Ctstupid%5Cn%5Ctsturdy%5Cn%5Ctstylish%5Cn%5Ctsubdued%5Cn%5Ctsubmissive%5Cn%5Ctsubsequent%5Cn%5Ctsubstantial%5Cn%5Ctsubtle%5Cn%5Ctsuburban%5Cn%5Ctsuccessful%5Cn%5Ctsuccinct%5Cn%5Ctsucculent%5Cn%5Ctsudden%5Cn%5Ctsugary%5Cn%5Ctsulky%5Cn%5Ctsunny%5Cn%5Ctsuper%5Cn%5Ctsuperb%5Cn%5Ctsuperficial%5Cn%5Ctsuperior%5Cn%5Ctsupportive%5Cn%5Ctsupreme%5Cn%5Ctsure-footed%5Cn%5Ctsurprised%5Cn%5Ctsuspicious%5Cn%5Ctsvelte%5Cn%5Ctswanky%5Cn%5Ctsweaty%5Cn%5Ctsweet%5Cn%5Ctsweltering%5Cn%5Ctswift%5Cn%5Ctsympathetic%5Cn%5Ctsymptomatic%5Cn%5Ctsynonymous%5Cn%5Cttaboo%5Cn%5Cttacit%5Cn%5Cttacky%5Cn%5Cttalented%5Cn%5Cttalkative%5Cn%5Cttall%5Cn%5Cttame%5Cn%5Cttan%5Cn%5Cttangible%5Cn%5Cttangy%5Cn%5Cttart%5Cn%5Cttasteful%5Cn%5Cttasteless%5Cn%5Cttasty%5Cn%5Cttattered%5Cn%5Cttaut%5Cn%5Cttawdry%5Cn%5Cttearful%5Cn%5Cttedious%5Cn%5Ctteeming%5Cn%5Ctteeny%5Cn%5Ctteeny-tiny%5Cn%5Cttelling%5Cn%5Cttemporary%5Cn%5Cttempting%5Cn%5Ctten%5Cn%5Cttender%5Cn%5Cttense%5Cn%5Cttenuous%5Cn%5Cttepid%5Cn%5Ctterrible%5Cn%5Ctterrific%5Cn%5Cttested%5Cn%5Cttesty%5Cn%5Ctthankful%5Cn%5Ctthat%5Cn%5Cttherapeutic%5Cn%5Ctthese%5Cn%5Ctthick%5Cn%5Ctthin%5Cn%5Ctthinkable%5Cn%5Ctthird%5Cn%5Ctthirsty%5Cn%5Ctthis%5Cn%5Ctthorny%5Cn%5Ctthorough%5Cn%5Ctthose%5Cn%5Ctthoughtful%5Cn%5Ctthoughtless%5Cn%5Ctthreadbare%5Cn%5Ctthreatening%5Cn%5Ctthree%5Cn%5Ctthrifty%5Cn%5Ctthundering%5Cn%5Ctthunderous%5Cn%5Cttidy%5Cn%5Cttight%5Cn%5Cttightfisted%5Cn%5Cttimely%5Cn%5Cttinted%5Cn%5Cttiny%5Cn%5Cttired%5Cn%5Cttiresome%5Cn%5Cttoothsome%5Cn%5Cttorn%5Cn%5Cttorpid%5Cn%5Cttotal%5Cn%5Cttough%5Cn%5Cttowering%5Cn%5Cttragic%5Cn%5Cttrained%5Cn%5Cttranquil%5Cn%5Cttrashy%5Cn%5Cttraumatic%5Cn%5Cttreasured%5Cn%5Cttremendous%5Cn%5Cttriangular%5Cn%5Cttricky%5Cn%5Cttrifling%5Cn%5Cttrim%5Cn%5Cttrite%5Cn%5Cttrivial%5Cn%5Cttroubled%5Cn%5Cttruculent%5Cn%5Cttrue%5Cn%5Cttrusting%5Cn%5Cttrustworthy%5Cn%5Cttrusty%5Cn%5Cttruthful%5Cn%5Cttubby%5Cn%5Ctturbulent%5Cn%5Cttwin%5Cn%5Cttwo%5Cn%5Cttypical%5Cn%5Ctubiquitous%5Cn%5Ctugliest%5Cn%5Ctugly%5Cn%5Ctultimate%5Cn%5Ctultra%5Cn%5Ctunable%5Cn%5Ctunaccountable%5Cn%5Ctunarmed%5Cn%5Ctunaware%5Cn%5Ctunbecoming%5Cn%5Ctunbiased%5Cn%5Ctuncomfortable%5Cn%5Ctuncommon%5Cn%5Ctunconscious%5Cn%5Ctuncovered%5Cn%5Ctunderstated%5Cn%5Ctunderstood%5Cn%5Ctundesirable%5Cn%5Ctunequal%5Cn%5Ctunequaled%5Cn%5Ctuneven%5Cn%5Ctunfinished%5Cn%5Ctunfit%5Cn%5Ctunfolded%5Cn%5Ctunfortunate%5Cn%5Ctunhappy%5Cn%5Ctunhealthy%5Cn%5Ctuniform%5Cn%5Ctunimportant%5Cn%5Ctuninterested%5Cn%5Ctunique%5Cn%5Ctunited%5Cn%5Ctunkempt%5Cn%5Ctunknown%5Cn%5Ctunlawful%5Cn%5Ctunlined%5Cn%5Ctunlucky%5Cn%5Ctunnatural%5Cn%5Ctunpleasant%5Cn%5Ctunrealistic%5Cn%5Ctunripe%5Cn%5Ctunruly%5Cn%5Ctunselfish%5Cn%5Ctunsightly%5Cn%5Ctunsteady%5Cn%5Ctunsuitable%5Cn%5Ctunsung%5Cn%5Ctuntidy%5Cn%5Ctuntimely%5Cn%5Ctuntried%5Cn%5Ctuntrue%5Cn%5Ctunused%5Cn%5Ctunusual%5Cn%5Ctunwelcome%5Cn%5Ctunwieldy%5Cn%5Ctunwitting%5Cn%5Ctunwritten%5Cn%5Ctupbeat%5Cn%5Ctuppity%5Cn%5Ctupright%5Cn%5Ctupset%5Cn%5Ctuptight%5Cn%5Cturban%5Cn%5Ctusable%5Cn%5Ctused%5Cn%5Ctused%5Cn%5Ctuseful%5Cn%5Ctuseless%5Cn%5Ctutilized%5Cn%5Ctutopian%5Cn%5Ctutter%5Cn%5Ctuttermost%5Cn%5Ctvacant%5Cn%5Ctvacuous%5Cn%5Ctvagabond%5Cn%5Ctvague%5Cn%5Ctvain%5Cn%5Ctvalid%5Cn%5Ctvaluable%5Cn%5Ctvapid%5Cn%5Ctvariable%5Cn%5Ctvarious%5Cn%5Ctvast%5Cn%5Ctvelvety%5Cn%5Ctvenerated%5Cn%5Ctvengeful%5Cn%5Ctvenomous%5Cn%5Ctverdant%5Cn%5Ctverifiable%5Cn%5Ctversed%5Cn%5Ctvexed%5Cn%5Ctvibrant%5Cn%5Ctvicious%5Cn%5Ctvictorious%5Cn%5Ctvigilant%5Cn%5Ctvigorous%5Cn%5Ctvillainous%5Cn%5Ctviolent%5Cn%5Ctviolet%5Cn%5Ctvirtual%5Cn%5Ctvirtuous%5Cn%5Ctvisible%5Cn%5Ctvital%5Cn%5Ctvivacious%5Cn%5Ctvivid%5Cn%5Ctvoiceless%5Cn%5Ctvolatile%5Cn%5Ctvoluminous%5Cn%5Ctvoracious%5Cn%5Ctvulgar%5Cn%5Ctwacky%5Cn%5Ctwaggish%5Cn%5Ctwaiting%5Cn%5Ctwakeful%5Cn%5Ctwan%5Cn%5Ctwandering%5Cn%5Ctwanting%5Cn%5Ctwarlike%5Cn%5Ctwarm%5Cn%5Ctwarmhearted%5Cn%5Ctwarped%5Cn%5Ctwary%5Cn%5Ctwasteful%5Cn%5Ctwatchful%5Cn%5Ctwaterlogged%5Cn%5Ctwatery%5Cn%5Ctwavy%5Cn%5Ctweak%5Cn%5Ctwealthy%5Cn%5Ctweary%5Cn%5Ctwebbed%5Cn%5Ctwee%5Cn%5Ctweekly%5Cn%5Ctweepy%5Cn%5Ctweighty%5Cn%5Ctweird%5Cn%5Ctwelcome%5Cn%5Ctwell-documented%5Cn%5Ctwell-groomed%5Cn%5Ctwell-informed%5Cn%5Ctwell-lit%5Cn%5Ctwell-made%5Cn%5Ctwell-off%5Cn%5Ctwell-to-do%5Cn%5Ctwell-worn%5Cn%5Ctwet%5Cn%5Ctwhich%5Cn%5Ctwhimsical%5Cn%5Ctwhirlwind%5Cn%5Ctwhispered%5Cn%5Ctwhispering%5Cn%5Ctwhite%5Cn%5Ctwhole%5Cn%5Ctwholesale%5Cn%5Ctwhopping%5Cn%5Ctwicked%5Cn%5Ctwide%5Cn%5Ctwide-eyed%5Cn%5Ctwiggly%5Cn%5Ctwild%5Cn%5Ctwilling%5Cn%5Ctwilted%5Cn%5Ctwinding%5Cn%5Ctwindy%5Cn%5Ctwinged%5Cn%5Ctwiry%5Cn%5Ctwise%5Cn%5Ctwistful%5Cn%5Ctwitty%5Cn%5Ctwobbly%5Cn%5Ctwoebegone%5Cn%5Ctwoeful%5Cn%5Ctwomanly%5Cn%5Ctwonderful%5Cn%5Ctwooden%5Cn%5Ctwoozy%5Cn%5Ctwordy%5Cn%5Ctworkable%5Cn%5Ctworldly%5Cn%5Ctworn%5Cn%5Ctworried%5Cn%5Ctworrisome%5Cn%5Ctworse%5Cn%5Ctworst%5Cn%5Ctworthless%5Cn%5Ctworthwhile%5Cn%5Ctworthy%5Cn%5Ctwrathful%5Cn%5Ctwretched%5Cn%5Ctwrithing%5Cn%5Ctwrong%5Cn%5Ctwry%5Cn%5Ctxenophobic%5Cn%5Ctyawning%5Cn%5Ctyearly%5Cn%5Ctyellow%5Cn%5Ctyellowish%5Cn%5Ctyielding%5Cn%5Ctyoung%5Cn%5Ctyouthful%5Cn%5Ctyummy%5Cn%5Ctzany%5Cn%5Ctzealous%5Cn%5Ctzesty%5Cn%5Ctzigzag%5Cn%5Ctzippy%5Cn%5Ctzonked%22,%22imports%22:%5B%22simple-gen-footer%22%5D,%22name%22:%22adjective%22%7D,%7B%22modelText%22:%22$output%5Cn%5CtThe%20%3Ca%20href%5C%5C=%5C%22/useful-generators%5C%22%3Euseful%20generators%20list%3C/a%3E%20is%20a%20handy%20list%20of%20simple%20text%20generators%20on%20various%20topics.%20If%20you're%20a%20perchance%20builder%20then%20you'll%20probably%20find%20some%20of%20them%20useful%20for%20importing%20into%20your%20own%20projects.%5Cn%5CtIf%20you'd%20like%20to%20learn%20how%20to%20create%20a%20random%20text%20generator,%20then%20check%20out%20the%20%3Ca%20href%5C%5C=%5C%22/basic-template#edit%5C%22%3Ebasic%20generator%20template%3C/a%3E%20and%20the%20%3Ca%20href%5C%5C=%5C%22/tutorial%5C%22%3Etutorial%3C/a%3E.%20It's%20easier%20than%20you'd%20think%20and%20is%20great%20fun%20:)%5Cn%5Ct$output%20=%20%3Cp%3E%5Bthis.joinItems(%5C%22%3C/p%3E%3Cp%3E%5C%22)%5D%3C/p%3E%22,%22imports%22:%5B%5D,%22name%22:%22simple-gen-footer%22%7D%5D</script> <script src="https://perchance.org/lib/compromise-11.12.4.min.js"></script> <script>var AvsAnSimple=function(a){function i(a){var e=parseInt(r,36)||0,o=e&&e.toString(36).length;a.article="."==r[o]?"a":"an",r=r.substr(1+o);for(var n=0;n<e;n++){var t=a[r[0]]={};r=r.substr(1),i(t)}}var r="2h.#2.a;i;&1.N;*4.a;e;i;o;/9.a;e;h1.o.i;l1./;n1.o.o;r1.e.s1./;01.8;12.1a;01.0;12.8;9;2.31.7;4.5.6.7.8.9.8a;0a.0;1;2;3;4;5;6;7;8;9;11; .22; .–.31; .42; .–.55; .,.h.k.m.62; .k.72; .–.82; .,.92; .–.8;<2.m1.d;o;=1.=1.E;@;A6;A1;A1.S;i1;r1;o.m1;a1;r1; .n1;d1;a1;l1;u1;c1.i1.a1.n;s1;t1;u1;r1;i1;a1;s.t1;h1;l1;e1;t1;e1.s;B2.h2.a1.i1;r1;a.á;o1.r1.d1. ;C3.a1.i1.s1.s.h4.a2.i1.s1;e.o1.i;l1.á;r1.o1.í;u2.i;r1.r1.a;o1.n1.g1.j;D7.a1.o1.q;i2.n1.a1.s;o1.t;u1.a1.l1.c;á1. ;ò;ù;ư;E7;U1;R.b1;o1;l1;i.m1;p1;e1;z.n1;a1;m.s1;p5.a1.c;e;h;o;r;u1.l1;o.w1;i.F11. ;,;.;/;0;1;2;3;4;5;6;71.0.8;9;Ae;B.C.D.F.I2.L.R.K.L.M.N.P.Q.R.S.T.B;C1;M.D;E2.C;I;F1;r.H;I3.A1;T.R1. ;U;J;L3.C;N;P;M;O1. ;P1;..R2.A1. ;S;S;T1;S.U2.,;.;X;Y1;V.c;f1.o.h;σ;G7.e1.r1.n1.e;h1.a3.e;i;o;i1.a1.n1.g;o2.f1. ;t1.t1. ;r1.i1.a;w1.a1.r1.r;ú;Hs. ;&;,;.2;A.I.1;2;3;5;7;B1;P.C;D;F;G;H1;I.I6;C.G.N.P.S1.D;T.K1.9;L;M1;..N;O2. ;V;P;R1;T.S1.F.T;V;e2.i1.r;r1.r1.n;o2.n6;d.e1.s;g.k.o2;l.r1;i1.f;v.u1.r;I3;I2;*.I.n1;d1;e1;p1;e1;n1;d2;e1;n1;c1;i.ê.s1;l1;a1;n1;d1;s.J1.i1.a1.o;Ly. ;,;.;1;2;3;4;8;A3. ;P;X;B;C;D;E2. ;D;F1;T.G;H1.D.I1.R;L;M;N;P;R;S1;m.T;U1. ;V1;C.W1.T;Z;^;a1.o1.i1.g;o1.c1.h1.a1;b.p;u1.s1.h1;o.ộ;M15. ;&;,;.1;A1;.1;S./;1;2;3;4;5;6;7;8;Ai;B.C.D.F.G.J.L.M.N.P.R.S.T.V.W.X.Y.Z.B1;S1;T.C;D;E3.P1;S.W;n;F;G;H;I4. ;5;6;T1;M.K;L;M;N;O1.U;P;Q;R;S;T1;R.U2. ;V;V;X;b1.u1.m;f;h;o2.D1.e.U1;..p1.3;s1.c;Ny. ;+;.1.E.4;7;8;:;A3.A1;F.I;S1.L;B;C;D;E3.A;H;S1. ;F1;U.G;H;I7.C.D1. ;K.L.N.O.S.K;L;M1;M.N2.R;T;P1.O1.V1./1.B;R2;J.T.S1;W.T1;L1.D.U1.S;V;W2.A;O1.H;X;Y3.C1.L;P;U;a1.s1.a1.n;t1.h;v;²;×;O5;N1;E.l1;v.n2;c1.e.e1.i;o1;p.u1;i.P1.h2.i1.a;o2.b2;i.o.i;Q1.i1.n1.g1.x;Rz. ;&;,;.1;J./;1;4;6;A3. ;.;F1;T.B1;R.C;D;E3. ;S1.P;U;F;G;H1.S;I2.A;C1. ;J;K;L1;P.M5;1.2.3.5.6.N;O2.H;T2;A.O.P;Q;R1;F.S4;,...?.T.T;U4;B.M.N.S.V;X;c;f1;M1...h2.A;B;ò;S11. ;&;,;.4.E;M;O;T1..3.B;D;M;1;3;4;5;6;8;9;A3. ;8;S2;E.I.B;C3.A1. ;R2.A.U.T;D;E6. ;5;C3;A.O.R.I1.F.O;U;F3;&.H.O1.S.G1;D.H3.2;3;L;I2. ;S1.O.K2.I.Y.L3;A2. ;.;I1. ;O.M3;A1. ;I.U1.R.N5.A.C3.A.B.C.E.F.O.O5. ;A1.I;E;S1;U.V;P7;A7;A.C.D.M.N.R.S.E1. ;I4;C.D.N.R.L1;O.O.U.Y.Q1. ;R;S1;W.T9.A1. ;C;D;F;I;L;M;S;V;U7.B.L.M.N.P.R.S.V;W1.R;X1.M;h1.i1.g1.a1.o;p1.i1.o1;n.t2.B;i1.c1.i;T4.a2.i2.g1.a.s1.c;v1.e1.s;e1.a1.m1.p;u1.i2.l;r;à;Um..1.N1..1.C;/1.1;11. .21.1;L1.T;M1.N;N4.C1.L;D2. .P.K;R1. .a;b2;a.i.d;g1.l;i1.g.l2;i.y.m;no. ;a1.n.b;c;d;e1;s.f;g;h;i2.d;n;j;k;l;m;n;o;p;q;r;s;t;u;v;w;p;r3;a.e.u1.k;s3. ;h;t1;r.t4.h;n;r;t;x;z;í;W2.P1.:4.A1.F;I2.B;N1.H.O1.V;R1.F1.C2.N.U.i1.k1.i1.E1.l1.i;X7;a.e.h.i.o.u.y.Y3.e1.t1.h;p;s;[5.A;E;I;a;e;_2._1.i;e;`3.a;e;i;a7; .m1;a1;r1. .n1;d2; .ě.p1;r1;t.r1;t1;í.u1;s1;s1;i1. .v1;u1;t.d3.a1.s1. ;e2.m1. ;r1. ;i2.c1.h1. ;e1.s1.e2.m;r;e8;c1;o1;n1;o1;m1;i1;a.e1;w.l1;i1;t1;e1;i.m1;p1;e1;z.n1;t1;e1;n1;d.s2;a1. .t4;a1; .e1; .i1;m1;a1;r.r1;u1.t.u1.p1. ;w.f3. ;M;y1.i;h9. ;,;.;C;a1.u1.t1;b.e2.i1.r1;a.r1.m1.a1.n;o4.m2.a1; .m;n8; .b.d.e3; .d.y.g.i.k.v.r1.s1. ;u1.r;r1. ;t1;t1;p1;:.i6;b1;n.e1;r.n2;f2;l1;u1;ê.o1;a.s1;t1;a1;l1;a.r1; .s1; .u.k1.u1. ;l3.c1.d;s1. ;v1.a;ma. ;,;R;b1.a.e1.i1.n;f;p;t1.a.u1.l1.t1.i1.c1.a1.m1.p1.i;×;n6. ;V;W;d1; .t;×;o8;c2;h1;o.u1;p.d1;d1;y.f1; .g1;g1;i.no. ;';,;/;a;b;c1.o;d;e2.i;r;f;g;i;l;m;n;o;r;s;t;u;w;y;z;–;r1;i1;g1;e.t1;r1.s;u1;i.r3. ;&;f;s9.,;?;R;f2.e.o.i1.c1.h;l1. ;p2.3;i1. ;r1.g;v3.a.e.i.t2.A;S;uc; ...b2.e;l;f.k2.a;i;m1;a1. .n3;a3; .n5.a;c;n;s;t;r1;y.e2; .i.i8.c2.o1.r1.p;u1.m;d1;i1.o;g1.n;l1.l;m1;o.n;s1.s;v1.o1;c.r5;a.e.i.l.o.s3. ;h;u1.r2;e.p3;a.e.i.t2.m;t;v.w1.a;xb. ;';,;.;8;b;k;l;m1;a.t;y1. ;y1.l;{1.a;|1.a;£1.8;À;Á;Ä;Å;Æ;É;Ò;Ó;Ö;Ü;à;á;æ;è;é1;t3.a;o;u;í;ö;ü1; .Ā;ā;ī;İ;Ō;ō;œ;Ω;α;ε;ω;ϵ;е;–2.e;i;ℓ;";return i(a),{raw:a,query:function(i){var r,e,o=a,n=0;do{e=i[n++]}while("\"‘’“”$'".indexOf(e)>=0);for(;;){if(r=o.article||r,!(o=o[e]))return r;e=i[n++]||" "}}}}({});</script> <script>let textTransformNames = [];

function addNodeMethods(node) {
  // REMEMBER TO UPDATE stringAndNumberModifications and arrayModifications if you add more methods

  Object.defineProperty(node, "$odds", {get:$oddsMethod, configurable:true});
  Object.defineProperty(node, "getOdds", {get:$oddsMethod, configurable:true});

  Object.defineProperty(node, "getName", {get:function() { return this.$text; }, configurable:true});
  Object.defineProperty(node, "getParent", {get:function() { return this.$parent; }, configurable:true});

  Object.defineProperty(node, "getLength", {get:function() { return Object.keys(this).length; }, configurable:true});
  Object.defineProperty(node, "getRawListText", {get:function() { return this.$perchanceCode; }, configurable:true});

  // Workaround for the problem of a node not being resolved (mainly for use in functions) (I put this in the execution properties of the proxy)
  Object.defineProperty(node, "getSelf", {get:function() { return this; }, configurable:true});
  Object.defineProperty(node, "getPropertyKeys", {get:function() { return this.$valueChildren.slice(0); }, configurable:true});
  Object.defineProperty(node, "getPropertyNames", {get:function() { return this.$valueChildren.slice(0); }, configurable:true});
  Object.defineProperty(node, "getChildNames", {get:function() { return this.$children.slice(0); }, configurable:true});

  Object.defineProperty(node, "isConsumable", {value:false, writable:true, configurable:true})

  Object.defineProperty(node, "toString", {value:toStringMethod, configurable:true});
  Object.defineProperty(node, "evaluateItem", {get:valueOfMethod, configurable:true});


  // TODO: add a setter method for $odds which changes the node data? wait, shouldn't $odds just return the string? or not?

  // TODO: these need fixing (see funciton declaration for notes)
  // Object.defineProperty(node, "$addChild", {get:$addChildMethod});
  // Object.defineProperty(node, "$removeChild", {get:$removeChildMethod});

  Object.defineProperty(node, "selectOne", {get:selectOneMethod, configurable:true});
  Object.defineProperty(node, "selectAll", {get:selectAllMethod, configurable:true});
  Object.defineProperty(node, "selectMany", {value:selectManyMethod, writable:true, configurable:true});
  Object.defineProperty(node, "selectUnique", {value:selectUniqueMethod, writable:true, configurable:true});

  Object.defineProperty(node, "joinItems", {value:joinItemsMethod, writable:true, configurable:true});

  Object.defineProperty(node, "valueOf", {value:valueOfMethod, writable:true, configurable:true});

  //Object.defineProperty(node, "shuffleItems", {value:shuffleMethod, configurable:true});

  // TEXT TRANSFORMS:
  Object.defineProperty(node, "pluralForm", {get:pluralFormMethod, configurable:true});
  Object.defineProperty(node, "singularForm", {get:singularFormMethod, configurable:true});
  Object.defineProperty(node, "pastTense", {get:pastTenseMethod, configurable:true});
  Object.defineProperty(node, "presentTense", {get:presentTenseMethod, configurable:true});
  Object.defineProperty(node, "futureTense", {get:futureTenseMethod, configurable:true});
  Object.defineProperty(node, "negativeForm", {get:negativeFormMethod, configurable:true});
  // TODO**: should have seperate "soft" versions of sentence and title case which DON'T call toLowerCase on the whole string first? (i.e. to leave current capitalisations there)
  Object.defineProperty(node, "sentenceCase", {get:sentenceCaseMethod, configurable:true});
  Object.defineProperty(node, "titleCase", {get:titleCaseMethod, configurable:true});
  Object.defineProperty(node, "lowerCase", {get:lowerCaseMethod, configurable:true});
  Object.defineProperty(node, "upperCase", {get:upperCaseMethod, configurable:true});
  Object.defineProperty(node, "replaceText", {value:replaceTextMethod, configurable:true});
  // REMEMBER: add text transform names here if you add new ones:
  if(textTransformNames.length === 0) {
    textTransformNames.push("pluralForm");
    textTransformNames.push("singularForm");
    textTransformNames.push("pastTense");
    textTransformNames.push("presentTense");
    textTransformNames.push("futureTense");
    textTransformNames.push("negativeForm");
    textTransformNames.push("sentenceCase");
    textTransformNames.push("titleCase");
    textTransformNames.push("lowerCase");
    textTransformNames.push("upperCase");
    textTransformNames.push("replaceText");
  }


  //Object.defineProperty(node, "createClone", {get:createCloneMethod, configurable:true});
  Object.defineProperty(node, "consumableList", {get:consumableListMethod, configurable:true});

  Object.defineProperty(node, "createClone", {get:function() { return duplicatePerchanceNode(this); }, configurable:true});

  // Object.defineProperty(node, "ordinal", {get:ordinalMethod});

  // Object.defineProperty(node, "$withArticle", {get:withArticleMethod});

  // TODO: add the rest of the default methods for version 1 (including getters like ".itemCount" (which gets the length of the $children array))
  // TODO: .hideOutput transform?
  // TODO: .replaceText("blah","na") transform (alias for .replace() except it always replaces ALL occurances unless you use regex and not the global flag)
  // TODO: add any newly added execution properties to the proxy executionProperties array (e.g. replaceText)
  // TODO***: remember that you'll need to move the `apply`s along with the text transforms that have an `apply` (e.g. replaceText)
}

let replaceTextMethod = function(needle, replacement) {
  if(needle instanceof RegExp) {
    return this.toString().replace(needle, replacement.toString());
  } else {
    //needle = new RegExp(needle.toString(), "g");
    //return this.toString().replace(needle, replacement.toString());
    return this.toString().split(needle.toString()).join(replacement.toString());
  }
}

// let createCloneMethod = function() {
//   // TODO*****: This would try to clone $moduleSpace, $parent, $root, etc.???????????????????!!!!!!!!!!!!!!!!
//   //              --> test by putting in debugger and testing `this.$parent === clone.parent`
//   //              --> need to temporarily remove properties which reference other node objects directly? then add them back after
//   //            At least it DOESN'T make copies of functions
//   //            I think I need to make my own cloner... either that or really make sure this is working like I expect
//   let clone = cloner.deep.copy(this);
//   if(!this.___isLocalCall) {
//     return clone;
//   } else {
//
//     let proxiedThisRef;
//     proxiedThisRef = new Proxy(clone, {
//       // NOTE: if you edit this, edit the same one in evaluateSquareBlock
//       get: function(target, property, receiver) {
//         if(property === "$output") {
//           return undefined;
//         } else if(property === "___isLocalCall") {
//           return true;
//         } else {
//
//           let desc = Object.getOwnPropertyDescriptor(target, property);
//           if(!desc) {
//             perchanceError(`The '${property}' property doesn't exist within '${target.getName}'.`, ctxInfo.declarationLineNumber);
//             return;
//           }
//           if(desc.get) {
//             return desc.get.bind(proxiedThisRef)();
//           } else if(desc.value && typeof desc.value === 'function') {
//             return desc.value.bind(proxiedThisRef);
//           } else {
//             return target[property];
//           }
//
//         }
//       }
//     });
//
//     return proxiedThisRef;
//
//   }
// };

let consumableListMethod = function() {


  // it's called consumable*List* because it only makes sense to call it on a list-oriented node

  // let list = this.createClone;
  // Object.defineProperty(list, "isConsumable", {value:true, configurable:true, writable:true}); // not $-prefixed because it should be publicly changable
  // return list;

  let proxy = new Proxy(this, {
    alreadyConsumedItems:new Set(),
    get: function(target, property) {
      if(property === "selectOne") {
        // NOTE: inline consumable lists are handled in the toStringMethod
        let selectedNode = selectOneMethod.bind(proxy)();
        if(selectedNode && selectedNode.$nodeType) { // make sure it's a node (could be an error string)
          this.alreadyConsumedItems.add(selectedNode);
        }
        return selectedNode;
      } else if(property === "getLength") {
        if(Object.keys(target).includes("getLength")) return target["getLength"];
        else return Object.keys(target).length - this.alreadyConsumedItems.size;
      } else if(property === "$alreadyConsumedItems") {
        return this.alreadyConsumedItems;
      } else if(textTransformNames.includes(property)) {
        return proxy.selectOne[property]; // added due to this problem: https://www.reddit.com/r/perchance/comments/7uw0sp/errors_with_consumablelist_and_uppercase_together/
      } else {
        // TODO: strangely, the return value here seems to be automatically bound to this proxy.
        // so it also handles toString and valueOf methods like we want it to
        return target[property];
      }
    },
  });
  return proxy;

};


let valueOfMethod = function(key) {
  let str = this.toString();
  if(String(Number(str)) === str) {
    return Number(str);
  } else {
    return str;
  }
};


// let idMethod = function(key) {
//
//   if(typeof key !== 'string') {
//     key = key.toString();
//   }
//
//   // TODO***: (BIG ONE): clone `this` and set its toString method so it
//   // always returns the $child string that was selected below BUT ALSO can
//   // still have its sub-properties accessed. (i.e. the only difference between
//   // the clone and the original is that the clone always returns a static string
//   // when toString is called (instead of selecting a random child - or returning the
//   // evaluated $value text in the case of a $value node))
//   // BUT HERE'S THING THING: if a child node is selected and it's "the {cat|dog}", do
//   // future requests to that id return "the {cat|dog}" or the EVALUATED version of
//   // that text? So we can store either:
//   //  - the node itself
//   //  - the text of the node
//   //  - the *evaluated* text of the node
//   // and return it next time that id is called again. Which one? The ideal one seems
//   // to depend on the context:
//   /*
//
//   // here, the node one doesn't make sense, but the other two work fine
//   animal
//     dog
//     cat
//     pig
//
//   // here, the node one doesn't make sense, and the other two behave differently.
//   // it seems like storing the *evaluated* text would make the most sense in this case.
//   sentence
//     I'm {going|running} to the {shops|hotel}.
//     That's a {great|silly|quaint} handbag you've got there.
//   // and actually, I can't think of an example where storing the un-evaluated text would
//   // make sense.
//
//   NEW TACK: curly notation for the id thing because it will be so common:
//   {animal#1} -> [animal.$id(1)]
//   but wait - I still need to decide on id behavior...
//   -----
//   The cloning behaviour makes the most sense? Need to bite the bullet and spend a day perfecting this.
//   It's an integral part of the last big trio (id/unique/remember)
//
//
//   */
//
//   if(this.$idStore[key]) {
//     return this.$idStore[key];
//   } else {
//     let child = this.$child;
//
//     // if its text is dynamic, we need to evaluate it (they expect the same text each time!).
//     // if it's not, there's no need to evaluate it.
//     // note that if it IS dynamic, then there won't be any child properties, so we can just store
//     // and return a plain old string!
//     let blocks = splitTextAtAllBlocks(child.$text);
//     if(blocks.length > 1 || blocks[0][0] === "[" || blocks[0][0] === "{") {
//       child = child.toString();
//     }
//
//     this.$idStore[key] = child;
//     return this.$idStore[key];
//   }
//
// };
// let setIdMethod = function(key) {
//   if(this.$idStore[key]) {
//     delete this.$idStore[key];
//   }
//   return this.$id(key);
// };


let selectAllMethod = function() {

  if(this.$output !== undefined) {
    return [this.$output]; // make it an array because why not. (consistency is nice)
  }

  if(this.$nodeType === "value") {
    let text = this.$value;
    if(text[0] === "{" && text[text.length-1] === "}") {
      let items = splitUpCurlyOrBlock(text.substr(1, text.length-2));
      if(items) { // i.e. if it's a valid curly OR block
        return items;
      } else {
        perchanceError(`You've called 'selectAll' on something that doesn't appear to be a list?`, this.$declarationLineNumber);
        return;
      }
    } else {
      perchanceError(`You've called 'selectAll' on something that doesn't appear to be a list?`, this.$declarationLineNumber);
      return;
    }
  }

  let arr = [];
  for(let key of this.$children) {
    arr.push(this[key]);
  }
  arr.toString = function() { return this.join(""); }; // This makes sense, right? Who would selectAll, but then expect a single random item? That would be silly.
  return arr;
};




let selectOneMethod = function() {

  let consumedNodes = new Set();
  if(this.$alreadyConsumedItems) {
    consumedNodes = this.$alreadyConsumedItems; // this is a property of the consumableList proxy handler that we expose
  }

  if(this.$output !== undefined) {
    return this.$output;
  }

  if(this.$nodeType === "value") {
    // I'm pretty sure we want to `toString` (evaulate) it because why would you call selectOne on a value node otherwise?
    // Consider these two examples:
    // height = {1-10}
    // height
    //   {1-10}
    // You might think we should treat the former the same way as the latter (i.e. NOT evaluate it), but that doesn't make sense in terms of the user's intention.
    // I'm pretty sure I've made the right decision here but hopefully the beta testers will surface any mistakes in my reasoning.
    let result = this.toString();
    if(String(Number(result)) === result) return Number(result);
    else return result;
  }

  let textNodes = [];
  let oddsSum = 0;
  let oddsArray = [];

  for(let key of this.$children) {
    let node = this[key];
    if(!consumedNodes.has(node)) {
      textNodes.push(node);
      let odds = node.$odds; // remember, $odds is a getter and could be dynamic, so we musn't call it multiple times and expect the same result
      oddsSum += odds;
      oddsArray.push(odds);
    }
  }

  if(textNodes.length === 0) {
    if(consumedNodes.size > 0) return `(no more items in the consumable '${this.$text}' list)`;
    else return evaluateText(this.$root, this.$parent, this.$text, {declarationLineNumber:this.$declarationLineNumber}); // we need to return the text if no children, otherwise we can't do nice stuff like this: https://www.reddit.com/r/perchance/comments/6g1uqk/fixed_variables/dio2da4/
    // and we need to *evaluate* the text because otherwise we couldn't do `c = b.selectOne.selectOne` in this example: https://www.reddit.com/r/perchance/comments/6qqc4d/items_in_shorthand_lists_arent_always_stored/dl01lkv/

    //else return `('${this.$text}' is not a list)`;
    // don't throw error because it's okay for a node not to have children
    //console.error(`Error trying to get child nodes of '${this.$text}' which was declared on line number ${this.$declarationLineNumber}.`);
    // if(this.isConsumable) return `(no more items in the consumable '${this.$text}' list)`;
    // else return `('${this.$text}' is not a list)`; // TODO***: return `this.$text` here since it's not consumable and has no children?
  }

  // choose random position in oddsSum range
  let oddsSumStopPoint = oddsSum*Math.random();
  let selectedTextNode = null;
  let oddsSumForChoice = 0;

  for(let i = 0; i < textNodes.length; i++) {
    oddsSumForChoice += oddsArray[i];
    if(oddsSumForChoice >= oddsSumStopPoint) {
      selectedTextNode = textNodes[i];
      break;
    }
  }

  if(selectedTextNode === null) {
    perchanceError(`This shouldn't happen! This may be a problem with the Perchance engine. Please report this bug to <a href='http://reddit.com/r/perchance'>reddit.com/r/perchance</a>. A text node couldn't be picked during a random selection in a node's .toString() function. Here's some extra details for the bug report: this.$text=${this.$text}; this.$children=${this.$children.join(",")}; this.$declarationLineNumber=${this.$declarationLineNumber}`);
    console.log(this, textNodes);
    console.error("Returning first text node rather than random one to prevent crashing while debugging.");
    return textNodes[0];
  }

  // if(this.isConsumable) {
  //   let text = selectedTextNode.$text;
  //   this.$children = this.$children.filter(c => c !== text);
  //   delete this[text];
  // }

  return selectedTextNode;

}


let toStringMethod = function() {

  // TODO***: use getOwnPropertyDescriptor to detect $output? since it could be defined and yet return undefined
  //          make sure you update other methods too
  if(this.$output !== undefined) {
    return this.$output.toString();
  }

  if(this.$nodeType === "value") {
    if(typeof this.$value === "number")  { return this.$value; }
    else {
      // if it's a consumableList and is plain inline notation like {1|2|3|4|...} with nothing before or after, then let's consume it
      let text = this.$value;
      if(this.$alreadyConsumedItems && text[0] === "{" && text[text.length-1] === "}") {
        let items = splitUpCurlyOrBlock(text.substr(1, text.length-2));
        if(items) { // i.e. if it's a valid curly OR block
          // remove already consumed items
          items = items.filter(i => !this.$alreadyConsumedItems.has( getTextOddsDetails(i).textWithoutOdds || i )); // "|| i" needed because getTextOddsDetails returns false if no odds details
          if(items.length === 0) return `(inline consumable list '${this.$key}' has no more items)`;
          // choose an item
          let chosenItem = chooseRandomTextByOdds(this.$root, this.$parent, items);
          // add the chosen item to $alreadyConsumedItems
          this.$alreadyConsumedItems.add(chosenItem);
          // return the chosen item
          return chosenItem;
        }
      }
      if(this.$alreadyConsumedItems) perchanceError(`You tried to make this into a consumable list: <code>${escapeHTMLSpecialChars(this.$key)} = ${escapeHTMLSpecialChars(this.$value)}</code>, but for an inline item to be consumable, it must be of the format <code>a = {b|c|d}</code> and cannot have anything outside of the curly brackets (e.g. you could not make <code>a = {b|c|d}efg</code> consumable).`, this.$declarationLineNumber);
      return evaluateText(this.$root, this.$parent, this.$value, {declarationLineNumber:this.$declarationLineNumber});
    }
  }

  // toString treats childless nodes differently to ones that have children (i.e. items that are themselves lists)
  // this sounds like a terrible idea at first, but I've put a bit of thought into it and it seems like the best option
  // so that newbies don't have to understand how the engine works just to simply do: [f = flower.selectOne]. The
  // alternative would be to make them do [f = flower.selectOne.itemName] which is ridiculous.
  // If you think about it, this approach actually makes a bit of sense. If `this` node is itself a list, then that's
  // an important fundamental difference, and so a difference in behaviour isn't really too unexpected.
  // What we're basically saying is that leaves are treated differently to branches. The awesome part about this
  // approach is that it alls us to do `[a = animal.selectOne] ... [a.genus]` - i.e. we can access the *properties*
  // of the selected animal. [a=animal.outputText] doesn't allow us to do this.
  if(this.$children.length === 0) {
    let result = evaluateText(this.$root, this.$parent, this.$text, {declarationLineNumber:this.$declarationLineNumber});
    return result;
  }

  if(this.$children.length > 0) {

    let child = this.selectOne
    if(typeof child === 'string') { // e.g., if it is an error message
      return child;
    }
    let text = child.$text;
    let declarationLineNumber = child.$declarationLineNumber;

    let result = evaluateText(this.$root, child.$parent, text, {declarationLineNumber});
    return result;

  }

};


// let addItemMethod = function(key) {
//   this.$children.push(key);
//   this[key] = undefined;
//   console.log("THIS NEEDS FIXING! (see TODO, below this line)")
//   // TODO: fix this? what if they want to add a child of the added child? needs to be a *proper* node?
//   // TODO: implement $addChildren and $removeChildren methods ($addChild and $removeChild should really just be aliases of these)
// };
// let removeItemMethod = function(key) {
//   this.$children.filter(k => k !== key);
//   delete this[key];
//   // TODO: verify that this works and makes sense
// };

let $oddsMethod = function() {

  if(this.$oddsText == '1') return 1;
  if( String(Number(this.$oddsText)) === this.$oddsText ) return Number(this.$oddsText);

  // NOTE: must use $oddsText odds rather than this.$odds, because this is the definition of $odds! (it'd be recursive)
  if(typeof this.$oddsText !== 'string') {
    perchanceError(`This shouldn't happen. This may be a problem with the Perchance engine. Please report this bug to <a href='http://reddit.com/r/perchance'>reddit.com/r/perchance</a>. The odds property of this node isn't a string. Here's some extra details for the bug report: this.$text=${escapeHTMLSpecialChars(this.$text)}; this.$children=${escapeHTMLSpecialChars(this.$children.join(","))}; this.$declarationLineNumber=${escapeHTMLSpecialChars(this.$declarationLineNumber)}; this.$oddsText=${escapeHTMLSpecialChars(this.$oddsText)}`);
    return 1;
  }

  let evaluatedOdds = oddsTextToNumber(this.$root, this.$parent, this.$oddsText, {declarationLineNumber:this.$declarationLineNumber});
  if(typeof evaluatedOdds === 'number') {
    return evaluatedOdds;
  } else {
    // TODO: potentially convert strings to numbers using eval (if it is a number, obviously). The reason
    // I'm not doing it yet is because I may do string->number conversions automatically across the whole system.
    // i.e. in the evaluateSquareBlock function itself.
    perchanceError(`The '^' character is used to specify how likely an item is of being chosen during a random selection. This line appears to have a '^' character, but the text after that character (<b>${escapeHTMLSpecialChars(this.$oddsText)}</b>) isn't a number, or didn't evaluate to a number. You're allowed to use square and curly bracket expressions to randomly/dynamically determine the odds, but these expressions must evaluate to a number. In this case your odds expression didn't result in a number.`, this.$declarationLineNumber);

    return 1;
  }

};

// let shuffleMethod = function(numShuffles) {
//
//   // TODO***: can't order object keys, so this method is useless on nodes (but useful for arrays and strings)
//
//   if(numShuffles === undefined) {
//
//     var array = this.$children;
//     var currentIndex = array.length, temporaryValue, randomIndex;
//     // While there remain elements to shuffle...
//     while (0 !== currentIndex) {
//       // Pick a remaining element...
//       randomIndex = Math.floor(Math.random() * currentIndex);
//       currentIndex -= 1;
//       // And swap it with the current element.
//       temporaryValue = array[currentIndex];
//       array[currentIndex] = array[randomIndex];
//       array[randomIndex] = temporaryValue;
//     }
//     array = array.map(c => this[c]); // map to actual node objects
//     array.toString = function() { this.join(""); }
//     return array;
//
//   } else {
//
//     let text = this.toString().split("");
//     for(let i = 0; i < numShuffles; i++) {
//       let i1 = Math.floor(text.length*Math.random());
//       let i2 = Math.floor(text.length*Math.random());
//       let c1 = text[i1];
//       let c2 = text[i2];
//       text[i1] = c2;
//       text[i2] = c1;
//     }
//     return text.join("");
//
//   }
//
// }


let joinItemsMethod = function(str) {

  if(this.$output !== undefined) {
    return this.$output.toString();
  }

  let arr = [];
  for(let c of this.$children) {
    arr.push(this[c].getName);
  }
  return arr.joinItems(str+"");
};


let selectUniqueMethod = function(...a) {
  return this.consumableList.selectMany(...a);
};

let selectManyMethod = function(...a) {

  let num;
  if(a.length === 1) {
    if(Array.isArray(a[0])) {
      num = Number(a[0][Math.floor(Math.random()*a[0].length)]);
    } else {
      num = Number(a[0]);
    }
  } else if(a.length === 2) {
    num = Number(a[0]) + Math.round(Math.random()*(a[1]-a[0]));
  } else if(a.length > 2) {
    num = Number(a[Math.floor(Math.random()*a.length)]);
  }
  if(isNaN(num) || typeof num !== 'number') {
    if(a.length === 0) {
      perchanceError(`You didn't give the selectMany() function any inputs when you used it on the node with the text "${escapeHTMLSpecialChars(this.$text || this)}". You need to give it at least one input so it knows how long the list/array should be.`);
    } else {
      perchanceError(`There's a problem with the inputs that you provided to the "selectMany" function when you used it on the node with the text "${escapeHTMLSpecialChars(this.$text || this)}". You have given it the following input${a.length == 1 ? "" : "s"}: <b>${escapeHTMLSpecialChars(a.join("</b>, <b>"))}</b>. ${a.length == 1 ? "This" : "These"} input${a.length == 1 ? "" : "s"} should be numeric (i.e. ${a.length == 1 ? "it" : "they"} should be${a.length == 1 ? " a " : " "} number${a.length == 1 ? "" : "s"}).`);
    }
    return ["(syntax error)"];
  }
  let arr = [];
  for(let i = 0; i < num; i++) {
    arr.push(this.selectOne);
  }
  // overwrite default array behaviour (selects a random one)
  // in the case where they don't specify a join() after the repeat:
  arr.toString = function() { return this.join(""); };
  return arr;
};



let titleCaseMethod = function() {
  return this.toString().split(' ').map((s) => (s.slice(0, 1).toUpperCase() + s.slice(1).toLowerCase())).join(' ');
};
let sentenceCaseMethod = function() {
  return this.toString().split(/([!?.]+)/g).map((s) => {
    let i = s.search(/[a-zA-Z]/);
    let a = s.slice(0, i);
    let b = s.slice(i, i+1).toUpperCase();
    let c = s.slice(i+1);
    return a + b + c;
  }).join("");
};
let upperCaseMethod = function() {
  //debugger;
  return this.toString().toUpperCase();
};
let lowerCaseMethod = function() {
  return this.toString().toLowerCase();
};

let pluralFormMethod = function() {
  // TODO***: fix this! if it doesn't detect it as a noun it omits it or ignores it - need a really good (maybe seperate from compromise?) lib to handle this
  let input = this.toString();
  let output = nlp(input).nouns().toPlural().out("text");
  return output === "" ? input : output;
};
let singularFormMethod = function() {
  // TODO***: fix this! if it doesn't detect it as a noun it omits it or ignores it - need a really good (maybe seperate from compromise?) lib to handle this
  let input = this.toString();
  let output = nlp(input).nouns().toSingular().out("text");
  return output === "" ? input : output;
};


let nlpCompromiseAddedWords = {abolish:"Verb",abound:"Verb",abstract:"Verb",accent:"Verb",accomplish:"Verb",admonish:"Verb",alert:"Verb",ally:"Verb",appropriate:"Verb",astonish:"Verb",auction:"Verb",audition:"Verb",average:"Verb",awake:"Verb",award:"Verb",back:"Verb",backpedal:"Verb",banish:"Verb",bank:"Verb",bankrupt:"Verb",better:"Verb",bill:"Verb",blacklist:"Verb",bless:"Verb",blind:"Verb",bloody:"Verb",blossom:"Verb",board:"Verb",bob:"Verb",bombard:"Verb",bottle:"Verb",brave:"Verb",breakfast:"Verb",brief:"Verb",bus:"Verb",busy:"Verb",butcher:"Verb",butter:"Verb",cake:"Verb",calm:"Verb",captain:"Verb",care:"Verb",cash:"Verb",caution:"Verb",center:"Verb",cherish:"Verb",christen:"Verb",chronicle:"Verb",chuck:"Verb",circumvent:"Verb",clean:"Verb",clear:"Verb",club:"Verb",commission:"Verb",complete:"Verb",comply:"Verb",conceal:"Verb",condition:"Verb",content:"Verb",contrive:"Verb",cool:"Verb",correct:"Verb",corrupt:"Verb",critique:"Verb",cup:"Verb",dawn:"Verb",degenerate:"Verb",demolish:"Verb",deprive:"Verb",derive:"Verb",design:"Verb",diminish:"Verb",disable:"Verb",discard:"Verb",disregard:"Verb",don:"Verb",double:"Verb",down:"Verb",dry:"Verb",dull:"Verb",elaborate:"Verb",embellish:"Verb",empty:"Verb",engineer:"Verb",enlist:"Verb",equal:"Verb",erect:"Verb",exact:"Verb",faint:"Verb",fake:"Verb",fancy:"Verb",fine:"Verb",firm:"Verb",fish:"Verb",fit:"Verb",flatter:"Verb",flicker:"Verb",flourish:"Verb",fly:"Verb",ford:"Verb",forward:"Verb",foster:"Verb",foul:"Verb",free:"Verb",frequent:"Verb",fund:"Verb",furnish:"Verb",further:"Verb",garnish:"Verb",gossip:"Verb",grace:"Verb",grant:"Verb",ground:"Verb",group:"Verb",herald:"Verb",hoist:"Verb",hollow:"Verb",hope:"Verb",house:"Verb",hum:"Verb",humble:"Verb",ice:"Verb",impoverish:"Verb",indent:"Verb",index:"Verb",initial:"Verb",institute:"Verb",inventory:"Verb",knot:"Verb",last:"Verb",lavish:"Verb",lean:"Verb",light:"Verb",lobby:"Verb",long:"Verb",lower:"Verb",lunch:"Verb",mail:"Verb",man:"Verb",mark:"Verb",marshal:"Verb",mature:"Verb",mean:"Verb",mellow:"Verb",milk:"Verb",mimic:"Verb",mine:"Verb",model:"Verb",moderate:"Verb",motion:"Verb",mute:"Verb",narrow:"Verb",near:"Verb",nestle:"Verb",nick:"Verb",number:"Verb",nurse:"Verb",obscure:"Verb",oil:"Verb",open:"Verb",outlive:"Verb",overcrowd:"Verb",overdo:"Verb",overeat:"Verb",overflow:"Verb",overhaul:"Verb",overhear:"Verb",overheat:"Verb",overload:"Verb",overlook:"Verb",overpower:"Verb",overrule:"Verb",oversee:"Verb",overshadow:"Verb",oversleep:"Verb",overthrow:"Verb",overturn:"Verb",own:"Verb",panic:"Verb",part:"Verb",partition:"Verb",patent:"Verb",patrol:"Verb",pedal:"Verb",pepper:"Verb",perfect:"Verb",perish:"Verb",petition:"Verb",plant:"Verb",please:"Verb",ply:"Verb",police:"Verb",polish:"Verb",position:"Verb",post:"Verb",pound:"Verb",power:"Verb",press:"Verb",pressure:"Verb",prime:"Verb",pucker:"Verb",punish:"Verb",query:"Verb",quiz:"Verb",rain:"Verb",rally:"Verb",ration:"Verb",rear:"Verb",rebel:"Verb",rebound:"Verb",refurbish:"Verb",relish:"Verb",repeal:"Verb",replenish:"Verb",requisition:"Verb",research:"Verb",reserve:"Verb",rev:"Verb",revive:"Verb",right:"Verb",ring:"Verb",rival:"Verb",round:"Verb",salt:"Verb",sanction:"Verb",scent:"Verb",school:"Verb",secure:"Verb",separate:"Verb",service:"Verb",shut:"Verb",signal:"Verb",silhouette:"Verb",single:"Verb",slow:"Verb",smooth:"Verb",snicker:"Verb",snow:"Verb",sour:"Verb",space:"Verb",spare:"Verb",speed:"Verb",spike:"Verb",spiral:"Verb",spy:"Verb",square:"Verb",stable:"Verb",station:"Verb",steady:"Verb",steam:"Verb",stuff:"Verb",sue:"Verb",tame:"Verb",tan:"Verb",taper:"Verb",tarnish:"Verb",tender:"Verb",tense:"Verb",thin:"Verb",thunder:"Verb",till:"Verb",time:"Verb",top:"Verb",total:"Verb",trouble:"Verb",undercut:"Verb",underline:"Verb",undertake:"Verb",undervalue:"Verb",up:"Verb",upset:"Verb",utter:"Verb",vanish:"Verb",varnish:"Verb",void:"Verb",wade:"Verb",warm:"Verb",water:"Verb",weather:"Verb",wed:"Verb",welcome:"Verb",woo:"Verb",wound:"Verb"};
let pastTenseMethod = function() {
  let word = this.toString();
  if(word === "hope" || word === "hopes" || word === "hoped" || word === "hoping") return "hoped";
  if(word === "bill" || word === "bills" || word === "billed" || word === "billing") return "billed";
  if(word === "dawn" || word === "dawns" || word === "dawned" || word === "dawning") return "dawned";
  //return nlp(this.toString(), nlpCompromiseAddedWords).sentences().toPastTense().out("text")
  let out = nlp("They "+this.toString(), nlpCompromiseAddedWords).verbs().conjugate()[0];
  return out ? out.PastTense : this.toString()+"ed";
};
let futureTenseMethod = function() {
  let word = this.toString();
  if(word === "hope" || word === "hopes" || word === "hoped" || word === "hoping") return "will hope";
  if(word === "bill" || word === "bills" || word === "billed" || word === "billing") return "will bill";
  if(word === "dawn" || word === "dawns" || word === "dawned" || word === "dawning") return "will dawn";
  //return nlp(this.toString(), nlpCompromiseAddedWords).sentences().toFutureTense().out("text")
  let out = nlp("They "+this.toString(), nlpCompromiseAddedWords).verbs().conjugate()[0];
  return out ? out.FutureTense : this.toString()+"ed";
};
let presentTenseMethod = function() {
  let word = this.toString();
  if(word === "hope" || word === "hopes" || word === "hoped" || word === "hoping") return "hopes";
  if(word === "bill" || word === "bills" || word === "billed" || word === "billing") return "bills";
  if(word === "dawn" || word === "dawns" || word === "dawned" || word === "dawning") return "dawns";
  //return nlp(this.toString(), nlpCompromiseAddedWords).sentences().toPresentTense().out("text")
  let out = nlp("They "+this.toString(), nlpCompromiseAddedWords).verbs().conjugate()[0];
  return out ? out.PresentTense : this.toString()+"ed";
};

let negativeFormMethod = function() {
  return nlp(this.toString()).sentences().toNegative().out("text");
};

// let ordinalMethod = function() {
//   return nlp.getOrdinal(this.toString());
// };
// let withArticleMethod = function() {
//   return nlp.getWithArticle(this.toString());
// };</script> <script>function evaluateSquareBlock(root, thisRef, expression, ctxInfo={}) {

  // NOTE: if the `with` keyword ever gets deprecated, you can just craft up a function declaration with each
  // of the root variables so they get passed in as the evaled function's arguments (simple!)
  // new Function(param1, ..., paramN, funcBody) -> http://www.2ality.com/2014/01/eval.html
  // only thing is: i need to make sure the getters are still triggered on the proxy when I grab the properties (why wouldn't they be?). hmm
  // oh but also I don't want to trigger ALL of them (could be a couple of thousand params for every single square bloc executed...)

  let originalExpression = expression;
  expression = expression.trim();
  //expression = prependReturnKeywordIfNeeded(expression);
  //let evalJSCode = eval.bind(thisRef);

  // **WITHIN a node**, we don't want references to `this` to result in "$output"
  // Otherwise we're very limited in terms of how we can interact with "local" items (can't use selectOne, etc. EVEN IN `$output` (since it would reference itself no matter what))
  let proxiedThisRef;
  if(Object.getOwnPropertyDescriptor(thisRef, "$output")) {

    proxiedThisRef = new Proxy(thisRef, {
      get: function(target, property, receiver) {
        if(property === "$output") {
          return undefined;
        } else if(property === "___isLocalCall") {
          return true;
        } else {

          let desc = Object.getOwnPropertyDescriptor(target, property);
          if(!desc) {
            //perchanceError(`The '${property}' property doesn't exist within '${target.$text}'.`, ctxInfo.declarationLineNumber);
            return undefined;
          }
          if(desc.get) {
            return desc.get.bind(proxiedThisRef)();
          } else if(desc.value && typeof desc.value === 'function') {
            return desc.value.bind(proxiedThisRef);
          } else {
            return target[property];
          }

        }
      }
    });

    thisRef = proxiedThisRef;

  }

  try {

    let tempHasHandlerHolder;
    if(root.___isProxy) {
      tempHasHandlerHolder = root.___proxyHandler.has;
      root.___proxyHandler.has = window.rootProxyHasHandler_Greedy.bind(root.___proxyHandler);
    }
    let result = (function(){ return eval("with(root){"+expression+"}"); }).apply(thisRef);
    if(root.___isProxy) root.___proxyHandler.has = tempHasHandlerHolder; //.bind(root.___proxyHandler);

    if(result === undefined) {
      perchanceError(`The expression '[${escapeHTMLSpecialChars(originalExpression)}]' returned nothing (<code>undefined</code>). There doesn't seem to be anything particularly wrong with your <i>syntax</i>, but you may be trying to reference a list, property or function that doesn't exist. Here are some common causes of this error: <ul><li>You tried to reference a list/variable that you haven't created. For example, if you wrote [animal], but there was no top-level list called "animal", then you would get this error</li><li>If you misspell a property/function name, then you'll get this error. For example "[noun.pluralFormm]" would produce this error because "pluralForm" has been misspelled</li><li>If you try to access a property of an object that doesn't exist, or that evaluates to something which doesn't exist, then you'll get this error.</li></ul> These errors can sometimes be particularly hard to debug, so after you've given it your best shot, please post a question over on the <a href="http://reddit.com/r/perchance">perchance community</a> and a friendly community member will help you out :)`, ctxInfo.declarationLineNumber);
      return undefined;
    } else {
      if(typeof result === 'string' && String(Number(result)) === result) {
        return Number(result);
      } else {
        return result;
      }
    }
  } catch(e) {
    if(e.message.toLowerCase().includes("call stack size")) {
      perchanceError(`There's a problem with the syntax of this expression: '[${escapeHTMLSpecialChars(originalExpression)}]'. Here's the message that was returned when execution failed: <b>${escapeHTMLSpecialChars(e.message)}</b>. It may be that you've accidentally created an "infinite loop" by making a list reference itself, or something like that.`, ctxInfo.declarationLineNumber);
    } else {
      perchanceError(`There's a problem with the syntax of this expression: '[${escapeHTMLSpecialChars(originalExpression)}]'. Here's the message that was returned when execution failed: <b>${escapeHTMLSpecialChars(e.message)}</b>. Here are some common mistakes: <ul><li>you tried to reference a variable/list that you haven't created</li><li><b>top-level</b> list names should only contain letters, numbers, underscores or dollar signs, and aren't allowed to begin with a number or contain any spaces. For non-top-level lists, if you want to reference a list by its name, you should also use the same naming rules. For example "[first name]" and "[2words]" will not work. Instead, you should use "[firstName]" and "[twoWords]" or something like those.</li><li>list names are case-sensitive: "[animal]" is different to [Animal]</li></ul>`, ctxInfo.declarationLineNumber);
    }
    return "(syntax error)";
  }
}

// function prependReturnKeywordIfNeeded(expression) {
//   // if single line without return statement, add it
//   if(/\n/.test(expression) || /(^|\s|;|\}|\{|\)|\()return\s/.test(expression)) {
//     return expression;
//   } else {
//     return "return "+expression;
//   }
// }


// function expressionHasSemiColon(text) {
//
//   let escaped = false;
//   let inJSExprString1 = false;
//   let inJSExprString2 = false;
//   let inJSExprString3 = false;
//   let inRegExp = false;
//
//   for(let i = 0; i < text.length; i++) {
//     if(i !== 0) {
//       if(text[i-1] !== "\\") { escaped = false; }
//     }
//     if(text[i] === "\\") { escaped = !escaped; }
//
//     ////////////////////////////////////
//     //           skip regexp          //
//     ////////////////////////////////////
//     if(!inRegExp && !inJSExprString1 && !inJSExprString2 && !inJSExprString3 && text[i] === "/") { inRegExp = true; continue; }
//     if(inRegExp && text[i] !== "/") { continue; }
//     if(inRegExp && !escaped && text[i] === "/") { inRegExp = false; continue; }
//
//
//     ////////////////////////////////////
//     //          skip strings          //
//     ////////////////////////////////////
//     if(!inJSExprString1 && !inRegExp && text[i] === "\"") { inJSExprString1 = true; continue; }
//     if(inJSExprString1 && !escaped && text[i] !== "\"") { continue; }
//     if(inJSExprString1 && !escaped && text[i] === "\"") { inJSExprString1 = false; continue; }
//
//     if(!inJSExprString2 && !inRegExp && text[i] === "'") { inJSExprString2 = true; continue; }
//     if(inJSExprString2 && !escaped && text[i] !== "'") { continue; }
//     if(inJSExprString2 && !escaped && text[i] === "'") { inJSExprString2 = false; continue; }
//
//     if(!inJSExprString3 && !inRegExp && text[i] === "`") { inJSExprString3 = true; continue; }
//     if(inJSExprString3 && !escaped && text[i] !== "`") { continue; }
//     if(inJSExprString3 && !escaped && text[i] === "`") { inJSExprString3 = false; continue; }
//
//     if(!inJSExprString3 && !escaped && text[i] === "`") {
//
//     if(!inJSExprString1 && !inJSExprString2 && !inJSExprString3 && !inRegExp) {
//
//     }
//
//   }
//
//   return false;
//
// }</script> <script>// Heads up: This code is extremely messy and hacked together. It really is quite
// embarrassing, especially the Proxy stuff. A version 2 is definitely in order,
// but I probably won't have time to do that for quite a while. -Joe

let NODE_ODDS_INDICATOR_CHARACTER = "^";

// KNOWN BUG (not a huuuge deal, but slightly annoying):
// If we've got:
// abc
//   a=10
// Then [abc=abc.a] returns undefined instead of 10 (but [abc=abc.a, abc] works fine)
// I think this has to do with the toString-ification of abc.a happening *after* the `set` handler has run?
// Here's a minimal example that shows everything works as expected witha simple proxy setup:
/*
    var prox = new Proxy({a:10}, {
     set(target, property, value) { target[property] = value*2; },
        get(target, property) { return target[property]; },
    });
    console.log((prox = prox.a)+"");
*/
// So there's something mildly unusual going on there.

window.rootProxyHasHandler; // set after rootProxy creation
window.rootProxyHasHandler_Greedy = function(target, prop) {
  if(prop in window) {
    if(prop in this.executeChain(target, this.capturedCalls)) {
      return true;
    } else {
      return false; // don't be so greedy that we steal window's props even when `window` has it and `root` doesn't.
    }
  } else {
    return true;
  }
}

// window.globalProxyLoopCount = 0;
// function proxyLoopCountResetLoop() {
//   window.globalProxyLoopCount = 0;
//   setTimeout(proxyLoopCountResetLoop, 1000);
// }
// proxyLoopCountResetLoop();

function createPerchanceTree(text, moduleName, backupModuleName /*<-- this is for the hacky node creation function*/, doNotPreprocess) {

  /*
    There are two main steps in creating the tree:
    1. We split up the text into lines and collect all the data we need about each line (e.g. odds, line number, etc.) and tidy it up as necessary (e.g. .trim() it, or remove it completely if it's a comment). Then we group sets of lines that are below a function header into said function header. We create all the parent/child hierarchy links along the way.
    2. We turn all that node data into a neat "perchance tree" which has the properties required to make the DSL work nicely, and we attach all the perchance methods to each node. Then we return the root node in this tree.
  */

  // remove inline comments
  let lines = text.replace(/\r/g,"").split("\n");
  for(let i = 0; i < lines.length; i++) {
    lines[i] = stripCommentFromLine(lines[i]);
  }

  // trim EMPTY lines (otherwise whitespace can throw indentation error in next step)
  // we need to keep blank lines so line numbers are preserved. they're removed in a bit
  lines = lines.map(text => /[^\s]/.test(text) ? text : text.trim());

  // mixed spaces and tabs -> only tabs
  for(let i = 0; i < lines.length; i++) {
    let normed = normaliseLineIndentsToTabs(lines[i]);
    if(normed === false) {
      perchanceError(`There appears to be an indenting error on this line near this text: "${escapeHTMLSpecialChars(lines[i].substr(0,30))}". Perchance lists should be indented with either one tab or two spaces. If you want to have a space before a list item, then you should start the item with "\\s" (backslash + "s") which will be converted into a space (you can read more about this in the <a href="/tutorial">tutorial</a>).`, i+1);
      return;
    } else {
      lines[i] = normed;
    }
  }

  // make lines objects
  for(let i = 0; i < lines.length; i++) {
    lines[i] = {
      text: lines[i],
      indents: lines[i].search(/[^\t]/), //index of first non-tab
      lineNumber:i+1, // plus one because line num start at 1 by convention
      children:[],
      parent: null,
      // REMEMBER: if you add anything here you need to add it to root line bject and line objects created in inline declarations
    }
    lines[i].text = lines[i].text.trim(); //trim away indents and end whitespace
  }

  // remove blank lines
  lines = lines.filter(l => l.text !== "");

  // create parent-child hierarchy
  let root = {
    text:"<root>",
    indents:-1,
    lineNumber:-1,
    children:[],
    parent: null,
    nodeType: "text",
    odds: "1",
    perchanceCode:"",
    //expressionArray: ["<root>"],
  };
  let indentOwners = {0:root}; // maps # indents of current line to correct parent
  for(let i = 0; i < lines.length; i++) {
    let line = lines[i];
    let indents = line.indents;
    if(indentOwners[indents]) {
      // this is child of indentOwners[indents]:
      indentOwners[indents].children.push(line);
      line.parent = indentOwners[indents];
      // this becomes owner of next indent level:
      indentOwners[indents+1] = line;
      // and *no one* owns the indent level after that:
      indentOwners[indents+2] = undefined;
    } else {
      perchanceError(`There appears to be an indenting error on this line near this text: "${escapeHTMLSpecialChars(line.text.substr(0,30))}". Perchance lists should be indented with either one tab or two spaces. If you want to have a space before a list item, then you should start the item with "\\s" (backslash + "s") which will be converted into a space (you can read more about this in the <a href="/tutorial">tutorial</a>).`, line.lineNumber);
      return;
    }
  }

  // for each node, get the perchance text required to create it:
  for(let i = 0; i < lines.length; i++) {
    lines[i].perchanceCode = lines[i].text;
    let j = 0;
    let parent = lines[i].parent;
    let ancestor = parent;
    while(1) {

      if(ancestor.parent === null) ancestor.perchanceCode += `${ancestor.perchanceCode ? "\n" : ""}` + lines[i].text; // handle case where ancestor === root node
      else ancestor.perchanceCode += "\n" + "  ".repeat(lines[i].indents - ancestor.indents) + lines[i].text;

      ancestor = ancestor.parent;
      if(!ancestor) break;

      if(j++ > 100000) {
        perchanceError(`Some sort of looping/recursion error has occured. Please make a post on the subreddit (reddit.com/r/perchance) so I can take a look at this. Thanks!`);
        return;
      }

    }
  }
  root.perchanceCode = text;

  // get node data for functions (pack all details into header node and remove children)
  // note that we need to handle functions first because otherwise lines of js will be
  // classed as other node types
  for(let i = 0; i < lines.length; i++) {
    let funcHeaderDetails = getFunctionHeaderDetails(lines[i].text);
    if(funcHeaderDetails) {
      lines[i].nodeType = "function";

      lines[i].functionName = funcHeaderDetails.name;
      lines[i].functionArgs = funcHeaderDetails.args; // <-- array of arg names
      // recursively collect all children, grandchildren, etc into one flat array:
      let children = lines[i].children;
      let j = 0;
      while(1) {
        if(j >= children.length) { break; }
        let c = children[j];
        children.splice(j+1, 0, ...c.children); // must put them in correct pos
        j++;
      }
      // remove children/grandchildren/... from lines array:
      for(let c of children) {
        lines = lines.filter(l => l !== c);
      }
      // concat children/grandchildren/... with newlines and add to functionBody property
      lines[i].functionBody = children.map(l => l.text).join("\n");
      // remove children
      lines[i].children = [];
    }
  }

  // get node data for inline functions
  for(let i = 0; i < lines.length; i++) {
    if(lines[i].nodeType) continue;
    let inlineFuncDetails = getInlineFunctionDetails(lines[i].text);
    if(inlineFuncDetails) {
      lines[i].nodeType = "function";

      // inline functions shouldn't have children
      if(lines[i].children.length > 0) {
        perchanceError(`It appears that you've tried to give an inline function children (child items). At this point, inline functions are not allowed to have children (though I could change this in the future if people need this feature). There's also the possibility that you accidentally created an inline function. Inline functions have the form: <b>functionName(input1, input2, ...) =&gt; functionBody</b>. If you'd like to use "=" in a literal sense, put a backslash character right before it like this: "\\=".`, lines[i].lineNumber);
        return;
      }

      lines[i].functionName = inlineFuncDetails.name;
      lines[i].functionArgs = inlineFuncDetails.args; // <-- array of arg names
      lines[i].functionBody = inlineFuncDetails.body;
    }
  }


  // TODO: process other node-types (list with args) here


  for(let i = 0; i < lines.length; i++) {
    if(lines[i].nodeType) continue;

    let details = getPrimitiveNodeDetails(lines[i].text);
    if(details) {
      // NOTE: We've discovered an inline/"primitive" thing, but here's the thing:
      //       If it's not a direct reference (i.e. value !== "[...]" or "{...}")
      //       but it DOES contain square/curly block(s), then we need to make it
      //       into a normal node with details.value as a child.
      //       See marker odj29hfi3j0d2kj0hx24f for the handling of $value nodes.
      //       The reason we need to do this is because if we had ``output = [prefix]-blah` (for example)
      //       then we couldn't call `output.selectMany(3)` on it if it was a $value node.
      //       Basically, the fact that I want to be able to create "direct references" with
      //       value nodes means a bunch of mucking around trying to make everything else work
      //       as expected.
      // let blocks = splitTextAtAllBlocks(details.value);
      // if(blocks.length > 1) {
      //   lines[i].nodeType = "text";
      //   lines[i].text = details.key;
      //   //lines[i].expressionArray = [details.key];
      //   let child = {
      //     text: details.value,
      //     indents: lines[i].indents+1,
      //     lineNumber:lines[i].lineNumber,
      //     children:[],
      //     parent: lines[i],
      //     nodeType:"text",
      //     odds:"1",
      //     //expressionArray: splitTextAtSquareBlocks(details.value),
      //   }
      //   lines[i].children.push(child);
      //   lines.splice(i+1, 0, child);
      // } else {
        lines[i].nodeType = "primitiveKeyValue";
        lines[i].primitiveKey = details.key;
        lines[i].primitiveValue = details.value;
      //}
    }

  }

  // extract all the node data (odds, expression array) for plain old text nodes
  for(let i = 0; i < lines.length; i++) {
    if(lines[i].nodeType) continue;

    // extract and remove odds stuff first:
    let oddsDetails = getTextOddsDetails(lines[i].text);
    let odds, textWithoutOdds;
    if(oddsDetails) {
      lines[i].nodeType = "text";
      lines[i].odds = oddsDetails.odds;
      lines[i].text = oddsDetails.textWithoutOdds.trim(); // <-- NOTE: spaces between end of text and odds notation are ignored in lists! thus we trim. (not in curly "or" blocks though)
    } else {
      lines[i].odds = "1"; // as string because all the others are strings - system is built to take strings and interpret them as expresions/numbers
    }

    lines[i].nodeType = "text";
    // let arr = splitTextAtSquareBlocks(lines[i].text);
    // if(arr) {
    //   lines[i].nodeType = "text";
    //   lines[i].expressionArray = arr;
    //   // if((lines[i].expressionArray.length > 1 || (lines[i].expressionArray.length === 1 && lines[i].expressionArray[0][0] === "[")) && lines[i].children.length > 0) {
    //   //   console.error(`Error on line number ${lines[i].lineNumber}. Lines with random variables shouldn't have children.`);
    //   //   return;
    //   // }
    // }

    // if(oddsDetails && !arr) {
    //   perchanceError(`It seems that you've got a '^' character where it shouldn't be. The '^' character is a special one that allows you to specify how likely a node is of being selected. This "odds notation" should not be present on functions or other non-text nodes because they aren't a part of the group which is randomly selected from (they are special children). If you want to use the odds character ("^") literally (i.e. not to declare likelihood), then you can put a backslash character before it like so: \\^`, lines[i].lineNumber);
    //   return;
    // }

  }

  // // warn for unclassified lines and then set nodeType as "text"
  // for(let i = 0; i < lines.length; i++) {
  //   if(!lines[i].nodeType) {
  //     perchanceError(`For some reason this line could not be classified properly. There may be something wrong with your syntax of this line, or it may be a bug with the Perchance engine. If you think that there's a bug, please report it here: <a href="http://reddit.com/r/perchance">reddit.com/r/perchance</a>. That would be very much appreciated! :)`, lines[i].lineNumber);
  //     lines[i].nodeType = "text";
  //     lines[i].expressionArray = [lines[i].text];
  //   }
  // }


  // next up, construct the actual perchance node tree.
  // first create a node for each line
  // then connect up parent/children
  //
  // we also the perchance methods including the .toString() function to each node.
  // the toString function is where the magic happens. calling
  // [myrootvar] will just return the myrootvar variable. when this
  // gets joined to a string, `myrootvar.toString()` is called which
  // recursively resolves it into an actual string value, taking into
  // account odds and other expressions (in expressionArrays) that it
  // finds along the way


  // 1. convert lines to perchance nodes
  let allNodes = [];
  lines.unshift(root);
  for(let i = 0; i < lines.length; i++) {

    lines[i].node = {};

    lines[i].node[Symbol.for("node data")] = { // TODO: why use symbol? just put it in a non-enumerable $data property? then fix up all references to it? TODO: can this be deleted after we're done creating tree?
      parentNode:null,
      childNodes:[],
      root:root,
      declarationLineNumber: lines[i].lineNumber,
      odds: null,
    };

    // make default function properties writable (not needed because we use simple objects now)
    // Object.defineProperty(lines[i].node, "name", {writable:true});
    // Object.defineProperty(lines[i].node, "length", {writable:true});

    Object.defineProperty(lines[i].node, "$root", {value:root.node, writable:true, configurable:true});
    Object.defineProperty(lines[i].node, "$declarationLineNumber", {value:lines[i].lineNumber, writable:true, configurable:true});
    Object.defineProperty(lines[i].node, "$moduleName", {value:moduleName, writable:true, configurable:true});
    Object.defineProperty(lines[i].node, Symbol.toPrimitive, {value:function(hint) {
      return this.valueOf();
      // if(hint === "default" || hint === "string") {
      //   return this.toString();
      // } else {
      //   return this.valueOf();
      // }
    }, writable:true, configurable:true});

    // add $valueChildren array which contains all children of type 'value' so we can get the "properties" of a node (for stuff like 'generateInstance' plugin or build-in feature)
    Object.defineProperty(lines[i].node, "$valueChildren", {value:[], writable:true, configurable:true});

    // this is used in isFunctionNode in the proxy stuff:
    Object.defineProperty(lines[i].node, "$functionChildren", {value:[], writable:true, configurable:true});

    Object.defineProperty(lines[i].node, "$perchanceCode", {value:lines[i].perchanceCode, writable:true, configurable:true});

    addNodeMethods(lines[i].node);

    allNodes.push(lines[i].node);

  }

  // 2. fill in parent/child references:
  for(let i = 0; i < lines.length; i++) {
    let node = lines[i].node;
    let nodeData = node[Symbol.for("node data")];
    if(i === 0) { // i.e. if root - (since root has no parent)
      nodeData.parentNode = null;
      Object.defineProperty(node, "$parent", {value:null, writable:true, configurable:true});
    } else {
      nodeData.parentNode = lines[i].parent.node;
      Object.defineProperty(node, "$parent", {value:lines[i].parent.node, writable:true, configurable:true}); // <-- give it a public reference to its parent that *isn't* enumerable
    }
    nodeData.childNodes = lines[i].children.map(line => line.node);
  }

  // 3. fill in the rest of the node details depending on the node type
  for(let i = 0; i < lines.length; i++) {
    let node = lines[i].node;
    let nodeData = lines[i].node[Symbol.for("node data")];

    // add normal text nodes
    if(lines[i].nodeType === "text") {
      nodeData.type = "text";
      nodeData.odds = lines[i].odds;
      //nodeData.expressionArray = lines[i].expressionArray;

      Object.defineProperty(lines[i].node, "$nodeType", {value:"normal", writable:true, configurable:true});
      Object.defineProperty(lines[i].node, "$oddsText", {value:lines[i].odds, writable:true, configurable:true});

      Object.defineProperty(lines[i].node, "$text", {value:lines[i].text, writable:true, configurable:true}); // <-- give it a public reference to its text that *isn't* enumerable
      if(node.$parent) { // i.e. if not root
        let key = node.$text;
        while(node.$parent[key] !== undefined) {// if there's already one called this, add {|} (hacky, but I think it's fine since they're just text nodes?)
          key += "{|}";
        }
        node.$parent[key] = node; // not via defineProperty, therefore it's enumerable
      }

    }

    // add user-defined functions
    if(lines[i].nodeType === "function") {
      nodeData.type = "function";
      nodeData.functionName = lines[i].functionName;
      nodeData.functionArgs = lines[i].functionArgs;
      nodeData.functionBody = lines[i].functionBody;
      //let withStr = `window.root.$imports.includes("${moduleName}") ? window.root.$imports[window.root.$imports.indexOf("${moduleName}")] : window.root`;
      let moduleRefStr = `window.moduleSpace["${moduleName || backupModuleName}"]`;
      let finalFunctionBody = `
        let tempHasHandlerRememberer927394 = ${moduleRefStr}.___proxyHandler.has;
        ${moduleRefStr}.___proxyHandler.has = window.rootProxyHasHandler; /* .bind(${moduleRefStr}.___proxyHandler); */


        ${nodeData.functionArgs.map(a => isValidJavaScriptIdentifier(a) ? `if(${a} && ${a}.getSelf) ${a} = ${a}.getSelf;` : '').join("")}

        // make a proxy for the module so we can "exclude" this function's inputs from the "with" statement.
        // this allows us to have inputs that are the same name as module globals and they won't be "overwritten" by those globals.
        // I had to add the Number stuff because my numbers were acting funny after messing with their prototype: https://stackoverflow.com/questions/52580398/why-doesnt-new-arraynew-number3-produce-an-array-of-length-3
        let moduleRefProxy = new Proxy(${moduleRefStr}.___proxyTarget.obj, {
          get: function(target, name) {
            if(false) {} // <-- just to make the next line easier to write
            ${nodeData.functionArgs.map(a => { a = a.split("=")[0]; if(a.startsWith("...")) { a = a.slice(3); } return `else if (name === "${a}") { return !isNaN(${a}) && typeof ${a} !== 'string' ? Number(${a}) : ${a}; }` }).join("\n")}
            /*else if (name === "b") { return 10; }*/
            else { return target[name]; }
          }
        });

        let returnValue;
        with(moduleRefProxy) {
          returnValue = (function(${nodeData.functionArgs.join(",")}) {
            ${nodeData.functionBody}
          }).apply(this, [${nodeData.functionArgs.join(",")}]);
        }

        ${moduleRefStr}.___proxyHandler.has = tempHasHandlerRememberer927394;
        return returnValue;
      `;
      nodeData.functionRef = new Function(nodeData.functionArgs.join(","), finalFunctionBody).bind(nodeData.parentNode);
      //nodeData.parentNode[nodeData.functionName] = new Function(nodeData.functionArgs.join(","), nodeData.functionBody).bind(nodeData.parentNode);
      Object.defineProperty(lines[i].node, "$nodeType", {value:"function", writable:true, configurable:true});
      Object.defineProperty(nodeData.parentNode, nodeData.functionName, {value:nodeData.functionRef, writable:true, configurable:true});
      Object.defineProperty(lines[i].node, "$text", {value:nodeData.functionName, writable:true, configurable:true});
      Object.defineProperty(lines[i].node, "$function", {value:nodeData.functionRef, writable:true, configurable:true});

      nodeData.parentNode.$functionChildren.push(lines[i].functionName);

    }

    if(lines[i].nodeType === "primitiveKeyValue") {
      nodeData.type = "primitiveKeyValue";
      nodeData.primitiveKey = lines[i].primitiveKey;
      nodeData.primitiveValue = lines[i].primitiveValue;
      // NOTE: it appears that then we write "[apple*10]" where apple={1|2|3}, JS implicitely calls toString on apple (even though it's a multiplication operation). so we don't need to worry about implementing valueOf
      //node.$value = lines[i].primitiveValue;
      //node.$key = lines[i].primitiveKey;
      let value = lines[i].primitiveValue;

      // if it's just plain text, process escaped characters (remove backslashes)
      // EDIT: NO! That's a terrible idea. Why remove escaped characters?! If you do, `output = \[wassup\]` throws an error (obviously). Was there a reason I previously thought this was a good idea?
      if(typeof value === 'string') {
        let split = splitTextAtAllBlocks(value);
        if(typeof value === 'string' && split.length === 1 && split[0][0] !== "[" && split[0][0] !== "{") { // only need to check start bracket because it it exists, then it is unescaped, then the last character *must* be a closing bracket (since splitted text array has length of 1) else the first bracket would be unclosed
          //value = processEscapedCharacters(value);
          Object.defineProperty(lines[i].node, "$isPlainPrimitive", {value:true, writable:true, configurable:true});
        }
      } else if(typeof value === "number" || typeof value === "boolean") {
        Object.defineProperty(lines[i].node, "$isPlainPrimitive", {value:true, writable:true, configurable:true});
      } else {
        throw new Error("unknown primitive type??");
      }

      Object.defineProperty(lines[i].node, "$value", {value:value, writable:true, configurable:true});
      Object.defineProperty(lines[i].node, "$key", {value:lines[i].primitiveKey, writable:true, configurable:true});
      //Object.defineProperty(nodeData.parentNode, lines[i].primitiveKey, {value:node, writable:true, configurable:true});

      if(nodeData.parentNode === nodeData.root.node && nodeData.primitiveKey === "$output" && nodeData.primitiveValue.substr(1, nodeData.primitiveValue.length-2).trim() === "this") {
        perchanceError("The module called <code><a href='/"+moduleName+"#edit'>"+moduleName+"</a></code> has <code>$output</code> set to <code>[this]</code>. Perchance does this by default, so this line should be removed. That is, if you don't specify a top-level <code>$output</code> (the list you want to export) for your generator, then Perchance will export your <i>whole hierarchy</i>.", nodeData.declarationLineNumber);
        return;
      }

      Object.defineProperty(nodeData.parentNode, lines[i].primitiveKey, {get:function() {
        // MARKER:odj29hfi3j0d2kj0hx24f
        if(node.$isPlainPrimitive) {
          return node.$value;
        }
        if(typeof node.$value === 'number') {
          return node.$value;
        } else if(typeof node.$value === 'string') {

          let splitted = splitTextAtAllBlocks(node.$value);
          if(splitted.length === 1) {
            if(splitted[0][0] === "[" /*&& splitted[0][splitted[0].length-1] === "]"*/) {
              // we don't want to evaluateText on this because it'll be coerced into a string (we want to preserve "direct" references)
              let expression = node.$value.substr(1,node.$value.length-2);
              return evaluateSquareBlock(node.$root, node.$parent, expression, {declarationLineNumber:node.$declarationLineNumber});
            } else if(splitted[0][0] === "{" /*&& splitted[0][splitted[0].length-1] === "}"*/) {
              let expression = node.$value.substr(1,node.$value.length-2);
              //return evaluateCurlyBlock(node.$root, node.$parent, expression, {declarationLineNumber:node.$declarationLineNumber});
              //return "{"+expression+"}";
              return node;
            } else {
              // // plain text (no curly or square blocks) - LATER: why do we need to evaluate it then? not necessary?
              //return evaluateText(node.$root, node.$parent, node.$value, {declarationLineNumber:node.$declarationLineNumber});
              return node.$value; // already ran processEscapedCharacters on it when we made it
            }
          } else {
            // we've found a non-direct reference that's not plain text.
            // we need to return the *actual node* because otherwise if we have `output = [prefix]-blah` (for example)
            // then we couldn't call `output.selectMany(3)` on it because `output` would be a plain string (like "pseudo-blah", for example).
            // note that when used on $value nodes, selectOne will just return the node itself
            return node;
            // var n = node.createClone;
            // n.$nodeType = "text";
            // Object.defineProperty(lines[i].node, "$text", {value:n.$value, writable:true, configurable:true});
            // Object.defineProperty(lines[i].node, "$oddsText", {value:"1", writable:true, configurable:true});
            // delete n.$key;
            // delete n.$value;
            // return n;
          }

        } else if(typeof node.$value === 'boolean') {
          return node.$value;
        } else {
          console.error("Something went wrong? $value should be either a number, string, or boolean, right?");
        }
      }, configurable:true});

      Object.defineProperty(lines[i].node, "$nodeType", {value:"value", writable:true, configurable:true});
      Object.defineProperty(lines[i].node, "$text", {value:lines[i].primitiveKey, writable:true, configurable:true});

      nodeData.parentNode.$valueChildren.push(lines[i].primitiveKey);
    }

  }

  // add $children property to each node (an array of all of the keys of the node's non-primitive, non-function children that are leaf nodes (i.e. that are themselves childless))
  // TODO: final confirmation: this should be just the keys, right? or would it be more useful to people as nodes? what are use cases of this property? [animal.$children] - actually yeah, it makes sense that it returns a key - if it returned an object then a random child of THAT object would be chosen!
  for(let node of allNodes) {
    let keys = Object.keys(node).filter(k => node[k].$nodeType === 'normal').sort((k1,k2) => node[k1].$declarationLineNumber-node[k2].$declarationLineNumber); // filter out primitives and sort by the actual order of the list
    Object.defineProperty(node, "$children", {value:keys, writable:true, configurable:true});
  }

  // // error if any of the **direct children of root** aren't valid javascript identifiers.
  // // this is necessary for two reasons:
  // // 1. calling [else] will throw an error - but [thing.else] will not
  // // 2. calling [my list] will throw an error - but [thing["my list"]] will not
  // let warnLineNumbers = [];
  // for(let key of root.node.$children) {
  //   if(!isValidJavaScriptIdentifier(key)) {
  //     warnLineNumbers.push( root.node[key].$declarationLineNumber );
  //   }
  // }
  // if(warnLineNumbers.length > 0) {
  //   if(warnLineNumbers.length > 10) {
  //     warnLineNumbers = warnLineNumbers.slice(1,9);
  //     warnLineNumbers.push("...");
  //   }
  //   console.warn(`Warning at line number${(warnLineNumbers.length > 1 ? "s" : "")+" "+warnLineNumbers.join(", ")}. All *top-level* items must only include letters, numbers and underscore characters (no spaces or special characters). They also must not start with a number. They also must not be any of these "reserved" names: break, do, instanceof, typeof, case, else, new, var, catch, finally, return, void, continue, for, switch, while, debugger, function, this, with, default, if, throw, delete, in, try class, enum, extends, super, const, export, import, implements, interface, let, package, private, protected, public, static, yield`);
  // }

  // TODO: add module name to all errors, or print module name when you catch errors
  // TODO: add "need help?" link to all errors that links to community (reddit, probably)

  // extract import statements:
  let importedModuleNamesArray = [];
  ignorePerchanceErrors = true;
  for(let line of lines) {
    if(line.nodeType === 'function' || line.node.$isPlainPrimitive) continue;
    let names = collectImportedModuleNamesFromText(line.text);
    importedModuleNamesArray.push(...names);
  }
  ignorePerchanceErrors = false;
  Object.defineProperty(root.node, "$imports", {value:[...new Set(importedModuleNamesArray)], writable:true, configurable:true});


  Object.defineProperty(root.node, "$allNodes", {value:allNodes, writable:true, configurable:true});



  // for(let node of allNodes) {
  //   if(node.$constructorFunction.prototype !== undefined) {debugger;}
  //   Object.defineProperties(node.$constructorFunction.prototype, Object.getOwnPropertyDescriptors(node));
  // }

  for(let node of root.node.$allNodes) {
    if(node.$parent !== root.node) continue;
    if(!isValidJavaScriptIdentifier(node.$text) || node.$text === "update") {
      perchanceError(`You've created a top-level list called "<b>${escapeHTMLSpecialChars(node.$text)}</b>", which is not allowed. Unfortunately top-level list names are subject to some strict rules:<ul><li>They must not contain any spaces</li><li>They must only contain letters (lower or upper case), numbers, underscore ("_") and the dollar sign ("$")</li><li>They must not begin with a number</li><li>They must not be any of the following special "reserved" names: update, do, if, in, for, let, new, try, var, case, else, enum, eval, null, this, true, void, with, await, break, catch, class, const, false, super, throw, while, yield, delete, export, import, public, return, static, switch, typeof, default, extends, finally, package, private, continue, debugger, function, arguments, interface, protected, implements, instanceof</li></ul> Sorry for the inconvenience! These rules may seem strange, but they're needed to make the more advanced features of the perchance engine work.`, node.$declarationLineNumber)
    }
  }



  let fn = function(){};
  fn.obj = root.node;
  let rootProxy = new Proxy(fn, {
      capturedCalls: [],
      executionProperties: [
        "toString",
        "valueOf",
        Symbol.hasInstance,
        Symbol.isConcatSpreadable,
        Symbol.iterator,
        Symbol.match,
        Symbol.prototype,
        Symbol.replace,
        Symbol.search,
        Symbol.species,
        Symbol.split,
        Symbol.toPrimitive,
        Symbol.toStringTag,
        Symbol.unscopables,
        Symbol.for,
        Symbol.keyFor,
        "selectMany",
        "selectOne",
        "selectAll",
        "getSelf",
        "getName",
        "$imports",
        "$allNodes",
        "$odds",
        "$text",
        "$value",
        "$key",
        "$nodeType",
        "$oddsText",
        "$declarationLineNumber",
        "$moduleName",
        "$root",
        "$parent",
        "$children",
        "isConsumable",
        "consumableList",
        "createClone",
        "evaluateItem",
        "joinItems",
        //"listName",
        // TODO: add new items here whenever you add any new special properties
      ],
      organiseCalls: function(capturedCalls) {
        // CAREFUL: do not move `apply`s away from their correct `get`
        let textTransforms = [];
        let nonTextTransforms = [];
        let inApplyChain = false;
        for(let i = 0; i < capturedCalls.length; i++) {
          let call = capturedCalls[i];
          if(call.type === "get" && textTransformNames.includes(call.name)) {
            // if(i+1 < capturedCalls.length && capturedCalls[i+1].type === "apply") {
            //   perchanceError(`Tried to call a text transform '${call.name}' as a function/method. Text transforms like ${call.name}, pluralForm and titleCase are not functions. They shouldn't be followed by a pair brackets.`);
            // }
            textTransforms.push(call);
            inApplyChain = true; // any `apply`s after this text transform must be moved with it

          } else if(call.type === "apply" && inApplyChain) {
            textTransforms.push(call);
          } else {
            nonTextTransforms.push(call);
            inApplyChain = false;
          }
        }
        let organisedCalls = [];
        organisedCalls.push(...nonTextTransforms);
        organisedCalls.push(...textTransforms);
        // TODO***: should text transforms be applied before joinItems?
        return organisedCalls;
      },
      executeChain: function(target, calls) {
        let result = target.obj;

        // let disable$output = false;
        // if(calls.map(c=>c.name).includes("disable$output")) {
        //   debugger;
        //   disable$output = true;
        // }

        if(calls.length === 0) {
          return target.obj;
        }

        // move text transforms to end (importantly, this method doesn't change the this.capturedCalls array - it returns a new one)
        let capturedCalls = this.organiseCalls(calls);

        let lastResult, secondLastResult;
        for(let i = 0; i < capturedCalls.length; i++) {
          let call = capturedCalls[i];

          secondLastResult = lastResult; // needed for `apply` (since LAST result is the actual function, and not the object/thing that it's being being called from)
          lastResult = result;

          if(call.type === "get") {
            result = result[call.name];
            if(result === undefined && i === 0) {
              result = window[call.name]; // try to fallback to global `window` if there's no list/function/property found - e.g. if they did [Math.min(hp, 100)] - "Math" is not a list
            }
          } else if(call.type === "apply") {
            // in my case the `this` variable should be the thing that the method is being called from
            // (this is done by default with getters)
            result = result.apply(secondLastResult, call.args);
          } else {
            console.error("How could this be?");
          }

          if(result === undefined) {
            // we DON'T return an error message because they may just want to check if the property exists.
            return undefined;
          }

          // Remember that `result` could be a Proxy (imagine `$output = [noun.pluralForm]` - root.$output is a proxy with `noun` and `pluralForm` in the capturedCalls array (because $value nodes are evaluated when called (using a `get` handler))).
          // If it IS a proxy, we want to append this proxy's capturedCalls array to the new one and execute it:
          if(result.___isProxy) {
            let leftOverCalls = capturedCalls.slice(i+1);
            let allCalls = [...result.___proxyHandler.capturedCalls, ...leftOverCalls];
            // TODO: just to confirm, we don't need to pass along secondLastResult do we? What if they called `apply` twice in a row? It's an edge case that might be annoying to debug later on
            return this.executeChain(result.___proxyTarget, allCalls);
          }

        }
        return result;
      },
      userDefinedNonNodePropertyIds: {},
      getUserDefinedNonNodePropertyId: function(property, calls) {

        // In case you're wondering what on earth is going on here:
        // We need to get the proxy to return properies that the USER has set with scripts (in square blocks, functions, etc.).
        // So we need to keep track of when they add their own properties to `root`.
        // That way, when the proxy gets a `get` request for one of these "non-node" properties, it can return it straight up.
        // Basically, any properties added to root AFTER compilation will always be returned in get requests (rather than returning a proxy).

        // This will probably cause memory leaks if they're setting properties on root with dynamically generated names?

        let seperator = "_{9287234632<<prop-id-call-seperator>>4632877592}_";
        let id = "root";
        for(let call of calls) {
          if(call.type === "apply") {
            return false;
          }
          id += seperator + call.name;
        }
        id += seperator + property;
        return id;
      },
      isUserDefinedNonNodeProperty: function(property, calls) {
        return this.userDefinedNonNodePropertyIds[ this.getUserDefinedNonNodePropertyId(property, calls) ] === true;
      },
      isFunctionNode: function(target, capturedCalls, property) {

        // If `property` is referencing a function node of target.obj, then we want to
        // return that function (not a proxy). That's why we need this function (we use it in the `get` handler)

        // if there are `apply`s in the capturedCalls, return false, since a function node can only be a
        // direct `get` chain from the root node (this is just an optimisation)
        for(let c of capturedCalls) {
          if(c.type === 'apply') return false;
        }

        let root = target.obj;

        // NOTE: we don't need to worry about user-defined non-node properties, because we detect them in the `get` trap
        // NOTE: remember, all nodes are functions, so be careful with your typeof logic (not used here anyway)
        let ref = root;
        for(let c of capturedCalls) {
          if(ref.$children.includes(c.name)) ref = ref[c.name];
          else return false;
        }
        if(ref.$functionChildren.includes(property)) return true; // the call path DOES reference a function node
        else return false;

        // OLD APPROACH: I have no idea why I was doing the reverse-lookup thing in this old approach. To get around proxy "looping" stuff???
        // // Here's what we do:
        // // 1. if there are `apply`s in the capturedCalls, return false, since a function node can only be a
        // //    direct `get` chain from the root node (this is just an optimisation)
        // // 2. For each occurrance of `property` in root.$allNodes that is a `value` or `function` node, trace
        // //    back up the $parent chain, checking at each stage that it matches the capturedCalls `get` names
        // //    in reverse order. If you get back to root, run the capturedCalls on root and see if it's a function.
        // //    If it is, return true. Otherwise continue.
        // // 3. If no matches, return false.
        //
        //
        // for(let c of capturedCalls) {
        //   if(c.type === 'apply') return false;
        // }
        //
        // let root = target.obj;
        //
        // for(let node of root.$allNodes) {
        //   if(node.$text !== property) continue;
        //   if(node.$nodeType !== 'value' && node.$nodeType !== 'function') continue;
        //
        //   // so we know it's a value or function node, and we know the `property` matches its name.
        //   // now we need to check if the node's ancestry chain back to root matches the capturedCalls array
        //
        //   let traceNode = node.$parent;
        //   for(let i = capturedCalls.length-1; i >= 0; i--) {
        //     if(capturedCalls[i].name !== traceNode.$text) break;
        //     traceNode = traceNode.$parent;
        //   }
        //
        //   if(traceNode === root) { // found a full path/ancestry match
        //     // now we just need to check if it's a function:
        //     let ref = root;
        //     for(let c of capturedCalls) { ref = ref[c.name]; }
        //     // i replaced the below two commented out lines with the third to help solve some `get` loops happening in the proxy with this.isFunctionNode
        //       // ref = ref[property]; // the final `get`
        //       // if(typeof ref === 'function') return true; // found a function node!!!
        //     if(ref.$functionChildren.includes(property)) return true; // found a function node!!!
        //   }
        //
        // }
        //
        // return false;

      },
      isGetterProperty: function(target, property) {
        let desc = Object.getOwnPropertyDescriptor(target.obj, property);
        return desc && desc.get;
      },
      get: function(target, property, receiver) {

        // commenting this out for now in favor of the perchance.org/my-generator#debugFreeze approach
        // if(window.globalProxyLoopCount > 10000000) {
        //   throw new Error("It seems like you've got an infinite loop somewhere in your code. Are you referencing a list name within a child of that list, such that it creates an infinite loop?");
        // }
        // window.globalProxyLoopCount++;


        if(property === "___isProxy") { return true; }
        if(property === "___proxyTarget") { return target; }
        if(property === "___proxyHandler") { return this; }
        // if(property === "___addExecutionPath") {
        //   let last = this.capturedCalls[this.capturedCalls.length-1];
        //   this.capturedCalls.pop();
        //   this.userDefinedNonNodePropertyIds[ this.getUserDefinedNonNodePropertyId(last, this.capturedCalls) ] = true;
        // }

        //if(this.isGetterProperty(target, property) || this.executionProperties.includes(property) || this.isUserDefinedNonNodeProperty(property, this.capturedCalls) || this.isFunctionNode(target, this.capturedCalls, property)) {
        if(true) { // testing out resolving all `get`s (QUESTION: was the only reason why we needed proxies for stuff like `pluralAnimalList = [animal.pluralForm]`? because that's really not needed anyway, and I don't think it's even possible in perchance's current state)

          let result = this.executeChain(target, this.capturedCalls);

          // if(typeof result === 'string' || typeof result === 'number')
          //   return result;

          if(result === undefined) {
            if(property === Symbol.toPrimitive) {
              return function() { return undefined; }
            } else {
              perchanceError(`the list/variable <code>${this.capturedCalls.map(c=>c.name).join("→")}</code> doesn't seem to exist in the <code>${target.obj.$moduleName}</code> generator.`);
              // if(property === Symbol.toPrimitive) return function() { return "(error)"; }
              return "(error)";
            }
          }

          let finalResult = result[property];
          if(typeof finalResult === 'function' && !finalResult.___isProxy) {
         finalResult = finalResult.bind(result);
          }
          return finalResult;

        } else {
            // need to return new proxy
            let newHandler = {};
            Object.assign(newHandler, this);
            newHandler.capturedCalls = this.capturedCalls.slice(0);

            newHandler.capturedCalls.push({type:"get", name:property});
            let np = new Proxy(target, newHandler)
            return np;
        }
      },
      apply: function(target, thisArg, args) {
          // // return a new proxy:
          // let newHandler = {};
          // Object.assign(newHandler, this);
          // newHandler.capturedCalls = this.capturedCalls.slice(0);
          // // add arguments to last call that was captured
          // newHandler.capturedCalls.push({type:"apply", args});
          // let np = new Proxy(target, newHandler);
          // return np;

          // i commented out the above code and added this because we always want functions to resolve immediately. otherwise we get this problem (see comment in bottom left): https://i.imgur.com/SY9MOt8.png -- as another example, people needed to write [a = dice("1d6").selectOne] instead of just [a = dice("1d6")]
          // maybe I should make exceptions for joinItems and those other inbuilt functions?
          this.capturedCalls.push({type:"apply", args});
          return this.executeChain(target, this.capturedCalls);
      },
      set: function(target, property, value, receiver) {
        // resolve it if it's a proxy (to prevent infinite loops when you do something like [abc=abc] (where abc is an already-defined top-level node), since that would set abc to its own proxy, so when you resolve it, it would resolve to the proxy, and the loop continues)
        if(value && value.___isProxy) {
          value = value.___proxyHandler.executeChain(value.___proxyTarget, value.___proxyHandler.capturedCalls);
        }

        let obj = this.executeChain(target, this.capturedCalls);
        if(typeof obj !== 'object') {
          perchanceError(`You tried to set <code>${escapeHTMLSpecialChars(this.capturedCalls.map(c=>c.name).join("."))}</code> to <code>${escapeHTMLSpecialChars(value)}</code>, but it appears that <code>${escapeHTMLSpecialChars(this.capturedCalls.map(c=>c.name).join("."))}</code> does not exist, or some other strange error has occurred.`);
          return;
        }
        Object.defineProperty(obj, property, {value, writable:true, configurable:true}); // importantly we're executing defineProperty on an actual object, NOT a proxy
        this.userDefinedNonNodePropertyIds[ this.getUserDefinedNonNodePropertyId(property, this.capturedCalls) ] = true;
        return value;
      },
      isExtensible: function(target) { return Object.isExtensible(this.executeChain(target, this.capturedCalls)); },
      preventExtensions: function(target) { return Object.preventExtensions(this.executeChain(target, this.capturedCalls)); },
      getOwnPropertyDescriptor: function(target, prop) { return Object.getOwnPropertyDescriptor(this.executeChain(target, this.capturedCalls), prop); },
      defineProperty: function(target, property, descriptor) { return Object.defineProperty(this.executeChain(target, this.capturedCalls), property, descriptor); },
      has: function(target, prop) { return (prop in this.executeChain(target, this.capturedCalls)); },
      deleteProperty: function(target, property) { return delete this.executeChain(target, this.capturedCalls)[property]; },
      ownKeys: function(target) { return Reflect.ownKeys(this.executeChain(target, this.capturedCalls)); }
  });
  window.rootProxyHasHandler = rootProxy.___proxyHandler.has;

  // add this module to modulespace now otherwise our functions won't work for the direct-reference checks
  // yolo
  window.moduleSpace[moduleName] = rootProxy;

  // EDIT: don't need this any more now that we've got isFunctionNode?
  // make user-defined functions execute immediately upon being called (i.e. don't return a proxy)
  // for(let i = 0; i < allNodes.length; i++) {
  //   if(allNodes[i].$nodeType === "function") {
  //     let node = allNodes[i];
  //     // we found a function, now lets build a call chain to it
  //     let calls = [];
  //     while(node.$parent) {
  //       calls.unshift(node.$parent.$text);
  //       node = node.$parent;
  //     }
  //     calls.shift(); // remove "<root>"
  //     let chain = [rootProxy];
  //     for(let c of calls) {
  //       chain.push(chain[chain.length-1][c]); // did it weirdly like this to prevent proxy setter being called
  //     }
  //     chain = chain[chain.length-1]; // the last element is the completed chain
  //     chain[allNodes[i].$text] = allNodes[i].$function; // EDIT: this calls the proxy setter and adds a "userDefinedNonNodeProperty" - was that the prupose?
  //   }
  // }


  // tie direct references to the actual nodes. e.g.:
  // animal = [african_animal]
  // $output = [person]
  // so rather than [animal] and [$output] being $value nodes, they'll directly reference [aftican_animal] and [person].
  // this is mainly needed to make $output behaviour sane.
  for(let node of allNodes) {
    if(node.$nodeType === "value" && !node.$isPlainPrimitive) {
      let blocks = splitTextAtAllBlocks(node.$value);
      if(blocks.length === 1 && blocks[0][0] === "[" && blocks[0][blocks[0].length-1] === "]") {
        let expression = node.$value.substr(1,node.$value.length-2);

        // only create link if they're DIRECTLY referencing another list:
        if(isValidJavaScriptIdentifier(expression)) {

          ignorePerchanceErrors = true; // it may fail because it could reference a function that hasn't been linked yet (i have no idea what's going on)
          let refNode = evaluateSquareBlock(root.node, node.$parent, expression, {declarationLineNumber:node.$declarationLineNumber});
          ignorePerchanceErrors = false;

          if(refNode && refNode.$nodeType /*|| Array.isArray(refNode)*/) { // did it resolve to a node?
            node.$parent[node.$text] = refNode;
          }
        }

        // NOTE: curly IMPORT blocks get tied to their actual module after all imports are compiled (in iframe html)

        // TODO**: does all this work by default now because of the new proxy approach? can I remove this part all together?

        // TODO***: we need to pre-evaluate $output so it's a *direct* reference to the thing it references,
        //          but if we do that with other $value nodes, things can get messy:
        //
        // person
        //   name = [name.selectOne]
        //
        // `person.name` will always be same node!!
        // if we call update it stays the same
        // if we do [a = new person], the selection remains the same
        // etc. - tonnes of problems
        // here's why we WANT to be able to do this in the first place:
        // person
        //   name = [name.selectOne]
        //   gender = [this.name.gender]
        //
        // note that we can already do this sort of thing:
        //
        // person
        //   age = {1-100}
        //   isAdult = [this.age > 18]
        //
        // potential solution: only pre-evaluate it if it's a direct reference to another node
        // (just like $output always is).

      }
    }
  }

  // give each node an id:
  for(let i = 0; i < allNodes.length; i++) {
    Object.defineProperty(allNodes[i], "$id", {value:i, writable:true, configurable:true});
  }



  // fix up $root references so they point to proxy instead of actual node
  // also remove node data symbol stuff
  // TODO***: what about $parent references - should they be proxied too?
  for(let i = 0; i < allNodes.length; i++) {
    Object.defineProperty(allNodes[i], "$root", {value:rootProxy, writable:true, configurable:true});
    delete allNodes[i][Symbol.for("node data")];
  }

  // at the moment, this is mainly so that other users don't get confused about strange syntax - they can easily see there's a preprocessor,
  // but in the future I may speed up preprocessing by just grabbing the function from the top, compiling that, and then running the code through it.
  // (instead of compiling the whole thing just to get the $preprocess function, as is happening now.) EDIT: oh, don't forget they can *import* preprocessor too!
  if(root.node.$preprocess && root.node.$allNodes[1].$text !== "$preprocess") {
    perchanceError(`There's a problem with the '${moduleName}' generator. The special <code>$preprocess</code> function must be placed above all your other lists - at the very top of the Perchance code editor.`);
    return;
  }

  if(root.node.$preprocess && !doNotPreprocess) {
    let preprocess;
    if(typeof root.node.$preprocess.nodeType === 'function') {
      preprocess = root.node.$preprocess;
    } else {
      if(!root.node.$preprocess.$value.startsWith("{import:")) return perchanceError(`There's a problem with the '${moduleName}' generator. The special <code>$preprocess</code> property must be defined as a function, or an imported function.`);
      let preprocessorName = root.node.$preprocess.$value.slice(8, -1);
      let module = window.moduleSpace[preprocessorName];
      if(!module) return perchanceError(`There's a problem with the '${moduleName}' generator. The preprocessor '${preprocessorName}' could not be found?`);
      if(!module.$output || !module.$output.$nodeType === "function") return perchanceError(`There's a problem with the '${moduleName}' generator. The '${preprocessorName}' was imported into '${moduleName}' as a preprocessor function, but the <code>$output</code> of '${preprocessorName}' doesn't exist or is not a function?`);
      preprocess = module.$output;
    }
    let newInputText = preprocess(root.perchanceCode);
    return createPerchanceTree(newInputText, moduleName, backupModuleName, true);
  }

  return rootProxy;
  //return root.node;


  // notes:
  // TODO: remove todos that are already done...
  // TODO: primitive declarations using "=" and update toString so it ignores primitive-valued properties
  // TODO: in toString: add {a|b|c} notation handling (recusive)
  // TODO: add array handling: we just treat ["a", "b^2", "c"] like {a|b^2|c} when Array.toString() is called (use the same back-end function)

  // TODO: if we across duplicate sibling nodes, what do we do? just make the latter overwrite the prior? add the odds together?

}


// this is very hacky...
function duplicatePerchanceNode(originalNode) {
  originalNode = originalNode.getSelf;

  // NOTE: node will be unreferencable from parent (since the node to be duplicated already holds that key).
  //       I think this is fine? They can always add it to the parent if some weird situation required that.

  let root = createPerchanceTree(originalNode.$perchanceCode, null, originalNode.$moduleName);
  root = root.getSelf; // get target object, not proxy

  for(let node of root.$allNodes) {
    if(node === root) continue;
    node.$id = originalNode.$root.getSelf.$allNodes.length;
    originalNode.$root.getSelf.$allNodes.push(node);

    node.$root = originalNode.$root.getSelf;
    node.$moduleName = originalNode.$moduleName;
    // I think this is causing some problems when it tries to get a node of a "directly linked" property:
    //node.$declarationLineNumber = getCorrespondingOriginalNode(node).$declarationLineNumber;
  }

  function getCorrespondingOriginalNode(clonedNode) {
    let propertyChain = [];
    let n = clonedNode;
    while(n.$parent) { // get chain up to cloned root
      propertyChain.unshift(n.$text);
      n = n.$parent;
    }
    n = originalNode.$parent.getSelf
    while(propertyChain.length) { // evaluate chain from original node's parent
      n = n[propertyChain[0]];
      propertyChain.shift();
    }
    return n;
  }

  let node = root[originalNode.$text];
  node.$parent = originalNode.$parent.getSelf;

  return node;

}


function escapeHTMLSpecialChars(unsafe) {
    return unsafe.toString()
         .replace(/&/g, "&amp;")
         .replace(/</g, "&lt;")
         .replace(/>/g, "&gt;")
         .replace(/"/g, "&quot;")
         .replace(/'/g, "&#039;");
 }

function collectImportedModuleNamesFromText(text) {
  let blocks = splitTextAtAllBlocks(text);
  let moduleNames = [];
  for(let b of blocks) {
    if(b[0] === "{") {
      let match = /^\{import:([a-z0-9\-]+)\}$/.exec(b);
      if(match && match.length > 1) {
        moduleNames.push( /^\{import:([a-z0-9\-]+)\}$/.exec(b)[1] );
      } else {
        moduleNames.push( ...collectImportedModuleNamesFromText( b.substr(1, b.length-2) ) );
      }
    }
  }
  return [...new Set(moduleNames)];
}

function evaluateTextAsNumber(rootNode, thisRef, text, ctxInfo) {
  // NOTE: This function is NOT for evaluating odds expressions!
  // NOTE: this only returns the number if it can be "exactly" converted
  // into a number - it doesn't evaluate the string's mathematical operators
  // or anything like that. It only returns if text === String(Number(text))
  // because that mean indicates that the deliberately typed a number, and even if
  // they didn't, the toString conversion that occurs when this number is output
  // will give **exacttly the same result anyway**.
  let value = evaluateText(rootNode, thisRef, text, ctxInfo);
  if(value === String(Number(value))) {
    return Number(value);
  } else {
    return false;
  }
}

function evaluateText(rootNode, thisRef, text, ctxInfo, previousEvaluationText) {

  // IMPORTANT: Some curly functions may "return themselves" i.e. {a} may return "{a}" rather than "a" or "an" - this
  //            behaviour is allowable because evaluateText is called recursively until no unescaped curly/square blocks
  //            exist. The reason curly functions may do this is because parts of their arguments (the two strings either side of
  //            "{a}" in the case of the "{a}" function) may not have been evaluated yet, and it may rely on those parts having
  //            been evaluated. e.g. in the text "{a} [animal] is over there", {a} must wait until [animal] has been evaluated.
  // ALSO NOTE: previousEvaluationText is needed because (for example) if we evaluate "created {a}", there's nothing after {a} for
  //            us to detemrine whether we should use "a" or "an". But "created {a}" is still valid because they could be using it
  //            as part of a larger sentence. If `text` evaluates to `previousEvaluationText`, then we just return it rather than
  //            recuring infinitely.
  // ALSO NOTE: I had to change this so that instead of [passing through once and then checking if there are any unevaluated blocks that would
  //            require another pass-over], it does the recursion *within* the loop - otherwise things get executed out of order (e.g. assignment of
  //            variables and stuff). The user expects their variable assignments to happen in the order that the final output text is printed in.
  //            Edit: Oh, but I still need to recurse at the end, because some curly blocks like {a} may only be executable once all the blocks are
  //            joined together into one string.

  var bracketRegex = /[\[\]{}]/; // note: this is used further down too

  if(!bracketRegex.test(text)) return text; // if it has no brackets, nothing needs evaluating

  var blocks = splitTextAtAllBlocks(text);
  // iterate through and evaluate each block
  var evaluatedBlocks = [];
  var block, leftBlocks, rightBlocks;
  for(let i = 0; i < blocks.length; i++) {
    block = blocks[i];
    leftBlocks = blocks.slice(0,i);
    rightBlocks = blocks.slice(i+1);

    if(block[0] === "{") {

      let input = block.substr(1,block.length-2);
      let result = ""+evaluateCurlyBlock(rootNode, thisRef, input, leftBlocks, rightBlocks, ctxInfo);
      if(result !== block && bracketRegex.test(result) && (result[0] === "[" || result[0] === "{" || splitTextAtAllBlocks(result).length > 1)) {
        result = evaluateText(rootNode, thisRef, result, ctxInfo, result);
      }
      evaluatedBlocks.push(result);

    } else if(block[0] === "[") {

      let input = block.substr(1,block.length-2);
      let result = ""+evaluateSquareBlock(rootNode, thisRef, input, ctxInfo);
      if(result !== block && bracketRegex.test(result) && (result[0] === "[" || result[0] === "{" || splitTextAtAllBlocks(result).length > 1)) {
        result = evaluateText(rootNode, thisRef, result, ctxInfo, result);
      }
      evaluatedBlocks.push(result);

    } else {
      evaluatedBlocks.push(block);
    }
  }

  if(previousEvaluationText === evaluatedBlocks.join("")) return previousEvaluationText; // see note at top of this function for explanation

  // if there's anything but plain text (i.e. if there's any curly/square blocks), recurse
  var b, completelyEvaluated = true;
  for(let i = 0; i < evaluatedBlocks.length; i++) {
    b = evaluatedBlocks[i];
    if(!bracketRegex.test(b)) continue;
    //if(b === undefined) { b = evaluatedBlocks[i] = "(not found)"; }
    if(b[0] === "[" || b[0] === "{" || splitTextAtAllBlocks(b).length > 1) {
      completelyEvaluated = false;
      break;
    }
  }

  if(!completelyEvaluated) {
    return evaluateText(rootNode, thisRef, evaluatedBlocks.join(""), ctxInfo, evaluatedBlocks.join(""));
  } else {
      return evaluatedBlocks.join("");
  }

}

function processEscapedCharacters(text) {

  //TODO***: when they have an item like `\ hello \` and they repeat it like [item][item][item]... you end up with `hello \ hello \ hello \ ...` because the two backslashes join up.
  //         I think this is pretty easy: if there's an unescaped backslash on the end, remove it when you create the node.
  //         If there's one at the start and it's just escaping a space, then remove that backslash too.

  // TODO***: allow them to escape forward slashes?
  // TODO***: empty character "\e"?

  // look for input characters that follow an unescaped backslash
  // and replace them with the output character and remove the backslash

  let escapableCharacters = [
    {input:"=", output:"="},
    {input:"{", output:"{"},
    {input:"}", output:"}"},
    {input:"[", output:"["},
    {input:"]", output:"]"},
    {input:"^", output:"^"},
    {input:"|", output:"|"},
    {input:"n", output:"\n"},
    {input:"t", output:"\t"},
    {input:"s", output:" "},
  ];

  let escaped = false;
  for(let i = 0; i < text.length; i++) {
    if(i !== 0) {
      if(text[i-1] !== "\\") {
        escaped = false;
      }
    }

    if(text[i] === "\\") {
      if(escaped) { // handle the special case of the backslash character:
        escaped = false;
        text = text.substr(0, i-1) + "\\" + text.substr(i+1);
        i--;
      } else {

        if(i === text.length-1) {
          return text.substr(0, text.length-1); // if last character is an unescaped backslash, return text without it
        } else {
          escaped = true;
        }

      }
      continue;
    }

    if(escaped) {
      for(let e of escapableCharacters) {
        if(text[i] === e.input) {
          text = text.substr(0, i-1) + e.output + text.substr(i+1);
          i--;
          break;
        }
      }
    }

  }

  return text;

}

function evaluateCurlyBlock(rootNode, thisRef, block, leftBlocks, rightBlocks, ctxInfo) {

  // `block` is a string of the *contents* of the curly block
  for(let fn of curlyFunctions) {
    // note that recursion can occur here since some curly functions may neet to
    // resolve their arguments to plain text. So they'll call evaluatedText, which
    // will call this function (if curly brackets are found), and so the loop loops.
    let evaluatedBlock = fn(rootNode, thisRef, block, leftBlocks, rightBlocks, ctxInfo);
    if(evaluatedBlock !== false) {
      if(typeof evaluatedBlock === 'string' && String(Number(evaluatedBlock)) === evaluatedBlock) {
        return Number(evaluatedBlock);
      } else {
        return evaluatedBlock;
      }
    }
  }

  if(block === "s") {
    perchanceError(`Your curly block "<code>{${escapeHTMLSpecialChars(block)}}</code>" doesn't appear to have the correct syntax. It is meant to be used for something like <code>I have {1-3} [fruit]{s}</code>. Notice that there needs to be a number preceding the <code>[fruit]</code> block. If you just want the plural of <code>[fruit]</code> then you can use <code>[fruit.pluralForm]</code>.`, ctxInfo.declarationLineNumber);
  } else {
    perchanceError(`Your curly block "<code>{${escapeHTMLSpecialChars(block)}}</code>" doesn't appear to have the correct syntax. Curly brackets (these ones: {}) are special characters in Perchance. They're used to do all sorts of fancy stuff which you can learn about in the <a href="/tutorial">tutorial</a>. If you didn't intend to use a special function, and instead just wanted to actually use curly brackets as literal characters, then you can put a backslash character before them like so: \\{...\\}`, ctxInfo.declarationLineNumber);
  }
  return "(invalid curly block)";

}

// function evaluateCurlylessBlock(rootNode, text) {
//   // TODO: allow passing in the declarationLineNumber and other details to this function?
//   let arr = splitTextAtSquareBlocks(text);
//   let resultText = "";
//   for(let e of arr) {
//     if(e[0] === "[") {
//       let jsExpr = e.substr(1, e.length-2);
//       resultText += evaluateSquareBlock(rootNode, rootNode, jsExpr, {declarationLineNumber:null});
//     } else {
//       resultText += e;
//     }
//   }
//   return resultText;
// }

function getTextOddsDetails(text) {
  // JUST returns text on either side of unescaped "^" that is in a TEXT block, with some minor validation (just to help users debug)

  let blocks = splitTextAtAllBlocks(text);
  let blockI = 0;
  let charI = 0;
  let overallI = 0;
  let currentBlock = blocks[0];
  let inText = null;
  function inTextBlock(checkI) {
    // NOTE: we hold the state outside of the function so that we can start from where we left off
    if(overallI > checkI) {
      // start again if previous check state is past the current one
      blockI = 0;
      charI = 0;
      overallI = 0;
      currentBlock = blocks[0];
      inText = null;
    }

    while(true) {

      if(blockI > blocks.length-1) {
        console.error("The checkI value (index to be checked to see if it's within a TEXT block) seems to be greater than the length of the whole text.");
        return false;
      }

      // skip block if checkI doesn't occur within it
      if(charI === 0) {
        if(overallI + blocks[blockI].length-1 < checkI) {
          overallI += blocks[blockI].length; //don't subtract 1 because that would put overallI at last character of current block - we want it to be at the first character of nect block
          charI = 0; // not necessary since it already is zero, but just for expliciteness
          blockI++; // only increase block index after adding block size to overallI
          continue;
        }
      }

      if(charI === 0) {
        if(blocks[blockI][0] === "[" || blocks[blockI][0] === "{") {
          inText = false;
        } else {
          inText = true;
        }
      }

      if(overallI === checkI) {
        return inText;
      }

      if(charI === blocks[blockI].length-1) { // if we've reached the end of a block
        overallI++;
        blockI++;
        charI = 0;
      } else {
        charI++;
        overallI++;
      }

    }
  }

  //text = text.trim(); // <-- I commented this out because inline OR notation like { a ^1| b ^2} would return "a " or "b " instead or " a " or " b "
  let escaped = false;
  for(let i = 0; i < text.length; i++) {
    if(i !== 0) {
      if(text[i-1] !== "\\") { escaped = false; }
    }
    if(text[i] === "\\") { escaped = !escaped; }

    if(!escaped && inTextBlock(i) && text[i] === NODE_ODDS_INDICATOR_CHARACTER) {
      let odds = text.substr(i+1).trim();

      // tiny bit of validation, just to help out users, but definitely not an full validation (which would be basically impossible to do, since we'd need to simulate every possible combination of potentially huge programs)
      if(!/[!0-9\[\{]/.test(odds[0])) {
        perchanceError(`There is a problem with this odds declaration: "<b>${escapeHTMLSpecialChars(odds)}</b>" (the full text of the line with the error is "${escapeHTMLSpecialChars(text)}"). The text after the "^" character defines the chance that that item will be selected (the higher the number the greater the chance). Odds declarations should only contain numbers, mathematical/logical operators, and are also allowed to have curly and square bracket blocks which will evaluate to number characters (these will be computed on-the-fly). If you'd like to use the "^" character literally (i.e. not to declare odds), you need to put a backslash character before it like so: "\\^"`);
        return false;
      }

      return {
        odds,
        textWithoutOdds: text.substr(0,i), // don't trim() - allow caller to decide, since different notations have difference whitespace preferences
      };
    }
  }

  return false;

}

function oddsTextToNumber(rootNode, thisRef, text) {

  // optimisations:
  if(text === "1") { // default value:
    return 1;
  } else if(!/[^0-9]/.test(text)) { // all digits:
    return Number(text);
  } else if(String(Number(text)) === text) {
    return Number(text);
  } else {

    // complex expressions:

    // NOTE: there's an important distinction between converting primitive declarations to numbers,
    // and converting odds declarations to numbers. We only convert primitive declarations to
    // numbers if Number.toString() would return the same string anyway. On the other hand, odds
    // declarations can contain strings with math symbols
    let evaluatedText = evaluateText(rootNode, thisRef, text);

    if(evaluatedText === "false") evaluatedText = "0";
    else if(evaluatedText === "true") evaluatedText = "1";

    // TODO: check that this works
    if(/[^0-9\/*&|%!.\(\)e\-]/.test(evaluatedText)) {
      perchanceError(`Your odds declaration: "<b>${escapeHTMLSpecialChars(text)}</b>", evaluated to: "<b>${escapeHTMLSpecialChars(evaluatedText)}</b>" which contains characters that aren't allowed in odds declarations. The text after the "^" character defines the chance that that item will be selected (the higher the number the greater the chance). Odds declarations should only contain numbers, mathematical/logical operators, and are also allowed to have curly and square bracket blocks which will evaluate to number characters (these will be computed on-the-fly). If you'd like to use the "^" character literally (i.e. not to declare odds), you need to put a backslash character before it like so: "\\^"`);
      return false;
    }
    let num = false;
    try { num = eval(evaluatedText); } catch(e) {/* no need to catch */}
    return num;

  }

}

function splitTextAtSquareBlocks(text) {
  let escaped = false;
  let unclosedBracketCount = 0;
  let inJSExpr = false;
  let inJSExprString1 = false, inJSExprString2 = false, inJSExprString3 = false;
  let expressionArray = [];
  for(let i = 0; i < text.length; i++) {
    if(i !== 0) {
      if(text[i-1] !== "\\") { escaped = false; }
    }
    if(text[i] === "\\") { escaped = !escaped; }

    // skip strings in js expressions (square brackets in strings would mess
    // with our unclosedBracketCount):
    if(inJSExpr && !inJSExprString1 && !escaped && text[i] === "\"") { inJSExprString1 = true; continue; }
    if(inJSExprString1 && !escaped && text[i] !== "\"") { continue; }
    if(inJSExprString1 && !escaped && text[i] === "\"") { inJSExprString1 = false; continue; }

    if(inJSExpr && !inJSExprString2 && !escaped && text[i] === "'") { inJSExprString2 = true; continue; }
    if(inJSExprString2 && !escaped && text[i] !== "'") { continue; }
    if(inJSExprString2 && !escaped && text[i] === "'") { inJSExprString2 = false; continue; }

    if(inJSExpr && !inJSExprString3 && !escaped && text[i] === "`") { inJSExprString3 = true; continue; }
    if(inJSExprString3 && !escaped && text[i] !== "`") { continue; }
    if(inJSExprString3 && !escaped && text[i] === "`") { inJSExprString3 = false; continue; }

    // skip escaped brackets within js expressions (i.e. within regex declarations):
    if(inJSExpr && escaped && (text[i] === "[" || text[i] === "]")) { continue; }

    if(!escaped && text[i] === "[") {
      unclosedBracketCount++;
      // if we weren't already inJSExpr, then this is the start of the a JSExpr:
      if(!inJSExpr && i !== 0) {
        expressionArray.push(text.substr(0, i));
        text = text.substr(i);
        i = 0; // will be incremented to 0 on next loop, as required (we've already processed the first char, "[")
      }
      inJSExpr = true;
      continue;
    }

    if(!escaped && text[i] === "]") {
      unclosedBracketCount--;
      // we're only out of the js expression when we've closed all brackets
      if(inJSExpr && unclosedBracketCount === 0) {
        inJSExpr = false;
        expressionArray.push(text.substr(0, i+1));
        text = text.substr(i+1);
        i = -1; // will be incremented to 0 on next loop as required (we haven't yet processed the first character of the new string (the character after "]"))
      }
    }

    // last expression:
    if(i === text.length-1 && text.length !== 0) {
      expressionArray.push(text);
    }
  }

  if(unclosedBracketCount !== 0) {
    perchanceError(`It appears that you've got a <b>mismatch in your opening and closing square brackets</b>. For each opening square bracket, there should be a closing one. If you'd like to use a <i>literal</i> square bracket (i.e. you want to actually display one, rather than using them to output a random list item, then you need to put a "backslash" before it like so: "\\[". Here's the text that seems to be causing the error: <blockquote>${escapeHTMLSpecialChars(text)}</blockquote>`);
    return false;
  }

  return expressionArray;

}


function getInlineFunctionDetails(lineText) {
  let escaped = false;
  let openIndex, opened = false;
  let closeIndex, closed = false;
  for(let i = 0; i < lineText.length; i++) {
    if(i !== 0) {
      if(lineText[i-1] !== "\\") { escaped = false; }
    }
    if(lineText[i] === "\\") { escaped = !escaped; }
    if(lineText[i] === "(" && !escaped) { opened = true; openIndex = i; }
    if(lineText[i] === ")" && !escaped && opened) { closed = true; closeIndex = i; }
    if(lineText[i] === "=" && !escaped && opened && closed && lineText[i+1] === ">") {
      let argString = lineText.substr(openIndex+1, closeIndex-openIndex-1);
      let args = argString.split(",").map(a => a.trim());
      let name = lineText.substr(0, openIndex).trim();
      let body = lineText.substr(i+2).trim();
      if(name.trim() === "") { return false; }
      if(body.trim() === "") { return false; }
      if(areValidFunctionArguments(args) || argString === "") {
        if(!isValidJavaScriptIdentifier(name)) return false;
        args = args.filter(a => a !== ""); // for zero arg case
        return { args, name, body };
      }
    }
  }
  return false;
}


function getFunctionHeaderDetails(lineText) {
  lineText = lineText.trim();
  let l = lineText.length;
  if(lineText[l-2] === "=" && lineText[l-1] === ">") {
    lineText = lineText.substr(0, l-2).trim();
    l = lineText.length;
  } else {
    return false;
  }

  let escaped = false;
  let opened = false;
  let openIndex;
  for(let i = 0; i < lineText.length; i++) {
    if(i !== 0) {
      if(lineText[i-1] !== "\\") { escaped = false; }
    }
    if(lineText[i] === "\\") { escaped = !escaped; }
    if(lineText[i] === "(" && !escaped) { opened = true; openIndex = i; }
    if(lineText[i] === ")" && !escaped && opened) {
      let argString = lineText.substr(openIndex+1, i-openIndex-1);
      let args = argString.split(",").map(a => a.trim());
      let name = lineText.substr(0, openIndex).trim();
      if(name.trim() === "") { return false; }
      if(areValidFunctionArguments(args) || argString === "") {
        if(!isValidJavaScriptIdentifier(name)) return false;
        args = args.filter(a => a !== ""); // for zero arg case
        return { args, name };
      }
    }
  }
  return false;
}

function areValidFunctionArguments(args) {
  for(let a of args) {
    if(!isValidJavaScriptIdentifier(a.replace("...","").replace("=",""))) {
      return false;
    }
  }
  return true;
}

function isValidJavaScriptIdentifier(str) {
  return /^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|null|this|true|void|with|await|break|catch|class|const|false|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF])*$/.test(str);
}

function getPrimitiveNodeDetails(lineText) {
  // NOTE: this function interprets some strings as numbers and casts them using Number()
  //       note that this is *just a shorthand*. The reason it's okay to do is because it
  //       only interprets strings as numbers if Number(that_number).toString() would return
  //       the same string anyway. If the user wants to do something like:
  //            prop = [this.age]/[this.height]
  //       then they should do this instead:
  //            prop = [this.age/this.height]
  //       because the prior will return something like "10/140" (i.e. a string, rather than a number)

  // remember: the lineText could have square blocks which can of course have equals signs in them.
  // But since primitive node keys can't be dynamic we can just return false if we see an unescaped square
  // or curly bracket before we find an unescaped equals sign

  let escaped = false;
  for(let i = 0; i < lineText.length; i++) {
    if(i !== 0) {
      if(lineText[i-1] !== "\\") { escaped = false; }
    }
    if(lineText[i] === "\\") { escaped = !escaped; }

    if((lineText[i] === "[" || lineText[i] === "{") && !escaped) {
      // found square or curly block before unescaped equals sign, so it's not a primitive node
      return false;
    }

    if(lineText[i] === "=" && !escaped) {
      let key = lineText.substr(0, i).trim();
      let valueText = lineText.substr(i+1).trim();
      if(key === "" || valueText === "") {
        return false;
      }

      let value;
      if(valueText === String(Number(valueText))) {
        value = Number(valueText);
      } else if(valueText === "true") { // TODO: test that this works (with filter/where, etc.)
        value = true;
      } else if(valueText === "false") {
        value = false;
      } else {
        value = valueText;
      }

      return {key, value};

    }
  }
  return false;
}

// function isMostLikelyAnIntentionalNumericString(valueText) {
//   if(isNaN(valueText)) { return false; }
//   if(/[^0-9.\-]+/.test(valueText)) { return false; }
//   if(valueText.split("-").length > 2) { return false; }
//   if(valueText.split(".").length > 2) { return false; }
//
//   if(valueText.split("-").length === 2) {
//     if(valueText[0] !== "-") { return false; }
//     if(valueText[0] === "-" && valueText[1] === ".") { return false; }
//   }
//
//   if(valueText.split(".").length === 2) {
//     if(valueText[0] === ".") { return false; }
//     if(valueText[valueText.length-1] === ".") { return false; }
//
//     let beforeDecimal = valueText.split(".")[0];
//     let afterDecimal = valueText.split(".")[1];
//     if(afterDecimal[afterDecimal.length-1] === "0") { return false; } // e.g. 20.0 shouldn't be treated as a number (they'd have just put in "20")
//     if(beforeDecimal[0] === "0" && beforeDecimal.length > 1) { return false; } // e.g. 020 shouldn't be treated as a number
//   }
//
//   return true;
//
// }


function splitTextAtCurlyBlocks(text) {
  // remember: we must ignore curly brackets if we're inside a js expression

  if(!text.includes("{") && !text.includes("}")) return [text];

  let escaped = false;
  let lastCurlyOpenIndex = null;

  let inJSExpr = false;
  let unclosedSquareBracketCount = 0;
  let inJSExprString1 = false;
  let inJSExprString2 = false;
  let inJSExprString3 = false;

  let inCurlyExpr = false;
  let unclosedCurlyBracketCount = 0;

  let blocks = [];

  for(let i = 0; i < text.length; i++) {
    if(i !== 0) {
      if(text[i-1] !== "\\") { escaped = false; }
    }
    if(text[i] === "\\") { escaped = !escaped; }

    ////////////////////////////////////
    // skip strings in js expressions //
    ////////////////////////////////////
    //(square brackets in strings would mess with our unclosedSquareBracketCount which we use to skip js expressions):
    if(inJSExpr && !inJSExprString1 && !escaped && text[i] === "\"") { inJSExprString1 = true; continue; }
    if(inJSExprString1 && !escaped && text[i] !== "\"") { continue; }
    if(inJSExprString1 && !escaped && text[i] === "\"") { inJSExprString1 = false; continue; }

    if(inJSExpr && !inJSExprString2 && !escaped && text[i] === "'") { inJSExprString2 = true; continue; }
    if(inJSExprString2 && !escaped && text[i] !== "'") { continue; }
    if(inJSExprString2 && !escaped && text[i] === "'") { inJSExprString2 = false; continue; }

    if(inJSExpr && !inJSExprString3 && !escaped && text[i] === "`") { inJSExprString3 = true; continue; }
    if(inJSExprString3 && !escaped && text[i] !== "`") { continue; }
    if(inJSExprString3 && !escaped && text[i] === "`") { inJSExprString3 = false; continue; }

    // skip escaped brackets within js expressions (i.e. escaped brackets within regex declarations):
    if(inJSExpr && /*--->*/escaped/*<---*/ && (text[i] === "[" || text[i] === "]")) { continue; }

    /////////////////////////////////////
    //      skip JS expressions        //
    /////////////////////////////////////
    // note that we're guarunteed to NOT be in a string for this block (since the
    // above block skips strings while we're in js expressions)
    if(!inJSExpr && text[i] === "[" && !escaped) {
      inJSExpr = true;
      unclosedSquareBracketCount++;
      continue;
    }
    if(inJSExpr && text[i] === "[") { // `escaped` is irrelevant, we're inJSExpr and not in string
      unclosedSquareBracketCount++;
      continue;
    }
    if(inJSExpr && text[i] === "]") { // `escaped` is irrelevant, we're inJSExpr and not in string
      unclosedSquareBracketCount--;
      if(unclosedSquareBracketCount === 0) { inJSExpr = false; }
    }


    //////////////////////////////////////
    //      extract curly blocks        //
    //////////////////////////////////////
    if(text[i] === "{" && !escaped && !inJSExpr) {
      unclosedCurlyBracketCount++;
      // if we're not yet in a curly expression, then this is the start of one:
      if(!inCurlyExpr && i !== 0) {
        blocks.push(text.substr(0, i));
        text = text.substr(i);
        i = 0;
      }
      inCurlyExpr = true;
      continue;
    }
    if(text[i] === "}" && !escaped && !inJSExpr) {
      unclosedCurlyBracketCount--;
      // we're only out of the curly expression when we've closed all curly brackets that were opened
      if(inCurlyExpr && unclosedCurlyBracketCount === 0) {
        blocks.push(text.substr(0, i+1));
        text = text.substr(i+1);
        i = -1;
        inCurlyExpr = false;
      }
    }

    // add last expression (if it didn't end in a curly block - in that case text.length === 0)
    if(i === text.length-1 && text.length !== 0) {
      blocks.push(text);
    }

  }

  if(unclosedSquareBracketCount !== 0) {
    perchanceError(`It appears that you've got <b>a mismatch in your opening and closing square brackets</b>. For each opening square bracket, there should be a closing one. If you'd like to use a <i>literal</i> square bracket (i.e. you want to actually display one, rather than using them to output a random list item, then you need to put a "backslash" before it like so: "\\[". Here's the text that seems to be causing the error: <blockquote>${escapeHTMLSpecialChars(text)}</blockquote>`);
    return ["(syntax error)"];
  }

  if(unclosedCurlyBracketCount !== 0) {
    perchanceError(`It appears that you've got <b>a mismatch in your opening and closing curly brackets</b>. For each opening curly bracket, there should be a closing one. If you'd like to use a <i>literal</i> curly bracket (i.e. you want to actually display one, rather than using them to do {import:noun} and stuff like that, then you need to put a "backslash" before it like so: "\\{". Here's the text that seems to be causing the error: <blockquote>${escapeHTMLSpecialChars(text)}</blockquote>`);
    return ["(syntax error)"];
  }


  return blocks;

}

function splitTextAtAllBlocks(text) {
  let curlySplitParts = splitTextAtCurlyBlocks(text);
  let blocks = []; // this array will contain curly blocks, text blocks, and square blocks
  for(let part of curlySplitParts) {
    if(part[0] !== "{") {
      let squareSplitParts = splitTextAtSquareBlocks(part);
      if(squareSplitParts) {
        blocks.push(...squareSplitParts);
      } else {
        console.error("Something is wrong?");
      }
    } else {
      blocks.push(part);
    }
  }
  return blocks;
}


function stripCommentFromLine(line) {
  // NOTE: comment must either start at start of line, or have a space before it.
  // e.g. in http://example.com , "//example.com" isn't considered a comment because
  // it doesn't have a preceding space
  let i, escaped = false;
  for(i = 0; i < line.length; i++) {
    if(i !== 0) {
      if(line[i-1] !== "\\") { escaped = false; }
    }
    if(line[i] === "\\") { escaped = !escaped; }
    if(line[i] === "/" && !escaped && line[i+1] === "/") {
      if(i === 0) {
        break;
      } else {
        if(line[i-1] === " " || line[i-1] === "\t") {
          break;
        }
      }
    }
  }
  return line.substr(0,i);
}



function normaliseLineIndentsToTabs(line) {
  let i, eqSpaceCount = 0; //equivalent spaces (1 tab = 2 spaces)
  for(i = 0; i < line.length; i++) {
    if(line[i] === " ") { eqSpaceCount++; }
    else if(line[i] === "\t") { eqSpaceCount += 2; }
    else { break; }
  }
  if(eqSpaceCount%2 !== 0) {
    return false; //odd number of spaces
  } else {
    return "\t".repeat(parseInt(eqSpaceCount/2)) + line.substr(i);
  }
}</script> <script>Object.defineProperty(String.prototype, "titleCase", {get:titleCaseMethod});
Object.defineProperty(Number.prototype, "titleCase", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "titleCase", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "sentenceCase", {get:sentenceCaseMethod});
Object.defineProperty(Number.prototype, "sentenceCase", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "sentenceCase", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "upperCase", {get:upperCaseMethod});
Object.defineProperty(Number.prototype, "upperCase", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "upperCase", {get:function(){return this.valueOf();}})

Object.defineProperty(String.prototype, "lowerCase", {get:lowerCaseMethod});
Object.defineProperty(Number.prototype, "lowerCase", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "lowerCase", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "replaceText", {value:replaceTextMethod});
Object.defineProperty(Number.prototype, "replaceText", {value:replaceTextMethod});
Object.defineProperty(Boolean.prototype, "replaceText", {value:replaceTextMethod});

Object.defineProperty(String.prototype, "pastTense", {get:pastTenseMethod});
Object.defineProperty(Number.prototype, "pastTense", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "pastTense", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "presentTense", {get:presentTenseMethod});
Object.defineProperty(Number.prototype, "presentTense", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "presentTense", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "futureTense", {get:futureTenseMethod});
Object.defineProperty(Number.prototype, "futureTense", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "futureTense", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "getSelf", {get:function() { return this+""; }});
Object.defineProperty(Number.prototype, "getSelf", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "getSelf", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "getOdds", {get:function() { return 1; }});
Object.defineProperty(Number.prototype, "getOdds", {get:function(){ return 1; }});
Object.defineProperty(Boolean.prototype, "getOdds", {get:function(){ return 1; }});

// WHAT IS THIS?
Object.defineProperty(String.prototype, "getName", {get:function() {
  return this+"";
}});
Object.defineProperty(Number.prototype, "getName", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "getName", {get:function(){return this.valueOf();}})


Object.defineProperty(String.prototype, "evaluateItem", {get:function() {
  return this.valueOf();
}});
Object.defineProperty(Number.prototype, "evaluateItem", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "evaluateItem", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, Symbol.toPrimitive, {value:function(hint) {
  return this.valueOf();
}});
// i don't think these two are necessary?
Object.defineProperty(Number.prototype, Symbol.toPrimitive, {value:function(hint) {
  return this.valueOf();
}});
Object.defineProperty(Boolean.prototype, Symbol.toPrimitive, {value:function(hint) {
  return this.valueOf();
}});


Object.defineProperty(String.prototype, "selectMany", {value:__selectManyMethodStringNum});
Object.defineProperty(Number.prototype, "selectMany", {value:__selectManyMethodStringNum});
Object.defineProperty(Boolean.prototype, "selectMany", {value:__selectManyMethodStringNum});
function __selectManyMethodStringNum(num) {
  let arr = [];
  for(let i = 0; i < num; i++) {
    arr.push(this);
  }
  // overwrite default array behaviour (selects a random one)
  // in the case where they don't specify a join() after the repeat:
  arr.toString = function() { return this.join(""); };
  return arr;
}

Object.defineProperty(String.prototype, "selectOne", {get:function() {
  return this.valueOf();
}});
Object.defineProperty(Number.prototype, "selectOne", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "selectOne", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "singularForm", {get:function(n) {
  let input = this;
  let output = nlp(input).nouns().toSingular().out("text");
  return output === "" ? input : output;
}});
Object.defineProperty(Number.prototype, "singularForm", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "singularForm", {get:function(){return this.valueOf();}});

Object.defineProperty(String.prototype, "pluralForm", {get:function(n) {
  let input = this;
  let output = nlp(input).nouns().toPlural().out("text");
  return output === "" ? input : output;
}});
Object.defineProperty(Number.prototype, "pluralForm", {get:function(){return this.valueOf();}});
Object.defineProperty(Boolean.prototype, "pluralForm", {get:function(){return this.valueOf();}});

// TODO***: add the rest of the node methods here and to Array (e.g. pastTense, etc.)

// Object.defineProperty(String.prototype, "shuffleCharacters", {value:function(numShuffles) {
//
//   if(numShuffles === undefined) {
//
//     var array = this.split("");
//     var currentIndex = array.length, temporaryValue, randomIndex;
//     // While there remain elements to shuffle...
//     while (0 !== currentIndex) {
//       // Pick a remaining element...
//       randomIndex = Math.floor(Math.random() * currentIndex);
//       currentIndex -= 1;
//       // And swap it with the current element.
//       temporaryValue = array[currentIndex];
//       array[currentIndex] = array[randomIndex];
//       array[randomIndex] = temporaryValue;
//     }
//     return array.join("")
//
//   } else {
//
//     let array = this.split("");
//     for(let i = 0; i < numShuffles; i++) {
//       let i1 = Math.floor(array.length*Math.random());
//       let i2 = Math.floor(array.length*Math.random());
//       let c1 = array[i1];
//       let c2 = array[i2];
//       array[i1] = c2;
//       array[i2] = c1;
//     }
//     return array.join("");
//     // TODO: why not join back into a string?
//
//   }
//
// }});</script> <script>Array.prototype.toString = function () {
  // default behaviour of arrays when converting to string is to choose a random element.
  // altering the toString method is how you make it not do this by default (this is how selectMany works)
  // let items = [];
  // for(let item of this) {
  //   items.push(item+"");
  // }
  // return chooseRandomTextByOdds(window.root, window.root, items);
  return this.selectOne+"";
};

Object.defineProperty(Array.prototype, "getOdds", {get:function() { return 1; }});
Object.defineProperty(Array.prototype, "getSelf", {get:function() { return this; }});
Object.defineProperty(Array.prototype, "getLength", {get:function() { return this.length; }});

Object.defineProperty(Array.prototype, "consumableList", {get:function() {

  let proxy = new Proxy(this, {
    alreadyConsumedItems:new Set(),
    get: function(target, property) {
      if(property === "selectOne") {
        let selectedNode = arraySelectOneMethod.bind(proxy)();
        if(selectedNode) {
          this.alreadyConsumedItems.add(selectedNode);
        }
        return selectedNode;
      } else if(property === "$alreadyConsumedItems") {
        return this.alreadyConsumedItems;
      } else if(property === "getLength") {
        return target.length - this.alreadyConsumedItems.size;
      } else {
        // TODO: strangely, the return value here seems to be automatically bound to this proxy.
        // so it also handles toString and valueOf methods like we want it to
        return target[property];
      }
    },
  });
  return proxy;

}});

Object.defineProperty(Array.prototype, "selectAll", {get: function() {
  return this;
}});

Object.defineProperty(Array.prototype, "selectMany", {value:selectManyMethod});

let arraySelectOneMethod = function() {
  //return this[Math.floor(Math.random()*this.length)];
  let candidates = []; /*{item, odds}*/
  for(let a of this) {
    if(a.$nodeType) { // if it's a node
      candidates.push({item:a, odds:a.$odds});
    } else if(typeof a === 'string') {
      let details = getTextOddsDetails(a);
      let odds = details ? Number(details.odds) : 1; // <-- this doesn't allow dynamic odds notation in arrays. Can always add it later if it turns out that it would be useful.
      let item = details ? details.textWithoutOdds : a;
      candidates.push({item, odds});
    } else {
      candidates.push({item:a, odds:1});
    }
  }

  if(this.$alreadyConsumedItems) {
    candidates = candidates.filter(c => !this.$alreadyConsumedItems.has(c.item));
  }

  let oddsTotal = candidates.reduce((a,v) => { return a+v.odds; }, 0);
  let stopOddsSum = oddsTotal*Math.random();

  let oddsRunningSum = 0;
  for(let c of candidates) {
    oddsRunningSum += c.odds;
    if(oddsRunningSum >= stopOddsSum) {
      return c.item;
    }
  }

  if(this.$alreadyConsumedItems) {
    perchanceError("It looks like your <code>consumableList</code> ran out of items. This is the list in question: "+this.slice(0, 100).join(", "));
  } else {
    perchanceError("Something went wrong! <code>Error: selectOne from array returned nothing.</code> Please report this on <a href='https://reddit.com/r/perchance'>reddit.com/r/perchance</a> since it's likely a bug with the engine.");
  }

};
Object.defineProperty(Array.prototype, "selectOne", {get:arraySelectOneMethod});

Array.prototype.shuffleItems = function(numShuffles) {
  // TODO: test random shuffle ()
  if(numShuffles === undefined) {

    var array = this;
    var currentIndex = array.length, temporaryValue, randomIndex;
    // While there remain elements to shuffle...
    while (0 !== currentIndex) {
      // Pick a remaining element...
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex -= 1;
      // And swap it with the current element.
      temporaryValue = array[currentIndex];
      array[currentIndex] = array[randomIndex];
      array[randomIndex] = temporaryValue;
    }
    return array;

  } else {

    let items = this;
    for(let i = 0; i < numShuffles; i++) {
      let i1 = Math.floor(items.length*Math.random());
      let i2 = Math.floor(items.length*Math.random());
      let c1 = items[i1];
      let c2 = items[i2];
      items[i1] = c2;
      items[i2] = c1;
    }
    return items;

  }

};

Object.defineProperty(Array.prototype, Symbol.toPrimitive, {value:function(hint) {
  return this.toString();
}});

// don't need this because we've got joinItems, right?
// Object.defineProperty(Array.prototype, "evaluateItem", {get:function() {
//   return this.toString();
// }});

Object.defineProperty(Array.prototype, "joinItems", {value:function(str="") {
  return this.join(str);
}});


// TODO***: make all methods configurable like in nodeMethods?

Object.defineProperty(Array.prototype, "pluralForm", {get:function() {
  return this.map(a => a.pluralForm);
}});
Object.defineProperty(Array.prototype, "singularForm", {get:function() {
  return this.map(a => a.singularForm);
}});

Object.defineProperty(Array.prototype, "pastTense", {get:function() {
  return this.map(a => a.pastTense);
}});
Object.defineProperty(Array.prototype, "presentTense", {get:function() {
  return this.map(a => a.presentTense);
}});
Object.defineProperty(Array.prototype, "futureTense", {get:function() {
  return this.map(a => a.futureTense);
}});

Object.defineProperty(Array.prototype, "titleCase", {get:function() {
  return this.map(a => a.titleCase);
}});
Object.defineProperty(Array.prototype, "upperCase", {get:function() {
  return this.map(a => a.upperCase);
}});
Object.defineProperty(Array.prototype, "lowerCase", {get:function() {
  return this.map(a => a.lowerCase);
}});
Object.defineProperty(Array.prototype, "sentenceCase", {get:function() {
  return this.map(a => a.sentenceCase);
}});

Object.defineProperty(Array.prototype, "replaceText", {value:function(p1, p2, p3) {
  return this.map(a => a.replaceText(p1, p2, p3));
}});</script> <script>let curlyFunctions = [curlyFunction_Or, curlyFunction_Import, curlyFunction_Range, curlyFunction_S, curlyFunction_A];


function curlyFunction_Import(rootNode, thisRef, text, leftBlocks, rightBlocks, ctxInfo) {
  if(!text.includes(":")) return false;
  let match = /^import:([a-z0-9\-]+)$/.exec(text);
  if(!match) {
    return false;
  } else {
    let moduleName = match[1];
    let moduleRef = rootNode.$moduleSpace[moduleName];
    if( moduleRef ) {
      return moduleRef;
    } else {
      perchanceError(`You've tried to import a generator that doesn't exist. The generator named '${escapeHTMLSpecialChars(moduleName)}' was not found. You can see for yourself by visiting that generator: <a href="/${moduleName}">${moduleName}</a>. There's a <a href="/useful-generators">list of useful generators</a> that may help you find what you're looking for.`, ctxInfo.declarationLineNumber);
      return `(cannot find generator '${moduleName}')`;
    }
  }
}

function curlyFunction_A(rootNode, thisRef, text, leftBlocks, rightBlocks) {
  if(text === "a" || text === "A") {
    let right = removeHtmlTagsFromBlocksArray(rightBlocks); //rightBlocks.filter(b => b.replace(/<[^>]+?>/g, '').trim() !== "");
    if(right[0] === undefined || (right[0] && (right[0].trim()[0] === "{"|| right[0].trim()[0] === "["))) {
      return text === "a" ? "{a}" : "{A}";
    } else {
      let aOrAn = AvsAnSimple.query(right[0].trim().replace(/<[^>]+?>/g, '').split(/[\s$%&*@#,!=+\-.?:;'"(){}\[\]\/<>`~_|]/g)[0].trim());
      if(text === "A") {
        if(aOrAn === "a") aOrAn = "A";
        else aOrAn = "An";
      }
      return aOrAn;
    }
  } else {
    return false;
  }
}

function curlyFunction_Range(rootNode, thisRef, text, leftBlocks, rightBlocks) {
  if(!text.includes("-")) return false;

  let match;

  // TODO: written numbers: {twenty-fifty five} ?
  // TODO: custom increments: {0-100:0.5} ? not sure about notation yet

  // {1-10}
  match = /^([0-9]+)-([0-9]+)$/.exec(text);
  if(match) {
    let min = Number(match[1]);
    let max = Number(match[2]);
    if(min > max) { [min, max] = [max, min]; }
    return min+Math.round(Math.random()*(max-min))
  }

  // {a-z}
  match = /^([a-z])-([a-z])$/.exec(text);
  if(match) {
    let min = Number(match[1].charCodeAt(0));
    let max = Number(match[2].charCodeAt(0));
    if(min > max) { [min, max] = [max, min]; }
    return String.fromCharCode( min+Math.round(Math.random()*(max-min)) );
  }

  // {A-Z}
  match = /^([A-Z])-([A-Z])$/.exec(text);
  if(match) {
    let min = Number(match[1].charCodeAt(0));
    let max = Number(match[2].charCodeAt(0));
    if(min > max) { [min, max] = [max, min]; }
    return String.fromCharCode( min+Math.round(Math.random()*(max-min)) );
  }

  return false;

}

function curlyFunction_S(rootNode, thisRef, text, leftBlocks, rightBlocks) {
  // there are {1..10} person{s} <-- can't do this, must manually handle the 2 cases
  // I have {1..10} coin{s} <-- can do this :)
  if(text === "s") {

    // TODO: fix this with some proper NLP to handle written numbers: "twenty five"

    // search through leftBlocks backwards for the first number.
    // if a non-text block is found before a number is, return "{s}"
    for(let i = leftBlocks.length-1; i >= 0; i--) {
      let block = leftBlocks[i];
      if(block[0] === "{" || block[0] === "[") {
        return "{s}";
      }
      let numbers = block.split(/[\s,!?\-()/.]+/).filter(a => /[0-9]+/.test(a));
      if(numbers.length > 0) {
        let num = Number(numbers[numbers.length-1]);
        return num === 1 ? "" : "s";
      }
    }

  }
  return false;

}

function curlyFunction_Or(rootNode, thisRef, text, leftBlocks, rightBlocks) {
  if(!text.includes("|")) return false;

  // no need to evaluate the arguments. we can just extract them (with their odds)
  // and select a random one. We could evaluate the args but in that case it would be
  // important that we extract all the *arguments* first (and their odds), then
  // choose a random one (otherwise NEW "|" and "^" characters could end up in the evaluated text)
  // and mess up our interpretation of the arguments.

  // pulled the bulk of this curlyFunction_Or function out into its own function for use elsewhere:
  let args = splitUpCurlyOrBlock(text);
  if(args === false) return false;

  // now we need to extract odds and choose a random one
  // note that in curly "or" notation, *spaces matter* before and after the text.
  // thus we don't trim the string after extracting the odds.

  return chooseRandomTextByOdds(rootNode, thisRef, args);

  // TODO: sort out Array.toString
  // LOOK AT Array.toString definition - try to extract out a common function
  // (or you could just call) .toString on `parts` lol
  // hmm. Array.toString relies on window.root being available which isn't great.
  // I think first step is to test whether it works, then extract out as much as I
  // can into functions. Array.toString is more of a handy hack - I don't want to rely
  // on it if I can help it.


}

function splitUpCurlyOrBlock(text) {
  // note this returns false if it's not a valid curly OR block.
  // also, it expects that the outer curly brackets have already been removed

  // the easiest way to be find all the unescaped "|" characters is to split it
  // up and then search through *only text blocks*:
  let blocks = splitTextAtAllBlocks(text);
  let args = [];
  let currentArg = "";
  for(let j = 0; j < blocks.length; j++) {
    let block = blocks[j];
    if(block[0] !== "{" && block[0] !== "[") {

      let escaped = false;
      for(let i = 0; i < block.length; i++) {
        if(i === 0) {
          // if we're at the start of the block, it's not escaped:
          escaped = false;
        } else {
          // if we're not at start, it's not escaped if the last char wasn't a backslash:
          if(block[i-1] !== "\\") { escaped = false; }
        }
        // toggle escapedness at each consecutive backslash:
        if(block[i] === "\\") { escaped = !escaped; }

        if(block[i] === "|" && !escaped) {

          currentArg += block.substr(0,i);
          args.push(currentArg);
          currentArg = "";
          block = block.substr(i+1);
          i = -1; // will get incremented to zero on loop

        } else if(i === block.length-1) {

          currentArg += block;

        }

      }
      if(j === blocks.length-1) {
        args.push(currentArg);
      }

    } else {
      currentArg += block;
      if(j === blocks.length-1) {
        args.push(currentArg);
      }
    }
  }

  if(args.length === 0 || args.length === 1) {
    // this is not the correct curly function to interpret this curly block
    return false;
  }

  return args;

}

function chooseRandomTextByOdds(rootNode, thisRef, textArray) {

  // extract odds
  let items = [];
  for(let text of textArray) {
    text = text+""; // cast to string (needed for Array.toString);
    let odds, textWithoutOdds;
    let details = getTextOddsDetails(text);

    // TODO: fix this up to suit the new way of doign things

    if(!details) {
      textWithoutOdds = text;
      odds = 1;
      items.push({text:textWithoutOdds, odds});
      continue;
    }

    textWithoutOdds = details.textWithoutOdds;
    odds = details.odds;

    if(typeof odds === 'string' && (odds[0] === "[" || /[0-9]/.test(odds[0]) )) { // if it's a dynamic odds expression:

      let evaluatedOdds = oddsTextToNumber(rootNode, thisRef, odds);

      if(evaluatedOdds < 0) {
        perchanceError(`The dynamic odds expression "${escapeHTMLSpecialChars(odds)}" in ${escapeHTMLSpecialChars("{"+textArray.join("|")+"}")} resolved to a *negative* number. Odds must be positive numbers, since it doesn't make sense for something to have a negative chance of being selected. Remember that you can try executing this odds expression in the console (bottom-left panel in the editor interface) and see what it yeilds. Also remember that "^" is a special character that is used to declare the probability that the item will be selected, and if you want to use it as a literal character (i.e. not to declare odds), then you need to put a "backslash" before it like so: "\\^"`)
        return false;
      }
      if(evaluatedOdds === false) {
        perchanceError(`The dynamic odds expression "${escapeHTMLSpecialChars(odds)}" in ${escapeHTMLSpecialChars("{"+textArray.join("|")+"}")} didn't resolve to a number. Remember that you can try executing this odds expression in the console (bottom-left panel in the editor interface) and see what it yeilds. Also remember that "^" is a special character that is used to declare the probability that the item will be selected, and if you want to use it as a literal character (i.e. not to declare odds), then you need to put a "backslash" before it like so: "\\^"`)
        return false;
      }
      odds = evaluatedOdds;

    }

    items.push({text:textWithoutOdds, odds});

  }


  // select one based on odds
  let oddsSum = 0;
  let oddsArray = [];
  for(let item of items) {
    oddsSum += item.odds;
    oddsArray.push(item.odds);
  }

  if(items.length === 0) {
    console.warn(`Warning: Tried to get random selection from an empty array?`);
    return "";
  }

  // choose random position in oddsSum range
  let oddsSumStopPoint = oddsSum*Math.random();
  let selectedItem;
  let oddsSumForChoice = 0;

  for(let i = 0; i < items.length; i++) {
    oddsSumForChoice += oddsArray[i];
    if(oddsSumForChoice >= oddsSumStopPoint) {
      selectedItem = items[i];
      break;
    }
  }

  return selectedItem.text;

}

// doesn't need to be perfect! just a rough clean to help the {a/A} blocks
function removeHtmlTagsFromBlocksArray(blocks) {
  const joinTag = "sdoxci892387uoooJOINoooTAGooohkdsiyygjd970sjgs";
  let str = blocks.join(joinTag);
  let charArr = str.split("");
  let inTag = false;
  for(let i = 0; i < charArr.length; i++) {
    if(charArr[i] === "<" && !inTag) {
      inTag = true;
      charArr[i] = "";
    } else if(charArr[i] === ">" && inTag) {
      inTag = false;
      charArr[i] = "";
    } else if(inTag) {
      charArr[i] = "";
    }
  }
  return charArr.join("").split(joinTag).filter(c => c.trim() !== "");
}</script> <script>let alreadyAttachedSaveHandler = false;
  let postMessagesRecieved = 0;
  let isFirstUpdate = true
  window.moduleSpace = {};
  let ignorePerchanceErrors = false;

  async function _updateOutput(outputTemplate) {

    document.querySelector("#output-container").innerHTML = outputTemplate;
    templatedNodes = [];
    addNodeTemplates(document.querySelector("#output-container"));
    reAttachDomElementEventsWithRoot(document.querySelector("#output-container"), window.root);
    await executeScriptTags();
    update();

  }

  async function executeScriptTags(containerSelectorOrEl = "#output-container") {
    let container;
    if(typeof containerSelectorOrEl === 'string') container = document.querySelector(containerSelectorOrEl);
    else container = containerSelectorOrEl;

    let scriptTags = [];
    if(container.tagName.toLowerCase() === 'script') {
      scriptTags = [container];
    } else {
      scriptTags = container.getElementsByTagName('script');
    }

    for (var i = 0; i < scriptTags.length ; i++) {
      await executeScriptTag(scriptTags[i]);
    }
  }

  async function executeScriptTag(oldScript) {
    let parent = oldScript.parentElement;
    let newScript = document.createElement('script');
    newScript.async = oldScript.async;
    newScript.defer = oldScript.defer;
    let loadPromise;
    if(newScript.src && !newScript.async && !newScript.defer) {
      loadPromise = new Promise(resolve =>  {newScript.onload = resolve; newScript.onerror = resolve; });
    }
    if(oldScript.src) newScript.src = oldScript.src;
    else newScript.textContent = "with(window.root.___proxyTarget.obj){"+oldScript.textContent+"}";
    newScript.setAttribute('type','text/javascript');
    parent.insertBefore(newScript, oldScript);
    parent.removeChild(oldScript);
    if(loadPromise) await loadPromise;
    return newScript;
  }

  let templatedNodes; // REMEMBER: order is important for functions like .id()
  function addNodeTemplates(domNode) {
    var nodes = domNode.childNodes;
    for (var i = 0, m = nodes.length; i < m; i++) {
        var n = nodes[i];
        if(n.nodeType !== n.TEXT_NODE && n.nodeName !== "#comment") {
          templatedNodes.push( ...addAttributeTemplateToEl(n) );
        }

        if (n.nodeType == n.TEXT_NODE && n.parentNode.tagName !== "SCRIPT" && n.parentNode.nodeName !== "STYLE") {

          // we found a text node, so lets break it into an expression array
          // and wrap expressions in spans (the "template span")

          let arr = splitTextAtAllBlocks(n.textContent);
          if(!arr) {
            perchanceError(`Some text has caused an error with the compiler. If you can, please post a bug report with a link to your translator on <a href="https://reddit.com/r/perchance">reddit.com/r/perchance</a> to help me fix this bug. Thanks! Here's the text that caused this issue: ${escapeHTMLSpecialChars(n.textContent)}`);
            return;
          }

          if(arr.length === 0) {
            if(n.textContent.trim() !== "") {
              perchanceError(`Something's not right. Some text has caused an error with the compiler. If you can, please post a bug report with a link to your translator on <a href="https://reddit.com/r/perchance">reddit.com/r/perchance</a> to help me fix this bug. A non-empty text node resulted in an empty block array. This is probably a problem with 'splitTextAtAllBlocks'. Maybe some 'continue' statements skipping over things that they shouldn't?`);
            }
            continue;
          }

          if(arr.length > 1 || arr[0][0] === "[" || arr[0][0] === "{") {
            //let exprSpan = document.createElement('span');
            // exprSpan.className = "__perchance_textnode_expression";
            // exprSpan.dataset.perchanceExpression = arr.join("");
            //exprSpan.innerText = arr.join("");

            //n.parentNode.insertBefore(exprSpan, n);
            //n.parentNode.removeChild(n);

            templatedNodes.push({oldNodes:[n], parentNode:n.parentNode, previousSibling:n.previousSibling, nextSibling:n.nextSibling, type:"textNode", text:arr.join("")});

          }

          // just regular text:
          if(arr.length === 1 && arr[0][0] !== "[" && arr[0][0] !== "{") {
            n.nodeValue = processEscapedCharacters(n.nodeValue);
          }

        } else {
          addNodeTemplates(n);
        }
    }
  }

  function collectTemplatableTextChunks(domNode, foundChunks) {
    if(!foundChunks) foundChunks = [];
    var nodes = domNode.childNodes;
    for (var i = 0, m = nodes.length; i < m; i++) {
        var n = nodes[i];

        if(n.nodeType !== n.TEXT_NODE && n.nodeName !== "#comment") {
          for(let attribute of Array.from(n.attributes)) {
            if(isTemplatableAttributeName(attribute.name)) {
              // we found a templatable attribute
              foundChunks.push(attribute.nodeValue);
            }
          }
        }

        if (n.nodeType == n.TEXT_NODE && n.parentNode.tagName !== "SCRIPT" && n.parentNode.nodeName !== "STYLE") {

          // we found a templatable text node
          foundChunks.push(n.textContent);

        } else {
          collectTemplatableTextChunks(n, foundChunks);
        }
    }
    return foundChunks;
  }

  let domEventAttributeNames = ["onafterprint","onbeforeprint","onbeforeunload","onerror","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onstorage","onunload","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onsearch","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onwheel","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll","oncopy","oncut","onpaste","onabort","oncanplay","oncanplaythrough","oncuechange","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting","onshow","ontoggle"];
  function isDomEventAttributeName(name) {
    if(domEventAttributeNames.includes(name)) { return true; }
  }

  function isTemplatableAttributeName(name) {

    // note that this *doesn't* mean that they're ignored in *generated* html (i.e. generated by perchance code)
    // because all of thosse strings are fully executed before being output.
    if(isDomEventAttributeName(name)) { return false; }

    // i was previously ignoring data attributes and stuff, but I see no reason for that.
    // sure, someone may need to use special characters in their web component attirbutes or whatever
    // but they can just escape them.

    return true;

  }

  function addAttributeTemplateToEl(el) {

    let templatableNodes = [];
    for(let attribute of Array.from(el.attributes)) {
      if(!isTemplatableAttributeName(attribute.name)) { continue; }
      templatableNodes.push({el, attribute, type:"attribute"});
    }

    let templatedNodes = [];
    for(let item of templatableNodes) {
      let {attribute, el} = item;
      let exprArr = splitTextAtAllBlocks(attribute.nodeValue);
      if(!exprArr[0]) { continue; }
      if(exprArr && (exprArr.length > 1 || exprArr[0][0] === "[" || exprArr[0][0] === "{")) {
        item.text = attribute.nodeValue;
        templatedNodes.push(item);
      } else {
        // this attribute is just plain text - no template needed. just need to remove any escaping-backslashes
        attribute.nodeValue = processEscapedCharacters(attribute.nodeValue);
      }
    }

    return templatedNodes;

  }

  function reAttachDomElementEventsWithRoot(container, root) {
    let elements = Array.from(container.querySelectorAll("*"));
    for(let el of elements) {
      for(let attr of Array.from(el.attributes)) {
        if(isDomEventAttributeName(attr.name)) {
          let fn = el[attr.name];
          el.addEventListener(attr.name.substr(2), function(event) {
            try {
              let fnStr = fn.toString();
              //fnStr = fnStr.replace("{","{ with(window.root.___proxyTarget.obj) {") + "}";
              fnStr = fnStr.replace("{","{ with(root) {") + "}";
              eval(`(${fnStr}).bind(this)(event)`);
            } catch(e) {
              perchanceError(`There was an error in this element in your HTML panel: <code>${this.outerHTML.replace(/<(.+?)>/g, "&lt;$1&gt;")}</code>. Here's the error: <span style='color:red'>${e}</span>`);
            }
          });
          el.removeAttribute(attr.name);
        }
      }
    }
  }


  function update(selectorOrEl) {
    // _updateOutput essentially reloads the page, whereas `update` just replaces all values of the expressions
    updateTemplatedNodes(selectorOrEl); // goes through templatedNodes array *in order* (that's important)
  }

  function htmlToElements(html) {
    var template = document.createElement('template');
    template.innerHTML = html;
    return Array.from(template.content.childNodes);
  }

  async function updateTemplatedNodes(selectorOrEl="") {
    let container;
    if(typeof selectorOrEl === 'string') {
      container = document.querySelector("#output-container "+selectorOrEl);
    } else {
      container = selectorOrEl;
    }

    // goes through attributes and text nodes in the order they were declared. (order of execution is important)
    for(let n of templatedNodes) {
      // NOTE THAT `n` IS NOT AN ACTUAL `Node` object - it's just an obj we created with similarly names properties which "represents" the original node (which we delete and replace)
      // NOTE: we can't replace spaces with &nbsp or new lines with <br/> because they could (for example) have spaces in attributes that are generated, or (for example) in html tags that they generate. we don't want <a&nbsphref="http://...">...</a>
      if(n.type === "textNode" && (container.contains(n.parentNode) || container === n.parentNode)) {
        // remove old nodes
        for(let node of n.oldNodes) {
          n.parentNode.removeChild(node);
        }
        // create new nodes
        let text = processEscapedCharacters( evaluateText(window.root, window.root, n.text, {declarationLineNumber:null}) );
        let newNodes = htmlToElements(text);
        // insert new nodes
        for(let node of newNodes) {
          // add it before the next sibling (if there is no next sibling, then it's the last one, so we just append)
          if(n.nextSibling && n.parentNode.contains(n.nextSibling)) n.parentNode.insertBefore(node, n.nextSibling);
          else n.parentNode.appendChild(node);
        }
        n.oldNodes = newNodes;
        // execute script tags:
        for(let i = 0; i < newNodes.length; i++) {
          if(newNodes[i].tagName && newNodes[i].tagName.toLowerCase() === "script") {
            newNodes[i] = await executeScriptTag(newNodes[i]);
          }
        }
      } else if(n.type === "attribute" && (container.contains(n.el) || container === n.el)) {
        n.attribute.nodeValue = processEscapedCharacters( evaluateText(window.root, window.root, n.text, {declarationLineNumber:null}) );
      } else {
        // this node isn't within the container/selector that was pased to the `update()` function
      }
      if(n.type !== "attribute" && n.type !== "textNode") perchanceError(`There was an invalid node type when trying to update the HTML. If you can, please post a bug report with a link to your translator on <a href="https://reddit.com/r/perchance">reddit.com/r/perchance</a> to help me fix this bug.`);
    }
  }

  window.addEventListener('message', async function (e) {
    postMessagesRecieved++;
    let origin = e.origin || e.originalEvent.origin; // For Chrome, the origin property is in the event.originalEvent object.
    //console.log("Change origin when you put it on a domain!");
    //console.log(origin)
    if(/*origin !== "http://app.dev:3001" && */origin !== "https://perchance.org") {
      console.error("invalid origin");
      return;
    }

    if(e.data.command === "updateOutput") {

      _updateOutputMessageHandler(e);

    }

    if(e.data.command === "evaluateText") {
      let text, callerId = e.data.callerId;
      if(window.root === null) {
        text = "There is an error in your generator's script.";
      } else {
        text = evaluateText(window.root, window.root, e.data.text, {declarationLineNumber:null});
      }
      e.source.postMessage({type:"evaluateTextResponse", text, callerId}, e.origin);
    }

    if(!alreadyAttachedSaveHandler) {
      // manually bubble up save commands out of this iframe and into editor
      document.addEventListener("keydown", (keyEvent) => {
        if (keyEvent.keyCode == 83 && (navigator.platform.match("Mac") ? keyEvent.metaKey : keyEvent.ctrlKey)) {
          keyEvent.preventDefault();
          e.source.postMessage({type:"saveKeyboardShortcut"}, e.origin);
        }
      }, false);
      alreadyAttachedSaveHandler = true;
    }

  });


  async function _updateOutputMessageHandler(e) {

    clearPerchanceErrors();
    document.querySelector("#perchance-dep-load-indicator").style.display = "none";

    try {

      let unfoundDeps = e.data.dependencies.filter(d => d.found === false);
      if(unfoundDeps.length > 0) {
        perchanceError(`${unfoundDeps.length > 1 ? "Some dependencies" : "A dependency"} (imported generator${unfoundDeps.length > 1 ? "s" : ""}) that you tried to import into your generator could not be found: <b>${unfoundDeps.map(d => d.name).join("</b>, <b>")}</b>. You can check that whether or not they exist by going to: <i>perchance.org/NAME</i> where "NAME" should be replaced with the name of the generator that you're trying to import.`);
      }

      if(!Array.isArray(e.data.dependencies)) {
        perchanceError(`Something went wrong with the dependencies (imported modules): ${e.data.dependencies}. This is an unusual bug and may indicate a problem with the Perchance engine. If you could post a bug report on the forum that'd be great: <a href='http://reddit.com/r/perchance'>reddit.com/r/perchance<a>`);
      }
      let foundDeps = e.data.dependencies.filter(d => d.found !== false);
      for(let dep of foundDeps) {
        dep.hasImportedPreprocessor = /\n$preprocess *= *{import:/.test("\n"+dep.modelText);
      }
      foundDeps.sort((a,b) => a.hasImportedPreprocessor ? 1 : -1); // compile generators that rely on preprocessors last so that their preprocessor has already been compiled and is thus available in the moduleSpace when we're compiling that generator
      for(let dep of foundDeps) {
        if(moduleSpace[dep.name]) continue; // Don't want to recompile things that we've already got! (only a problem if there is "recursive" dependency stuff I think)
        moduleSpace[dep.name] = createPerchanceTree(dep.modelText, dep.name);
        moduleSpace[dep.name].$moduleSpace = moduleSpace;
      }

      window.root = createPerchanceTree(e.data.generator.modelText, e.data.generator.name);

      if(!window.root) {
        perchanceError(`Your generator's script seems to have errors in it. If you haven't recieved any other errors above this one which could indicate what went wrong, then this could be a bug in the Perchance engine. In that case, it would be great if you could post a quick bug report on the forum: <a href="http://reddit.com/r/perchance">reddit.com/r/perchance<a>`);
      }

      moduleSpace[e.data.generator.name] = window.root;
      window.root.$moduleSpace = moduleSpace;

      // tie all direct import assignments to the actual module's root node (otherwise we can't access sub-properties):
      for(let moduleRoot of Object.values(window.root.$moduleSpace)) {
        for(let node of moduleRoot.$allNodes) {
          if(node.$nodeType === "value") {
            let match = /^\{import:([a-z0-9\-]+)\}$/.exec(node.$value);
            if(match) {
              let moduleName = match[1];
              let importedModuleRoot = window.root.$moduleSpace[moduleName];
              if(importedModuleRoot) {
                if(importedModuleRoot.getSelf.$output) {
                  //node.$parent[node.$key] = importedModuleRoot.$output;
                  Object.defineProperty(node.$parent, node.$key, {value:importedModuleRoot.getSelf.$output, writable:true, configurable:true});
                } else {
                  //node.$parent[node.$key] = importedModuleRoot;
                  Object.defineProperty(node.$parent, node.$key, {value:importedModuleRoot.getSelf, writable:true, configurable:true});
                }
              } else {
                perchanceError(`A module that you imported '${moduleName}' could not be found.`);
              }
            }
          }
        }
      }

      // get all imports in HTML and add them to window.root.$imports
      let htmlTestDiv = document.createElement("div");
      htmlTestDiv.innerHTML = e.data.generator.outputTemplate;
      let templatableTextChunks = collectTemplatableTextChunks(htmlTestDiv);
      let htmlImports = [];
      ignorePerchanceErrors = true;
      for(let chunk of templatableTextChunks) {
        htmlImports.push( ...collectImportedModuleNamesFromText(chunk) );
      }
      ignorePerchanceErrors = false;

      window.root.$imports.push(...new Set(htmlImports));

      // remove import of THIS module (most likely mistake by user)
      window.root.$imports = window.root.$imports.filter(name => name !== e.data.generator.name);


      let currentDepNames = e.data.dependencies.map(d => d.name);
      let newDepNames = window.root.$imports.filter(name => !currentDepNames.includes(name));

      // // only send import updates if there are new imports
      if(newDepNames.length > 0) {
        e.source.postMessage({type:"importsUpdate", imports:window.root.$imports}, e.origin);
        document.querySelector("#perchance-dep-load-indicator").style.display = 'block';
        //document.querySelector("#output-container").innerHTML = `Loading newly imported dependenc${newDepNames.length === 1 ? "y" : "ies"}... (${newDepNames.join(", ")})`;

      } else {
        await _updateOutput(e.data.generator.outputTemplate);
      }

      // tell main app which imports are being *directly* used by this generator in case we
      // can clear some no-longer-used dependencies
      let unusedOrIndirectDeps = currentDepNames.filter(n => !window.root.$imports.includes(n));
      if(unusedOrIndirectDeps.length > 0) {
        parent.postMessage({type:"importsUpdate", imports:window.root.$imports}, "https://perchance.org");
      }

      // get page title from first h1:
      let h1 = document.querySelector("h1");
      if(!h1) h1 = document.querySelector("h2")
      let generatorTitle = h1 && h1.textContent !== "Your Generator's Title" && h1.textContent !== "Minimal Example" ? h1.textContent : window.location.pathname.slice(1).split("-").filter(function(a){return a;}).map(function(word){return word[0].toUpperCase()+word.slice(1); }).join(" ");
      let generatorHTML = document.querySelector("#output-container").innerHTML;
      //e.source.postMessage({type:"seoUpdate", title:generatorTitle, html:generatorHTML}, e.origin);
      parent.postMessage({type:"seoUpdate", title:generatorTitle, html:generatorHTML}, "https://perchance.org"); // had to do this so our initial dummy update (using embedded data) works.
      
      parent.postMessage({type:"finishedLoading"}, "https://perchance.org");

      isFirstUpdate = false;

    } catch(error) {
      //debugger;
      document.querySelector("#output-container").innerHTML = e.data.generator.outputTemplate;
      perchanceError(`There was an error while trying to compile your generator. Here's the error message: <blockquote>${escapeHTMLSpecialChars(error.stack)}</blockquote>`);
    }
  }

  window.addEventListener("DOMContentLoaded", function() {

    let fakeMessageEvent = {};
    fakeMessageEvent.source = {};
    fakeMessageEvent.source.postMessage = function() {};
    fakeMessageEvent.data = {
      generator:JSON.parse( decodeURI( document.querySelector("#preloaded-generator-data").innerText ) ),
      dependencies:JSON.parse( decodeURI( document.querySelector("#imported-generators").innerText ) ),
    };
    _updateOutputMessageHandler(fakeMessageEvent);

  });

  window.addEventListener("DOMContentLoaded", function() {
    var h1 = window.document.querySelector("h1");
    if(h1) document.title = h1.innerText+" - Perchance";
    else document.title = window.location.pathname.slice(1).split("-").filter(function(a){return a;}).map(function(word){return word[0].toUpperCase()+word.slice(1); }).join(" ")+" - Perchance";
  });</script> <style> .ldspmzjfhueifssge-ring{ display:inline-block;position:relative;width:64px;height:64px;}.ldspmzjfhueifssge-ring div{ box-sizing:border-box;display:block;position:absolute;width:51px;height:51px;margin:6px;border:6px solid #444;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;border-color:#444 transparent transparent transparent;}.ldspmzjfhueifssge-ring div:nth-child(1){ animation-delay:-0.45s;}.ldspmzjfhueifssge-ring div:nth-child(2){ animation-delay:-0.3s;}.ldspmzjfhueifssge-ring div:nth-child(3){ animation-delay:-0.15s;}@keyframes lds-ring{ 0%{ transform:rotate(0deg);}100%{ transform:rotate(360deg);}}</style> <div id="output-container"> </div> <div id="perchance-dep-load-indicator" style="display:none;position:fixed;bottom:8px;right:8px;background-color:#34ba22;color:white;cursor:pointer;"> <span style="display:inline-block;padding:0.5em;">🔃&#xFE0E; Loading imported generators...</span> </div> <div onclick="showPerchanceErrorBox();" id="perchance-error-indicator" style="display:none;position:fixed;bottom:8px;right:8px;background-color:#fc5b5b;color:white;cursor:pointer;"> <span style="display:inline-block;padding:0.5em;">⚠&#xFE0E; This generator has errors (click here) ⚠&#xFE0E;</span> </div> <div id="perchance-error-container" style="display:none;"> <div style class="background" onclick="document.querySelector('#perchance-error-container').style.display = 'none';"></div> <div style="z-index:51;" class="outer-wrapper" onclick="if(!document.querySelector('#perchance-error-container').contains(event.target)) { document.querySelector('#perchance-error-container').style.display = 'none'; }"> <div ref="contentWrapper" class="content-wrapper"> <div class="view"> <div class="modal-body" style="max-height:350px;overflow-y:auto;padding:1em;text-align:left;"> <div id="perchance-error-stream"></div> <p style="background:#b5ffb5;padding:1em;margin-bottom:0;">If you need help with errors, please post a question to the <a href="http://reddit.com/r/perchance">perchance community</a> along with a link to your generator and someone will take a look at it for you :) </p> </div> <div class="modal-footer"> <button class="main" style="width:100%;" onclick="document.querySelector('#perchance-error-container').style.display = 'none';">close</button> </div> </div> </div> </div> </div> <style> #perchance-error-container{ display:none;position:fixed;top:0;left:0;right:0;bottom:0;font-family:monospace;}#perchance-error-container blockquote{ background:#eee;padding:1em;}#perchance-error-container .outer-wrapper{ margin:auto;box-sizing:border-box;max-width:90%;}#perchance-error-container .background{ z-index:-1;position:fixed;top:0;left:0;width:100%;height:100%;opacity:0.2;background:#000;transition:opacity .15s linear;}#perchance-error-container .content-wrapper{ overflow:hidden;background:#fff;height:100%;width:100%;border-radius:3px;} #perchance-error-container button, #perchance-error-container input{ height:3em;}#perchance-error-container button{ background:#eee;color:#444;width:50%;border:none;outline:none;font-size:90%;}#perchance-error-container button:hover{ background:#e1e1e1;}#perchance-error-container button.main{ background:#444;color:white;}#perchance-error-container button.main:hover{ background:#333;}#perchance-error-container span.link{ cursor:pointer;text-decoration:underline;color:#1212ff;}#perchance-error-container code{ padding:0.1em 0.3em;background:#eee;}</style> <script>let perchanceErrorString = "";
  let __maxPerchanceErrorCount = 20;
  let __currentPerchanceErrorCount = 0;
  function perchanceError(message, lineNumber) {
    __currentPerchanceErrorCount++;
    if(__currentPerchanceErrorCount > __maxPerchanceErrorCount) return;
    message = message.replace(/#<Object>/g,"#&lt;Object&gt;");
    if(ignorePerchanceErrors) { return; } // needed to ignore errors in "secondary parses" (like the one to extract html imports)

    document.querySelector("#perchance-error-indicator").style.display = "block";
    let errorEl = document.querySelector("#perchance-error-stream");
    let intro;
    if(lineNumber) {
      intro = `<span style="opacity:0.5;">An error has occured near <b style='color:red;'>line number ${lineNumber}</b>:</span>`;
    } else {
      intro = `<span style="opacity:0.5;">An error has occured somewhere in your code (in lists or HTML):</span>`;
    }
    perchanceErrorString += `<div>${intro} ${message}</div><hr style="border: 1px solid #e1e1e1;"/>`;
  }
  function clearPerchanceErrors() {
    document.querySelector("#perchance-error-container").style.display = 'none';
    document.querySelector("#perchance-error-indicator").style.display = "none";
    perchanceErrorString = "";
    document.querySelector("#perchance-error-stream").innerHTML = "";
    __currentPerchanceErrorCount = 0;
  }
  function showPerchanceErrorBox() {
    document.querySelector("#perchance-error-stream").innerHTML = perchanceErrorString;
    document.querySelector("#perchance-error-container").style.display = 'flex';
  }</script> </body> </html> 